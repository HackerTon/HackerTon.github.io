<!DOCTYPE html><html lang="en" class="scroll-smooth"> <head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" href="/assets/favicon.ico"><title>Markdowns</title><link rel="stylesheet" href="/astrofiles/cv.c5ffa1ad.css" />
<link rel="stylesheet" href="/astrofiles/markdown.3a8d90c7.css" /></head> <body class="bg-[#301934]"> <div class="flex place-content-center p-5"> <h1 class="flex-none text-white">Articles archive</h1> </div> <div class="m-9 hover:scale-105  ease-in-out transition-transform"> <a href="/post/week-1"> <div class="bg-white pl-5 pt-2 pr-5 w-fit rounded-t-lg"> My First Post </div> <div class="max-h-52 min-h-min overflow-clip p-5 bg-white rounded-b-lg rounded-tr-lg"> <p>After I have upgraded Astro to use the latest Astro version 2.0.0.
a</p> </div> </a> </div><div class="m-9 hover:scale-105  ease-in-out transition-transform"> <a href="/post/week-2"> <div class="bg-white pl-5 pt-2 pr-5 w-fit rounded-t-lg"> My Second Post </div> <div class="max-h-52 min-h-min overflow-clip p-5 bg-white rounded-b-lg rounded-tr-lg"> <h1 id="testing-out-code">Testing out code</h1>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">int</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">fun</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    cout </span><span style="color: #81A1C1">&#x3C;&#x3C;</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">hello</span><span style="color: #ECEFF4">"</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre> </div> </a> </div><div class="m-9 hover:scale-105  ease-in-out transition-transform"> <a href="/post/week-3"> <div class="bg-white pl-5 pt-2 pr-5 w-fit rounded-t-lg"> Monitor Filament Moisture </div> <div class="max-h-52 min-h-min overflow-clip p-5 bg-white rounded-b-lg rounded-tr-lg"> <h1 id="explanation-about-the-code">Explanation about the code</h1>
<h2 id="setup-function">Setup Function</h2>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #616E88">// Basic Controller for wifi, mdns and ota</span></span>
<span class="line"><span style="color: #81A1C1">void</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">setup</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">Serial</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">begin</span><span style="color: #ECEFF4">(</span><span style="color: #B48EAD">115200</span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">dht</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">begin</span><span style="color: #ECEFF4">()</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #616E88">    // Wire.begin();</span></span>
<span class="line"><span style="color: #616E88">    // light_meter.begin(light_meter.CONTINUOUS_HIGH_RES_MODE_2);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #616E88">    // begin_webserver();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5E81AC; font-weight: bold">#ifdef</span><span style="color: #5E81AC"> </span><span style="color: #88C0D0">DEBUG</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">controller</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">enable_wifi_station</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">SSID</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> PASSWORD</span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #5E81AC; font-weight: bold">#</span><span style="color: #81A1C1">else</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">controller</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">enable_wifi_ap</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">SSID</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> PASSWORD</span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #5E81AC; font-weight: bold">#</span><span style="color: #81A1C1">endif</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">if</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">(</span><span style="color: #81A1C1">!</span><span style="color: #D8DEE9">display</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">begin</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">SSD1306_SWITCHCAPVCC</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">0x</span><span style="color: #B48EAD">3C</span><span style="color: #ECEFF4">))</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #D8DEE9">Serial</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">println</span><span style="color: #ECEFF4">(</span><span style="color: #88C0D0">F</span><span style="color: #ECEFF4">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">SSD1306 allocation failed</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">))</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">        </span><span style="color: #81A1C1">for</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">(</span><span style="color: #81A1C1">;;</span><span style="color: #ECEFF4">)</span></span>
<span class="line"><span style="color: #D8DEE9FF">            </span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #ECEFF4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">display</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">display</span><span style="color: #ECEFF4">()</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">delay</span><span style="color: #ECEFF4">(</span><span style="color: #B48EAD">2000</span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
<p>First, we will have to initialize a Serial IO with baudarate of 115200.
Besides that, we have to initialize our DHT. To allow our device to communicate
with any other client. We have to first initialize our our as a wifi station
that will connect to our home wifi by calling <code>controller.enable_wifi_station(SSID, PASSWORD)</code>
function with <code>SSID</code> and <code>PASSWORD</code> argument. After that, we will need to initialize our OLED display with <code>display.begin(SSD1306_SWITCHCAPVCC, 0x3C)</code>. Finally we will clear our display by
calling <code>display.display()</code>.</p>
<h2 id="loop-function">Loop Function</h2>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #81A1C1">void</span><span style="color: #D8DEE9FF"> </span><span style="color: #88C0D0">loop</span><span style="color: #ECEFF4">()</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">{</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #88C0D0">delay</span><span style="color: #ECEFF4">(</span><span style="color: #B48EAD">1000</span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #8FBCBB">sensors_event_t</span><span style="color: #D8DEE9FF"> event</span><span style="color: #81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">dht</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">temperature</span><span style="color: #ECEFF4">().</span><span style="color: #88C0D0">getEvent</span><span style="color: #ECEFF4">(</span><span style="color: #81A1C1">&#x26;</span><span style="color: #D8DEE9FF">event</span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">float</span><span style="color: #D8DEE9FF"> temperature </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">event</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">temperature</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">dht</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">humidity</span><span style="color: #ECEFF4">().</span><span style="color: #88C0D0">getEvent</span><span style="color: #ECEFF4">(</span><span style="color: #81A1C1">&#x26;</span><span style="color: #D8DEE9FF">event</span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #81A1C1">float</span><span style="color: #D8DEE9FF"> humidity </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #D8DEE9">event</span><span style="color: #ECEFF4">.</span><span style="color: #D8DEE9">relative_humidity</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #616E88">    // printf("%.3f\n", temperature);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">display</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">clearDisplay</span><span style="color: #ECEFF4">()</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">display</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">setTextSize</span><span style="color: #ECEFF4">(</span><span style="color: #B48EAD">1</span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">display</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">setTextColor</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">WHITE</span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">display</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">setCursor</span><span style="color: #ECEFF4">(</span><span style="color: #B48EAD">0</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">0</span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">display</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">printf</span><span style="color: #ECEFF4">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Temperature: %.2f°C</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> temperature</span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">display</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">setTextSize</span><span style="color: #ECEFF4">(</span><span style="color: #B48EAD">1</span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">display</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">setTextColor</span><span style="color: #ECEFF4">(</span><span style="color: #D8DEE9FF">WHITE</span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">display</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">setCursor</span><span style="color: #ECEFF4">(</span><span style="color: #B48EAD">0</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">10</span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">display</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">printf</span><span style="color: #ECEFF4">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">Humidity: %.2f%</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">,</span><span style="color: #D8DEE9FF"> humidity</span><span style="color: #ECEFF4">)</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">display</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">display</span><span style="color: #ECEFF4">()</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">Serial</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">println</span><span style="color: #ECEFF4">(</span><span style="color: #88C0D0">F</span><span style="color: #ECEFF4">(</span><span style="color: #ECEFF4">"</span><span style="color: #A3BE8C">STARTED</span><span style="color: #ECEFF4">"</span><span style="color: #ECEFF4">))</span><span style="color: #81A1C1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D8DEE9FF">    </span><span style="color: #D8DEE9">controller</span><span style="color: #ECEFF4">.</span><span style="color: #88C0D0">handler_ota</span><span style="color: #ECEFF4">()</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #616E88">    // server.handleClient();</span></span>
<span class="line"><span style="color: #ECEFF4">}</span></span></code></pre>
<p>We delay our looping by at least 1000ms. After that, we read the temperature and humidity
then store them in <code>float temperature</code> and <code>float humidity</code>. We will then write out our values
in OLED.</p>
<h2 id="constant-header">Constant header</h2>
<pre is:raw="" class="astro-code nord" style="background-color: #2e3440ff; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0"><code><span class="line"><span style="color: #5E81AC; font-weight: bold">#</span><span style="color: #81A1C1">include</span><span style="color: #5E81AC"> </span><span style="color: #ECEFF4">&#x3C;</span><span style="color: #A3BE8C">Arduino.h</span><span style="color: #ECEFF4">></span></span>
<span class="line"><span style="color: #616E88">// #include &#x3C;BH1750.h></span></span>
<span class="line"><span style="color: #5E81AC; font-weight: bold">#</span><span style="color: #81A1C1">include</span><span style="color: #5E81AC"> </span><span style="color: #ECEFF4">&#x3C;</span><span style="color: #A3BE8C">DHT_U.h</span><span style="color: #ECEFF4">></span></span>
<span class="line"><span style="color: #616E88">// #include &#x3C;WebServer.h></span></span>
<span class="line"><span style="color: #5E81AC; font-weight: bold">#</span><span style="color: #81A1C1">include</span><span style="color: #5E81AC"> </span><span style="color: #ECEFF4">&#x3C;</span><span style="color: #A3BE8C">Adafruit_GFX.h</span><span style="color: #ECEFF4">></span></span>
<span class="line"><span style="color: #5E81AC; font-weight: bold">#</span><span style="color: #81A1C1">include</span><span style="color: #5E81AC"> </span><span style="color: #ECEFF4">&#x3C;</span><span style="color: #A3BE8C">Adafruit_SSD1306.h</span><span style="color: #ECEFF4">></span></span>
<span class="line"><span style="color: #5E81AC; font-weight: bold">#</span><span style="color: #81A1C1">include</span><span style="color: #5E81AC"> </span><span style="color: #ECEFF4">&#x3C;</span><span style="color: #A3BE8C">Wire.h</span><span style="color: #ECEFF4">></span></span>
<span class="line"></span>
<span class="line"><span style="color: #5E81AC; font-weight: bold">#</span><span style="color: #81A1C1">define</span><span style="color: #5E81AC"> </span><span style="color: #88C0D0">DEBUG</span></span>
<span class="line"></span>
<span class="line"><span style="color: #5E81AC; font-weight: bold">#ifdef</span><span style="color: #5E81AC"> </span><span style="color: #88C0D0">DEBUG</span></span>
<span class="line"><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">char</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">*</span><span style="color: #D8DEE9FF">SSID </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">""</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">char</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">*</span><span style="color: #D8DEE9FF">PASSWORD </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">""</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #5E81AC; font-weight: bold">#</span><span style="color: #81A1C1">else</span></span>
<span class="line"><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">char</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">*</span><span style="color: #D8DEE9FF">SSID </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">""</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">char</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">*</span><span style="color: #D8DEE9FF">PASSWORD </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #ECEFF4">""</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #5E81AC; font-weight: bold">#</span><span style="color: #81A1C1">endif</span></span>
<span class="line"><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> byte DHTPIN </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">4</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> byte DHTTYPE </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> DHT11</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> byte BH1750ADDR </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">0x</span><span style="color: #B48EAD">23</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">int</span><span style="color: #D8DEE9FF"> PORT </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">9105</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">int</span><span style="color: #D8DEE9FF"> SCREEN_WIDTH </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">128</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">int</span><span style="color: #D8DEE9FF"> SCREEN_HEIGHT </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #B48EAD">64</span><span style="color: #81A1C1">;</span></span>
<span class="line"><span style="color: #81A1C1">const</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">int</span><span style="color: #D8DEE9FF"> OLED_RESET </span><span style="color: #81A1C1">=</span><span style="color: #D8DEE9FF"> </span><span style="color: #81A1C1">-</span><span style="color: #B48EAD">1</span><span style="color: #81A1C1">;</span></span></code></pre>
<p>Here is a place your store your constant.</p> </div> </a> </div> </body></html>