/*! For license information please see 2.ec143a4c.chunk.js.LICENSE */
(this.webpackJsonpdigitalcv=this.webpackJsonpdigitalcv||[]).push([[2],[function(e,t,n){"use strict";e.exports=n(23)},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}var o=n(1);function a(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?Object(o.a)(e):t}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return h})),n.d(t,"__exportStar",(function(){return f})),n.d(t,"__values",(function(){return d})),n.d(t,"__read",(function(){return p})),n.d(t,"__spread",(function(){return m})),n.d(t,"__spreadArrays",(function(){return y})),n.d(t,"__await",(function(){return g})),n.d(t,"__asyncGenerator",(function(){return v})),n.d(t,"__asyncDelegator",(function(){return b})),n.d(t,"__asyncValues",(function(){return w})),n.d(t,"__makeTemplateObject",(function(){return T})),n.d(t,"__importStar",(function(){return E})),n.d(t,"__importDefault",(function(){return S}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function d(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof g?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:g(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=d(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function T(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}}(),e.exports=n(24)},function(e,t,n){e.exports=n(28)},function(e,t,n){"use strict";var r,i=(r=n(12))&&"object"===typeof r&&"default"in r?r.default:r;i.registerVersion("firebase","7.6.1","app"),e.exports=i},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,s,u=a(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=n(7),a=n(13),s=n(29),u=n(30),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),l=new a.ErrorFactory("app","Firebase",c),h="@firebase/app",f="0.5.0",d="[DEFAULT]",p=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),m=new u.Logger("@firebase/app"),y=function(){function e(e,t,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(e),this.container=new s.ComponentContainer(t.name),this._addComponent(new s.Component("app",(function(){return u}),"PUBLIC"));try{for(var c=o.__values(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next()){var h=l.value;this._addComponent(h)}}catch(f){r={error:f}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t=d),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=d),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){m.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();y.prototype.name&&y.prototype.options||y.prototype.delete||console.log("dc");var g="7.6.0";var v=function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!==typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=d);var s=o.name;if("string"!==typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(a.contains(t,s))throw l.create("duplicate-app",{appName:s});var u=new e(n,o,r);return t[s]=u,u},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=p[e])&&void 0!==r?r:e;n&&(i+="-"+n);var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var c=['Unable to register library "'+i+'" with version "'+t+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&c.push("and"),a&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void m.warn(c.join(" "))}u(new s.Component(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},apps:null,SDK_VERSION:g,INTERNAL:{registerComponent:u,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){if("serverAuth"===t)return null;return t}}};function i(e){if(e=e||d,!a.contains(t,e))throw l.create("no-app",{appName:e});return t[e]}function u(s){var u,c,h=s.name;if(n.has(h))return m.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===s.type?r[h]:null;if(n.set(h,s),"PUBLIC"===s.type){var f=function(e){if(void 0===e&&(e=i()),"function"!==typeof e[h])throw l.create("invalid-app-argument",{appName:h});return e[h]()};void 0!==s.serviceProps&&a.deepExtend(f,s.serviceProps),r[h]=f,e.prototype[h]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,h);return n.apply(this,s.multipleInstances?e:[])}}try{for(var d=o.__values(Object.keys(t)),p=d.next();!p.done;p=d.next()){var y=p.value;t[y]._addComponent(s)}}catch(g){u={error:g}}finally{try{p&&!p.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}return"PUBLIC"===s.type?r[h]:null}return(r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r)}(y);return t.INTERNAL=o.__assign(o.__assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){a.deepExtend(t,e)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),t}(),b=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t,n=e.getComponent();return"VERSION"===(null===(t=n)||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if(a.isBrowser()&&void 0!==self.firebase){m.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var w=self.firebase.SDK_VERSION;w&&w.indexOf("LITE")>=0&&m.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var T=v.initializeApp;v.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.isNode()&&m.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),T.apply(void 0,e)};var E=v;!function(e,t){e.INTERNAL.registerComponent(new s.Component("platform-logger",(function(e){return new b(e)}),"PRIVATE")),e.registerVersion(h,f,t),e.registerVersion("fire-js","")}(E),t.default=E,t.firebase=E},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},c=function(e){try{return u.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=l(e[n],t[n]));return e}var h=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function f(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}var d="FirebaseError",p=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name=d,Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,m.prototype.create),i}return r.__extends(t,e),t}(Error),m=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?y(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new p(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},e}();function y(e,t){return e.replace(g,(function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"}))}var g=/\{\$([^}]+)}/g;function v(e){return JSON.parse(e)}var b=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=v(c(o[0])||""),n=v(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:t,claims:n,data:r,signature:i}};var w=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();var T=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"===typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=E),void 0===r.error&&(r.error=E),void 0===r.complete&&(r.complete=E);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function E(){}function S(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}t.CONSTANTS=i,t.Deferred=h,t.ErrorFactory=m,t.FirebaseError=p,t.Sha1=w,t.assert=o,t.assertionError=a,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},t.base64=u,t.base64Decode=c,t.base64Encode=function(e){var t=s(e);return u.encodeByteArray(t,!0)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new T(e,t);return n.subscribe.bind(n)},t.decode=b,t.deepCopy=function(e){return l(void 0,e)},t.deepExtend=l,t.errorPrefix=S,t.getUA=f,t.isAdmin=function(e){var t=b(e).claims;return"object"===typeof t&&!0===t.admin},t.isBrowser=function(){return"object"===typeof self&&self.self===self},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isMobileCordova=function(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},t.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return!1}},t.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},t.isReactNative=function(){return"object"===typeof navigator&&"ReactNative"===navigator.product},t.isValidFormat=function(e){var t=b(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=b(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"===typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},t.issuedAtTime=function(e){var t=b(e).claims;return"object"===typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=v,t.map=function(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r},t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(S(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(S(e,t,r)+"must be a valid context object.")},t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!==typeof n)throw new Error(S(e,t,r)+"must be a valid firebase namespace.")}}).call(this,n(14))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},,,,,,,,,function(e,t,n){"use strict";var r=n(11),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113;i&&Symbol.for("react.suspense_list");var p=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116;i&&Symbol.for("react.fundamental"),i&&Symbol.for("react.responder"),i&&Symbol.for("react.scope");var y="function"===typeof Symbol&&Symbol.iterator;function g(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function w(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}function T(){}function E(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(g(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},T.prototype=w.prototype;var S=E.prototype=new T;S.constructor=E,r(S,w.prototype),S.isPureReactComponent=!0;var C={current:null},I={current:null},k=Object.prototype.hasOwnProperty,D={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,n){var r,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,r)&&!D.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:I.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var A=/\/+/g,x=[];function P(e,t,n,r){if(x.length){var i=x.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function O(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>x.length&&x.push(e)}function R(e,t,n){return null==e?0:function e(t,n,r,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case o:case a:u=!0}}if(u)return r(i,t,""===n?"."+M(t,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=n+M(s=t[c],c);u+=e(s,l,r,i)}else if(null===t||"object"!==typeof t?l=null:l="function"===typeof(l=y&&t[y]||t["@@iterator"])?l:null,"function"===typeof l)for(t=l.call(t),c=0;!(s=t.next()).done;)u+=e(s=s.value,l=n+M(s,c++),r,i);else if("object"===s)throw r=""+t,Error(g(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return u}(e,"",t,n)}function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function L(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?V(e,r,n,(function(e){return e})):null!=e&&(_(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(A,"$&/")+"/")+n)),r.push(e))}function V(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(A,"$&/")+"/"),R(e,F,t=P(t,o,r,i)),O(t)}function U(){var e=C.current;if(null===e)throw Error(g(321));return e}var B={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return V(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;R(e,L,t=P(null,null,t,n)),O(t)},count:function(e){return R(e,(function(){return null}),null)},toArray:function(e){var t=[];return V(e,t,null,(function(e){return e})),t},only:function(e){if(!_(e))throw Error(g(143));return e}},createRef:function(){return{current:null}},Component:w,PureComponent:E,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:f,render:e}},lazy:function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return U().useCallback(e,t)},useContext:function(e,t){return U().useContext(e,t)},useEffect:function(e,t){return U().useEffect(e,t)},useImperativeHandle:function(e,t,n){return U().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return U().useLayoutEffect(e,t)},useMemo:function(e,t){return U().useMemo(e,t)},useReducer:function(e,t,n){return U().useReducer(e,t,n)},useRef:function(e){return U().useRef(e)},useState:function(e){return U().useState(e)},Fragment:s,Profiler:c,StrictMode:u,Suspense:d,createElement:N,cloneElement:function(e,t,n){if(null===e||void 0===e)throw Error(g(267,e));var i=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=I.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)k.call(t,l)&&!D.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}return{$$typeof:o,type:e.type,key:a,ref:s,props:i,_owner:u}},createFactory:function(e){var t=N.bind(null,e);return t.type=e,t},isValidElement:_,version:"16.12.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:C,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:I,IsSomeRendererActing:{current:!1},assign:r}},q={default:B},j=q&&B||q;e.exports=j.default||j},function(e,t,n){"use strict";var r=n(0),i=n(11),o=n(25);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=null,u={};function c(){if(s)for(var e in u){var t=u[e],n=s.indexOf(e);if(!(-1<n))throw Error(a(96,e));if(!h[n]){if(!t.extractEvents)throw Error(a(97,e));for(var r in h[n]=t,n=t.eventTypes){var i=void 0,o=n[r],c=t,d=r;if(f.hasOwnProperty(d))throw Error(a(99,d));f[d]=o;var p=o.phasedRegistrationNames;if(p){for(i in p)p.hasOwnProperty(i)&&l(p[i],c,d);i=!0}else o.registrationName?(l(o.registrationName,c,d),i=!0):i=!1;if(!i)throw Error(a(98,r,e))}}}}function l(e,t,n){if(d[e])throw Error(a(100,e));d[e]=t,p[e]=t.eventTypes[n].dependencies}var h=[],f={},d={},p={};function m(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var y=!1,g=null,v=!1,b=null,w={onError:function(e){y=!0,g=e}};function T(e,t,n,r,i,o,a,s,u){y=!1,g=null,m.apply(w,arguments)}var E=null,S=null,C=null;function I(e,t,n){var r=e.type||"unknown-event";e.currentTarget=C(n),function(e,t,n,r,i,o,s,u,c){if(T.apply(this,arguments),y){if(!y)throw Error(a(198));var l=g;y=!1,g=null,v||(v=!0,b=l)}}(r,t,void 0,e),e.currentTarget=null}function k(e,t){if(null==t)throw Error(a(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function D(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var N=null;function _(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)I(e,t[r],n[r]);else t&&I(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function A(e){if(null!==e&&(N=k(N,e)),e=N,N=null,e){if(D(e,_),N)throw Error(a(95));if(v)throw e=b,v=!1,b=null,e}}var x={injectEventPluginOrder:function(e){if(s)throw Error(a(101));s=Array.prototype.slice.call(e),c()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!u.hasOwnProperty(t)||u[t]!==r){if(u[t])throw Error(a(102,t));u[t]=r,n=!0}}n&&c()}};function P(e,t){var n=e.stateNode;if(!n)return null;var r=E(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var O=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;O.hasOwnProperty("ReactCurrentDispatcher")||(O.ReactCurrentDispatcher={current:null}),O.hasOwnProperty("ReactCurrentBatchConfig")||(O.ReactCurrentBatchConfig={suspense:null});var R=/^(.*)[\\\/]/,M="function"===typeof Symbol&&Symbol.for,L=M?Symbol.for("react.element"):60103,F=M?Symbol.for("react.portal"):60106,V=M?Symbol.for("react.fragment"):60107,U=M?Symbol.for("react.strict_mode"):60108,B=M?Symbol.for("react.profiler"):60114,q=M?Symbol.for("react.provider"):60109,j=M?Symbol.for("react.context"):60110,z=M?Symbol.for("react.concurrent_mode"):60111,W=M?Symbol.for("react.forward_ref"):60112,K=M?Symbol.for("react.suspense"):60113,Q=M?Symbol.for("react.suspense_list"):60120,G=M?Symbol.for("react.memo"):60115,H=M?Symbol.for("react.lazy"):60116;M&&Symbol.for("react.fundamental"),M&&Symbol.for("react.responder"),M&&Symbol.for("react.scope");var Y="function"===typeof Symbol&&Symbol.iterator;function X(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=Y&&e[Y]||e["@@iterator"])?e:null}function J(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case V:return"Fragment";case F:return"Portal";case B:return"Profiler";case U:return"StrictMode";case K:return"Suspense";case Q:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case j:return"Context.Consumer";case q:return"Context.Provider";case W:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case G:return J(e.type);case H:if(e=1===e._status?e._result:null)return J(e)}return null}function $(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=J(e.type);n=null,r&&(n=J(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(R,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}var Z=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),ee=null,te=null,ne=null;function re(e){if(e=S(e)){if("function"!==typeof ee)throw Error(a(280));var t=E(e.stateNode);ee(e.stateNode,e.type,t)}}function ie(e){te?ne?ne.push(e):ne=[e]:te=e}function oe(){if(te){var e=te,t=ne;if(ne=te=null,re(e),t)for(e=0;e<t.length;e++)re(t[e])}}function ae(e,t){return e(t)}function se(e,t,n,r){return e(t,n,r)}function ue(){}var ce=ae,le=!1,he=!1;function fe(){null===te&&null===ne||(ue(),oe())}new Map;var de=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pe=Object.prototype.hasOwnProperty,me={},ye={};function ge(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){ve[e]=new ge(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];ve[t]=new ge(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){ve[e]=new ge(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){ve[e]=new ge(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){ve[e]=new ge(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){ve[e]=new ge(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){ve[e]=new ge(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){ve[e]=new ge(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){ve[e]=new ge(e,5,!1,e.toLowerCase(),null,!1)}));var be=/[\-:]([a-z])/g;function we(e){return e[1].toUpperCase()}function Te(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Ee(e,t,n,r){var i=ve.hasOwnProperty(t)?ve[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!pe.call(ye,e)||!pe.call(me,e)&&(de.test(e)?ye[e]=!0:(me[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function Se(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ce(e){e._valueTracker||(e._valueTracker=function(e){var t=Se(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ie(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Se(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ke(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function De(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Te(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ne(e,t){null!=(t=t.checked)&&Ee(e,"checked",t,!1)}function _e(e,t){Ne(e,t);var n=Te(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?xe(e,t.type,n):t.hasOwnProperty("defaultValue")&&xe(e,t.type,Te(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ae(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function xe(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Pe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Te(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Me(e,t){var n=t.value;if(null==n){if(n=t.defaultValue,null!=(t=t.children)){if(null!=n)throw Error(a(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(a(93));t=t[0]}n=t}null==n&&(n="")}e._wrapperState={initialValue:Te(n)}}function Le(e,t){var n=Te(t.value),r=Te(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Fe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(be,we);ve[t]=new ge(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(be,we);ve[t]=new ge(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(be,we);ve[t]=new ge(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){ve[e]=new ge(e,1,!1,e.toLowerCase(),null,!1)})),ve.xlinkHref=new ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){ve[e]=new ge(e,1,!1,e.toLowerCase(),null,!0)}));var Ve={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Be(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var qe,je=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==Ve.svg||"innerHTML"in e)e.innerHTML=t;else{for((qe=qe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function ze(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function We(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ke={animationend:We("Animation","AnimationEnd"),animationiteration:We("Animation","AnimationIteration"),animationstart:We("Animation","AnimationStart"),transitionend:We("Transition","TransitionEnd")},Qe={},Ge={};function He(e){if(Qe[e])return Qe[e];if(!Ke[e])return e;var t,n=Ke[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ge)return Qe[e]=n[t];return e}Z&&(Ge=document.createElement("div").style,"AnimationEvent"in window||(delete Ke.animationend.animation,delete Ke.animationiteration.animation,delete Ke.animationstart.animation),"TransitionEvent"in window||delete Ke.transitionend.transition);var Ye=He("animationend"),Xe=He("animationiteration"),Je=He("animationstart"),$e=He("transitionend"),Ze="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(a(188))}function rt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return nt(i),e;if(o===r)return nt(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var it,ot,at,st=!1,ut=[],ct=null,lt=null,ht=null,ft=new Map,dt=new Map,pt=[],mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),yt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function gt(e,t,n,r){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:r}}function vt(e,t){switch(e){case"focus":case"blur":ct=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":ht=null;break;case"pointerover":case"pointerout":ft.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dt.delete(t.pointerId)}}function bt(e,t,n,r,i){return null===e||e.nativeEvent!==i?(e=gt(t,n,r,i),null!==t&&(null!==(t=dr(t))&&ot(t)),e):(e.eventSystemFlags|=r,e)}function wt(e){var t=fr(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){at(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Tt(e){if(null!==e.blockedOn)return!1;var t=xn(e.topLevelType,e.eventSystemFlags,e.nativeEvent);if(null!==t){var n=dr(t);return null!==n&&ot(n),e.blockedOn=t,!1}return!0}function Et(e,t,n){Tt(e)&&n.delete(t)}function St(){for(st=!1;0<ut.length;){var e=ut[0];if(null!==e.blockedOn){null!==(e=dr(e.blockedOn))&&it(e);break}var t=xn(e.topLevelType,e.eventSystemFlags,e.nativeEvent);null!==t?e.blockedOn=t:ut.shift()}null!==ct&&Tt(ct)&&(ct=null),null!==lt&&Tt(lt)&&(lt=null),null!==ht&&Tt(ht)&&(ht=null),ft.forEach(Et),dt.forEach(Et)}function Ct(e,t){e.blockedOn===t&&(e.blockedOn=null,st||(st=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,St)))}function It(e){function t(t){return Ct(t,e)}if(0<ut.length){Ct(ut[0],e);for(var n=1;n<ut.length;n++){var r=ut[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ct&&Ct(ct,e),null!==lt&&Ct(lt,e),null!==ht&&Ct(ht,e),ft.forEach(t),dt.forEach(t),n=0;n<pt.length;n++)(r=pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<pt.length&&null===(n=pt[0]).blockedOn;)wt(n),null===n.blockedOn&&pt.shift()}function kt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Dt(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Nt(e,t,n){(t=P(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=k(n._dispatchListeners,t),n._dispatchInstances=k(n._dispatchInstances,e))}function _t(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Dt(t);for(t=n.length;0<t--;)Nt(n[t],"captured",e);for(t=0;t<n.length;t++)Nt(n[t],"bubbled",e)}}function At(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=P(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=k(n._dispatchListeners,t),n._dispatchInstances=k(n._dispatchInstances,e))}function xt(e){e&&e.dispatchConfig.registrationName&&At(e._targetInst,null,e)}function Pt(e){D(e,_t)}function Ot(){return!0}function Rt(){return!1}function Mt(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Ot:Rt,this.isPropagationStopped=Rt,this}function Lt(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Ft(e){if(!(e instanceof this))throw Error(a(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Vt(e){e.eventPool=[],e.getPooled=Lt,e.release=Ft}i(Mt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Ot)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Ot)},persist:function(){this.isPersistent=Ot},isPersistent:Rt,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Rt,this._dispatchInstances=this._dispatchListeners=null}}),Mt.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Mt.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Vt(n),n},Vt(Mt);var Ut=Mt.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Bt=Mt.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qt=Mt.extend({view:null,detail:null}),jt=qt.extend({relatedTarget:null});function zt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Wt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Qt[e])&&!!t[e]}function Ht(){return Gt}for(var Yt=qt.extend({key:function(e){if(e.key){var t=Wt[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=zt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Kt[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ht,charCode:function(e){return"keypress"===e.type?zt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?zt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Xt=0,Jt=0,$t=!1,Zt=!1,en=qt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ht,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Xt;return Xt=e.screenX,$t?"mousemove"===e.type?e.screenX-t:0:($t=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Jt;return Jt=e.screenY,Zt?"mousemove"===e.type?e.screenY-t:0:(Zt=!0,0)}}),tn=en.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),nn=en.extend({dataTransfer:null}),rn=qt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ht}),on=Mt.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),an=en.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),sn=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Ye,"animationEnd",2],[Xe,"animationIteration",2],[Je,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[$e,"transitionEnd",2],["waiting","waiting",2]],un={},cn={},ln=0;ln<sn.length;ln++){var hn=sn[ln],fn=hn[0],dn=hn[1],pn=hn[2],mn="on"+(dn[0].toUpperCase()+dn.slice(1)),yn={phasedRegistrationNames:{bubbled:mn,captured:mn+"Capture"},dependencies:[fn],eventPriority:pn};un[dn]=yn,cn[fn]=yn}var gn={eventTypes:un,getEventPriority:function(e){return void 0!==(e=cn[e])?e.eventPriority:2},extractEvents:function(e,t,n,r){var i=cn[e];if(!i)return null;switch(e){case"keypress":if(0===zt(n))return null;case"keydown":case"keyup":e=Yt;break;case"blur":case"focus":e=jt;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=en;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=nn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=rn;break;case Ye:case Xe:case Je:e=Ut;break;case $e:e=on;break;case"scroll":e=qt;break;case"wheel":e=an;break;case"copy":case"cut":case"paste":e=Bt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=tn;break;default:e=Mt}return Pt(t=e.getPooled(i,t,n,r)),t}},vn=o.unstable_UserBlockingPriority,bn=o.unstable_runWithPriority,wn=gn.getEventPriority,Tn=10,En=[];function Sn(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=fr(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=kt(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,a=e.eventSystemFlags,s=null,u=0;u<h.length;u++){var c=h[u];c&&(c=c.extractEvents(r,t,o,i,a))&&(s=k(s,c))}A(s)}}var Cn=!0;function In(e,t){kn(t,e,!1)}function kn(e,t,n){switch(wn(t)){case 0:var r=Dn.bind(null,t,1);break;case 1:r=Nn.bind(null,t,1);break;default:r=An.bind(null,t,1)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Dn(e,t,n){le||ue();var r=An,i=le;le=!0;try{se(r,e,t,n)}finally{(le=i)||fe()}}function Nn(e,t,n){bn(vn,An.bind(null,e,t,n))}function _n(e,t,n,r){if(En.length){var i=En.pop();i.topLevelType=e,i.eventSystemFlags=t,i.nativeEvent=n,i.targetInst=r,e=i}else e={topLevelType:e,eventSystemFlags:t,nativeEvent:n,targetInst:r,ancestors:[]};try{if(t=Sn,n=e,he)t(n,void 0);else{he=!0;try{ce(t,n,void 0)}finally{he=!1,fe()}}}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,En.length<Tn&&En.push(e)}}function An(e,t,n){if(Cn)if(0<ut.length&&-1<mt.indexOf(e))e=gt(null,e,t,n),ut.push(e);else{var r=xn(e,t,n);null===r?vt(e,n):-1<mt.indexOf(e)?(e=gt(r,e,t,n),ut.push(e)):function(e,t,n,r){switch(t){case"focus":return ct=bt(ct,e,t,n,r),!0;case"dragenter":return lt=bt(lt,e,t,n,r),!0;case"mouseover":return ht=bt(ht,e,t,n,r),!0;case"pointerover":var i=r.pointerId;return ft.set(i,bt(ft.get(i)||null,e,t,n,r)),!0;case"gotpointercapture":return i=r.pointerId,dt.set(i,bt(dt.get(i)||null,e,t,n,r)),!0}return!1}(r,e,t,n)||(vt(e,n),_n(e,t,n,null))}}function xn(e,t,n){var r=kt(n);if(null!==(r=fr(r))){var i=et(r);if(null===i)r=null;else{var o=i.tag;if(13===o){if(null!==(r=tt(i)))return r;r=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return _n(e,t,n,r),null}function Pn(e){if(!Z)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var On=new("function"===typeof WeakMap?WeakMap:Map);function Rn(e){var t=On.get(e);return void 0===t&&(t=new Set,On.set(e,t)),t}function Mn(e,t,n){if(!n.has(e)){switch(e){case"scroll":kn(t,"scroll",!0);break;case"focus":case"blur":kn(t,"focus",!0),kn(t,"blur",!0),n.add("blur"),n.add("focus");break;case"cancel":case"close":Pn(e)&&kn(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Ze.indexOf(e)&&In(e,t)}n.add(e)}}var Ln={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fn=["Webkit","ms","Moz","O"];function Vn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||Ln.hasOwnProperty(e)&&Ln[e]?(""+t).trim():t+"px"}function Un(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Vn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Ln).forEach((function(e){Fn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ln[t]=Ln[e]}))}));var Bn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qn(e,t){if(t){if(Bn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if(!("object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62,""))}}function jn(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function zn(e,t){var n=Rn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=p[t];for(var r=0;r<t.length;r++)Mn(t[r],e,n)}function Wn(){}function Kn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Qn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gn(e,t){var n,r=Qn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Qn(r)}}function Hn(){for(var e=window,t=Kn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Kn((e=t.contentWindow).document)}return t}function Yn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Xn="$",Jn="/$",$n="$?",Zn="$!",er=null,tr=null;function nr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function rr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,or="function"===typeof clearTimeout?clearTimeout:void 0;function ar(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function sr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===Xn||n===Zn||n===$n){if(0===t)return e;t--}else n===Jn&&t++}e=e.previousSibling}return null}var ur=Math.random().toString(36).slice(2),cr="__reactInternalInstance$"+ur,lr="__reactEventHandlers$"+ur,hr="__reactContainere$"+ur;function fr(e){var t=e[cr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hr]||n[cr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=sr(e);null!==e;){if(n=e[cr])return n;e=sr(e)}return t}n=(e=n).parentNode}return null}function dr(e){return!(e=e[cr]||e[hr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function pr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function mr(e){return e[lr]||null}var yr=null,gr=null,vr=null;function br(){if(vr)return vr;var e,t,n=gr,r=n.length,i="value"in yr?yr.value:yr.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return vr=i.slice(e,1<t?1-t:void 0)}var wr=Mt.extend({data:null}),Tr=Mt.extend({data:null}),Er=[9,13,27,32],Sr=Z&&"CompositionEvent"in window,Cr=null;Z&&"documentMode"in document&&(Cr=document.documentMode);var Ir=Z&&"TextEvent"in window&&!Cr,kr=Z&&(!Sr||Cr&&8<Cr&&11>=Cr),Dr=String.fromCharCode(32),Nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},_r=!1;function Ar(e,t){switch(e){case"keyup":return-1!==Er.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function xr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Pr=!1;var Or={eventTypes:Nr,extractEvents:function(e,t,n,r){var i;if(Sr)e:{switch(e){case"compositionstart":var o=Nr.compositionStart;break e;case"compositionend":o=Nr.compositionEnd;break e;case"compositionupdate":o=Nr.compositionUpdate;break e}o=void 0}else Pr?Ar(e,n)&&(o=Nr.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=Nr.compositionStart);return o?(kr&&"ko"!==n.locale&&(Pr||o!==Nr.compositionStart?o===Nr.compositionEnd&&Pr&&(i=br()):(gr="value"in(yr=r)?yr.value:yr.textContent,Pr=!0)),o=wr.getPooled(o,t,n,r),i?o.data=i:null!==(i=xr(n))&&(o.data=i),Pt(o),i=o):i=null,(e=Ir?function(e,t){switch(e){case"compositionend":return xr(t);case"keypress":return 32!==t.which?null:(_r=!0,Dr);case"textInput":return(e=t.data)===Dr&&_r?null:e;default:return null}}(e,n):function(e,t){if(Pr)return"compositionend"===e||!Sr&&Ar(e,t)?(e=br(),vr=gr=yr=null,Pr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kr&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=Tr.getPooled(Nr.beforeInput,t,n,r)).data=e,Pt(t)):t=null,null===i?t:null===t?i:[i,t]}},Rr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Rr[e.type]:"textarea"===t}var Lr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Fr(e,t,n){return(e=Mt.getPooled(Lr.change,e,t,n)).type="change",ie(n),Pt(e),e}var Vr=null,Ur=null;function Br(e){A(e)}function qr(e){if(Ie(pr(e)))return e}function jr(e,t){if("change"===e)return t}var zr=!1;function Wr(){Vr&&(Vr.detachEvent("onpropertychange",Kr),Ur=Vr=null)}function Kr(e){if("value"===e.propertyName&&qr(Ur))if(e=Fr(Ur,e,kt(e)),le)A(e);else{le=!0;try{ae(Br,e)}finally{le=!1,fe()}}}function Qr(e,t,n){"focus"===e?(Wr(),Ur=n,(Vr=t).attachEvent("onpropertychange",Kr)):"blur"===e&&Wr()}function Gr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qr(Ur)}function Hr(e,t){if("click"===e)return qr(t)}function Yr(e,t){if("input"===e||"change"===e)return qr(t)}Z&&(zr=Pn("input")&&(!document.documentMode||9<document.documentMode));var Xr,Jr={eventTypes:Lr,_isInputEventSupported:zr,extractEvents:function(e,t,n,r){var i=t?pr(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=jr;else if(Mr(i))if(zr)a=Yr;else{a=Gr;var s=Qr}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Hr);if(a&&(a=a(e,t)))return Fr(a,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&xe(i,"number",i.value)}},$r={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Zr={eventTypes:$r,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,a?(a=t,null!==(t=(t=n.relatedTarget||n.toElement)?fr(t):null)&&(t!==(o=et(t))||5!==t.tag&&6!==t.tag)&&(t=null)):a=null,a===t)return null;if("mouseout"===e||"mouseover"===e)var s=en,u=$r.mouseLeave,c=$r.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=tn,u=$r.pointerLeave,c=$r.pointerEnter,l="pointer");if(e=null==a?i:pr(a),i=null==t?i:pr(t),(u=s.getPooled(u,a,n,r)).type=l+"leave",u.target=e,u.relatedTarget=i,(r=s.getPooled(c,t,n,r)).type=l+"enter",r.target=i,r.relatedTarget=e,l=t,(s=a)&&l)e:{for(e=l,a=0,t=c=s;t;t=Dt(t))a++;for(t=0,i=e;i;i=Dt(i))t++;for(;0<a-t;)c=Dt(c),a--;for(;0<t-a;)e=Dt(e),t--;for(;a--;){if(c===e||c===e.alternate)break e;c=Dt(c),e=Dt(e)}c=null}else c=null;for(e=c,c=[];s&&s!==e&&(null===(a=s.alternate)||a!==e);)c.push(s),s=Dt(s);for(s=[];l&&l!==e&&(null===(a=l.alternate)||a!==e);)s.push(l),l=Dt(l);for(l=0;l<c.length;l++)At(c[l],"bubbled",u);for(l=s.length;0<l--;)At(s[l],"captured",r);return n===Xr?(Xr=null,[u]):(Xr=n,[u,r])}};var ei="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ti=Object.prototype.hasOwnProperty;function ni(e,t){if(ei(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ti.call(t,n[r])||!ei(e[n[r]],t[n[r]]))return!1;return!0}var ri=Z&&"documentMode"in document&&11>=document.documentMode,ii={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},oi=null,ai=null,si=null,ui=!1;function ci(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return ui||null==oi||oi!==Kn(n)?null:("selectionStart"in(n=oi)&&Yn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},si&&ni(si,n)?null:(si=n,(e=Mt.getPooled(ii.select,ai,e,t)).type="select",e.target=oi,Pt(e),e))}var li={eventTypes:ii,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=Rn(o),i=p.onSelect;for(var a=0;a<i.length;a++)if(!o.has(i[a])){o=!1;break e}o=!0}i=!o}if(i)return null;switch(o=t?pr(t):window,e){case"focus":(Mr(o)||"true"===o.contentEditable)&&(oi=o,ai=t,si=null);break;case"blur":si=ai=oi=null;break;case"mousedown":ui=!0;break;case"contextmenu":case"mouseup":case"dragend":return ui=!1,ci(n,r);case"selectionchange":if(ri)break;case"keydown":case"keyup":return ci(n,r)}return null}};x.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),E=mr,S=dr,C=pr,x.injectEventPluginsByName({SimpleEventPlugin:gn,EnterLeaveEventPlugin:Zr,ChangeEventPlugin:Jr,SelectEventPlugin:li,BeforeInputEventPlugin:Or}),new Set;var hi=[],fi=-1;function di(e){0>fi||(e.current=hi[fi],hi[fi]=null,fi--)}function pi(e,t){fi++,hi[fi]=e.current,e.current=t}var mi={},yi={current:mi},gi={current:!1},vi=mi;function bi(e,t){var n=e.type.contextTypes;if(!n)return mi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function wi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ti(e){di(gi),di(yi)}function Ei(e){di(gi),di(yi)}function Si(e,t,n){if(yi.current!==mi)throw Error(a(168));pi(yi,t),pi(gi,n)}function Ci(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,J(t)||"Unknown",o));return i({},n,{},r)}function Ii(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||mi,vi=yi.current,pi(yi,t),pi(gi,gi.current),!0}function ki(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(t=Ci(e,t,vi),r.__reactInternalMemoizedMergedChildContext=t,di(gi),di(yi),pi(yi,t)):di(gi),pi(gi,n)}var Di=o.unstable_runWithPriority,Ni=o.unstable_scheduleCallback,_i=o.unstable_cancelCallback,Ai=o.unstable_shouldYield,xi=o.unstable_requestPaint,Pi=o.unstable_now,Oi=o.unstable_getCurrentPriorityLevel,Ri=o.unstable_ImmediatePriority,Mi=o.unstable_UserBlockingPriority,Li=o.unstable_NormalPriority,Fi=o.unstable_LowPriority,Vi=o.unstable_IdlePriority,Ui={},Bi=void 0!==xi?xi:function(){},qi=null,ji=null,zi=!1,Wi=Pi(),Ki=1e4>Wi?Pi:function(){return Pi()-Wi};function Qi(){switch(Oi()){case Ri:return 99;case Mi:return 98;case Li:return 97;case Fi:return 96;case Vi:return 95;default:throw Error(a(332))}}function Gi(e){switch(e){case 99:return Ri;case 98:return Mi;case 97:return Li;case 96:return Fi;case 95:return Vi;default:throw Error(a(332))}}function Hi(e,t){return e=Gi(e),Di(e,t)}function Yi(e,t,n){return e=Gi(e),Ni(e,t,n)}function Xi(e){return null===qi?(qi=[e],ji=Ni(Ri,$i)):qi.push(e),Ui}function Ji(){if(null!==ji){var e=ji;ji=null,_i(e)}$i()}function $i(){if(!zi&&null!==qi){zi=!0;var e=0;try{var t=qi;Hi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),qi=null}catch(n){throw null!==qi&&(qi=qi.slice(e+1)),Ni(Ri,Ji),n}finally{zi=!1}}}var Zi=3;function eo(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function to(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var no={current:null},ro=null,io=null,oo=null;function ao(){oo=io=ro=null}function so(e,t){var n=e.type._context;pi(no,n._currentValue),n._currentValue=t}function uo(e){var t=no.current;di(no),e.type._context._currentValue=t}function co(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function lo(e,t){ro=e,oo=io=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ka=!0),e.firstContext=null)}function ho(e,t){if(oo!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(oo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===io){if(null===ro)throw Error(a(308));io=t,ro.dependencies={expirationTime:0,firstContext:t,responders:null}}else io=io.next=t;return e._currentValue}var fo=!1;function po(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function mo(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function yo(e,t){return{expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function go(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function vo(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=po(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=po(e.memoizedState),i=n.updateQueue=po(n.memoizedState)):r=e.updateQueue=mo(i):null===i&&(i=n.updateQueue=mo(r));null===i||r===i?go(r,t):null===r.lastUpdate||null===i.lastUpdate?(go(r,t),go(i,t)):(go(r,t),i.lastUpdate=t)}function bo(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=po(e.memoizedState):wo(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function wo(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=mo(t)),t}function To(e,t,n,r,o,a){switch(n.tag){case 1:return"function"===typeof(e=n.payload)?e.call(a,r,o):e;case 3:e.effectTag=-4097&e.effectTag|64;case 0:if(null===(o="function"===typeof(e=n.payload)?e.call(a,r,o):e)||void 0===o)break;return i({},r,o);case 2:fo=!0}return r}function Eo(e,t,n,r,i){fo=!1;for(var o=(t=wo(e,t)).baseState,a=null,s=0,u=t.firstUpdate,c=o;null!==u;){var l=u.expirationTime;l<i?(null===a&&(a=u,o=c),s<l&&(s=l)):(Du(l,u.suspenseConfig),c=To(e,0,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=u:(t.lastEffect.nextEffect=u,t.lastEffect=u))),u=u.next}for(l=null,u=t.firstCapturedUpdate;null!==u;){var h=u.expirationTime;h<i?(null===l&&(l=u,null===a&&(o=c)),s<h&&(s=h)):(c=To(e,0,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=u:(t.lastCapturedEffect.nextEffect=u,t.lastCapturedEffect=u))),u=u.next}null===a&&(t.lastUpdate=null),null===l?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===l&&(o=c),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=l,Nu(s),e.expirationTime=s,e.memoizedState=c}function So(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),Co(t.firstEffect,n),t.firstEffect=t.lastEffect=null,Co(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function Co(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;if("function"!==typeof n)throw Error(a(191,n));n.call(r)}e=e.nextEffect}}var Io=O.ReactCurrentBatchConfig,ko=(new r.Component).refs;function Do(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var No={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=pu(),i=Io.suspense;(i=yo(r=mu(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),vo(e,i),yu(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=pu(),i=Io.suspense;(i=yo(r=mu(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),vo(e,i),yu(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=pu(),r=Io.suspense;(r=yo(n=mu(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),vo(e,r),yu(e,n)}};function _o(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ni(n,r)||!ni(i,o))}function Ao(e,t,n){var r=!1,i=mi,o=t.contextType;return"object"===typeof o&&null!==o?o=ho(o):(i=wi(t)?vi:yi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?bi(e,i):mi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=No,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function xo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&No.enqueueReplaceState(t,t.state,null)}function Po(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ko;var o=t.contextType;"object"===typeof o&&null!==o?i.context=ho(o):(o=wi(t)?vi:yi.current,i.context=bi(e,o)),null!==(o=e.updateQueue)&&(Eo(e,o,n,i,r),i.state=e.memoizedState),"function"===typeof(o=t.getDerivedStateFromProps)&&(Do(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&No.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(Eo(e,o,n,i,r),i.state=e.memoizedState)),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var Oo=Array.isArray;function Ro(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===ko&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Mo(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Lo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Hu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ju(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Ro(e,t,n),r.return=e,r):((r=Yu(n.type,n.key,n.props,null,e.mode,r)).ref=Ro(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$u(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Xu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Ju(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case L:return(n=Yu(t.type,t.key,t.props,null,e.mode,n)).ref=Ro(e,null,t),n.return=e,n;case F:return(t=$u(t,e.mode,n)).return=e,t}if(Oo(t)||X(t))return(t=Xu(t,e.mode,n,null)).return=e,t;Mo(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case L:return n.key===i?n.type===V?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case F:return n.key===i?l(e,t,n,r):null}if(Oo(n)||X(n))return null!==i?null:h(e,t,n,r,null);Mo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case L:return e=e.get(null===r.key?n:r.key)||null,r.type===V?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case F:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Oo(r)||X(r))return h(t,e=e.get(n)||null,r,i,null);Mo(t,r)}return null}function m(i,a,s,u){for(var c=null,l=null,h=a,m=a=0,y=null;null!==h&&m<s.length;m++){h.index>m?(y=h,h=null):y=h.sibling;var g=d(i,h,s[m],u);if(null===g){null===h&&(h=y);break}e&&h&&null===g.alternate&&t(i,h),a=o(g,a,m),null===l?c=g:l.sibling=g,l=g,h=y}if(m===s.length)return n(i,h),c;if(null===h){for(;m<s.length;m++)null!==(h=f(i,s[m],u))&&(a=o(h,a,m),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);m<s.length;m++)null!==(y=p(h,i,m,s[m],u))&&(e&&null!==y.alternate&&h.delete(null===y.key?m:y.key),a=o(y,a,m),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),c}function y(i,s,u,c){var l=X(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,m=s,y=s=0,g=null,v=u.next();null!==m&&!v.done;y++,v=u.next()){m.index>y?(g=m,m=null):g=m.sibling;var b=d(i,m,v.value,c);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,y),null===h?l=b:h.sibling=b,h=b,m=g}if(v.done)return n(i,m),l;if(null===m){for(;!v.done;y++,v=u.next())null!==(v=f(i,v.value,c))&&(s=o(v,s,y),null===h?l=v:h.sibling=v,h=v);return l}for(m=r(i,m);!v.done;y++,v=u.next())null!==(v=p(m,i,y,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?y:v.key),s=o(v,s,y),null===h?l=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),l}return function(e,r,o,u){var c="object"===typeof o&&null!==o&&o.type===V&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case L:e:{for(l=o.key,c=r;null!==c;){if(c.key===l){if(7===c.tag?o.type===V:c.elementType===o.type){n(e,c.sibling),(r=i(c,o.type===V?o.props.children:o.props)).ref=Ro(e,c,o),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}o.type===V?((r=Xu(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=Yu(o.type,o.key,o.props,null,e.mode,u)).ref=Ro(e,r,o),u.return=e,e=u)}return s(e);case F:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=$u(o,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Ju(o,e.mode,u)).return=e,e=r),s(e);if(Oo(o))return m(e,r,o,u);if(X(o))return y(e,r,o,u);if(l&&Mo(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(a(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Fo=Lo(!0),Vo=Lo(!1),Uo={},Bo={current:Uo},qo={current:Uo},jo={current:Uo};function zo(e){if(e===Uo)throw Error(a(174));return e}function Wo(e,t){pi(jo,t),pi(qo,e),pi(Bo,Uo);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Be(null,"");break;default:t=Be(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}di(Bo),pi(Bo,t)}function Ko(e){di(Bo),di(qo),di(jo)}function Qo(e){zo(jo.current);var t=zo(Bo.current),n=Be(t,e.type);t!==n&&(pi(qo,e),pi(Bo,n))}function Go(e){qo.current===e&&(di(Bo),di(qo))}var Ho={current:0};function Yo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===$n||n.data===Zn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Xo(e,t){return{responder:e,props:t}}var Jo=O.ReactCurrentDispatcher,$o=O.ReactCurrentBatchConfig,Zo=0,ea=null,ta=null,na=null,ra=null,ia=null,oa=null,aa=0,sa=null,ua=0,ca=!1,la=null,ha=0;function fa(){throw Error(a(321))}function da(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ei(e[n],t[n]))return!1;return!0}function pa(e,t,n,r,i,o){if(Zo=o,ea=t,na=null!==e?e.memoizedState:null,Jo.current=null===na?Oa:Ra,t=n(r,i),ca){do{ca=!1,ha+=1,na=null!==e?e.memoizedState:null,oa=ra,sa=ia=ta=null,Jo.current=Ra,t=n(r,i)}while(ca);la=null,ha=0}if(Jo.current=Pa,(e=ea).memoizedState=ra,e.expirationTime=aa,e.updateQueue=sa,e.effectTag|=ua,e=null!==ta&&null!==ta.next,Zo=0,oa=ia=ra=na=ta=ea=null,aa=0,sa=null,ua=0,e)throw Error(a(300));return t}function ma(){Jo.current=Pa,Zo=0,oa=ia=ra=na=ta=ea=null,aa=0,sa=null,ua=0,ca=!1,la=null,ha=0}function ya(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===ia?ra=ia=e:ia=ia.next=e,ia}function ga(){if(null!==oa)oa=(ia=oa).next,na=null!==(ta=na)?ta.next:null;else{if(null===na)throw Error(a(310));var e={memoizedState:(ta=na).memoizedState,baseState:ta.baseState,queue:ta.queue,baseUpdate:ta.baseUpdate,next:null};ia=null===ia?ra=e:ia.next=e,na=ta.next}return ia}function va(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=ga(),n=t.queue;if(null===n)throw Error(a(311));if(n.lastRenderedReducer=e,0<ha){var r=n.dispatch;if(null!==la){var i=la.get(n);if(void 0!==i){la.delete(n);var o=t.memoizedState;do{o=e(o,i.action),i=i.next}while(null!==i);return ei(o,t.memoizedState)||(Ka=!0),t.memoizedState=o,t.baseUpdate===n.last&&(t.baseState=o),n.lastRenderedState=o,[o,r]}}return[t.memoizedState,r]}r=n.last;var s=t.baseUpdate;if(o=t.baseState,null!==s?(null!==r&&(r.next=null),r=s.next):r=null!==r?r.next:null,null!==r){var u=i=null,c=r,l=!1;do{var h=c.expirationTime;h<Zo?(l||(l=!0,u=s,i=o),h>aa&&Nu(aa=h)):(Du(h,c.suspenseConfig),o=c.eagerReducer===e?c.eagerState:e(o,c.action)),s=c,c=c.next}while(null!==c&&c!==r);l||(u=s,i=o),ei(o,t.memoizedState)||(Ka=!0),t.memoizedState=o,t.baseUpdate=u,t.baseState=i,n.lastRenderedState=o}return[t.memoizedState,n.dispatch]}function wa(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:va,lastRenderedState:e}).dispatch=xa.bind(null,ea,e),[t.memoizedState,e]}function Ta(e){return ba(va)}function Ea(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===sa?(sa={lastEffect:null}).lastEffect=e.next=e:null===(t=sa.lastEffect)?sa.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,sa.lastEffect=e),e}function Sa(e,t,n,r){var i=ya();ua|=e,i.memoizedState=Ea(t,n,void 0,void 0===r?null:r)}function Ca(e,t,n,r){var i=ga();r=void 0===r?null:r;var o=void 0;if(null!==ta){var a=ta.memoizedState;if(o=a.destroy,null!==r&&da(r,a.deps))return void Ea(0,n,o,r)}ua|=e,i.memoizedState=Ea(t,n,o,r)}function Ia(e,t){return Sa(516,192,e,t)}function ka(e,t){return Ca(516,192,e,t)}function Da(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Na(){}function _a(e,t){return ya().memoizedState=[e,void 0===t?null:t],e}function Aa(e,t){var n=ga();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&da(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xa(e,t,n){if(!(25>ha))throw Error(a(301));var r=e.alternate;if(e===ea||null!==r&&r===ea)if(ca=!0,e={expirationTime:Zo,suspenseConfig:null,action:n,eagerReducer:null,eagerState:null,next:null},null===la&&(la=new Map),void 0===(n=la.get(t)))la.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{var i=pu(),o=Io.suspense;o={expirationTime:i=mu(i,e,o),suspenseConfig:o,action:n,eagerReducer:null,eagerState:null,next:null};var s=t.last;if(null===s)o.next=o;else{var u=s.next;null!==u&&(o.next=u),s.next=o}if(t.last=o,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var c=t.lastRenderedState,l=r(c,n);if(o.eagerReducer=r,o.eagerState=l,ei(l,c))return}catch(h){}yu(e,i)}}var Pa={readContext:ho,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useResponder:fa,useDeferredValue:fa,useTransition:fa},Oa={readContext:ho,useCallback:_a,useContext:ho,useEffect:Ia,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Sa(4,36,Da.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Sa(4,36,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=xa.bind(null,ea,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:wa,useDebugValue:Na,useResponder:Xo,useDeferredValue:function(e,t){var n=wa(e),r=n[0],i=n[1];return Ia((function(){o.unstable_next((function(){var n=$o.suspense;$o.suspense=void 0===t?null:t;try{i(e)}finally{$o.suspense=n}}))}),[e,t]),r},useTransition:function(e){var t=wa(!1),n=t[0],r=t[1];return[_a((function(t){r(!0),o.unstable_next((function(){var n=$o.suspense;$o.suspense=void 0===e?null:e;try{r(!1),t()}finally{$o.suspense=n}}))}),[e,n]),n]}},Ra={readContext:ho,useCallback:Aa,useContext:ho,useEffect:ka,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ca(4,36,Da.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ca(4,36,e,t)},useMemo:function(e,t){var n=ga();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&da(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:ba,useRef:function(){return ga().memoizedState},useState:Ta,useDebugValue:Na,useResponder:Xo,useDeferredValue:function(e,t){var n=Ta(),r=n[0],i=n[1];return ka((function(){o.unstable_next((function(){var n=$o.suspense;$o.suspense=void 0===t?null:t;try{i(e)}finally{$o.suspense=n}}))}),[e,t]),r},useTransition:function(e){var t=Ta(),n=t[0],r=t[1];return[Aa((function(t){r(!0),o.unstable_next((function(){var n=$o.suspense;$o.suspense=void 0===e?null:e;try{r(!1),t()}finally{$o.suspense=n}}))}),[e,n]),n]}},Ma=null,La=null,Fa=!1;function Va(e,t){var n=Qu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Ba(e){if(Fa){var t=La;if(t){var n=t;if(!Ua(e,t)){if(!(t=ar(n.nextSibling))||!Ua(e,t))return e.effectTag=-1025&e.effectTag|2,Fa=!1,void(Ma=e);Va(Ma,n)}Ma=e,La=ar(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Fa=!1,Ma=e}}function qa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ma=e}function ja(e){if(e!==Ma)return!1;if(!Fa)return qa(e),Fa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!rr(t,e.memoizedProps))for(t=La;t;)Va(e,t),t=ar(t.nextSibling);if(qa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===Jn){if(0===t){La=ar(e.nextSibling);break e}t--}else n!==Xn&&n!==Zn&&n!==$n||t++}e=e.nextSibling}La=null}}else La=Ma?ar(e.stateNode.nextSibling):null;return!0}function za(){La=Ma=null,Fa=!1}var Wa=O.ReactCurrentOwner,Ka=!1;function Qa(e,t,n,r){t.child=null===e?Vo(t,null,n,r):Fo(t,e.child,n,r)}function Ga(e,t,n,r,i){n=n.render;var o=t.ref;return lo(t,i),r=pa(e,t,n,r,o,i),null===e||Ka?(t.effectTag|=1,Qa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ls(e,t,i))}function Ha(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||Gu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Yu(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ya(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:ni)(i,r)&&e.ref===t.ref)?ls(e,t,o):(t.effectTag|=1,(e=Hu(a,r)).ref=t.ref,e.return=t,t.child=e)}function Ya(e,t,n,r,i,o){return null!==e&&ni(e.memoizedProps,r)&&e.ref===t.ref&&(Ka=!1,i<o)?ls(e,t,o):Ja(e,t,n,r,o)}function Xa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Ja(e,t,n,r,i){var o=wi(n)?vi:yi.current;return o=bi(t,o),lo(t,i),n=pa(e,t,n,r,o,i),null===e||Ka?(t.effectTag|=1,Qa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),ls(e,t,i))}function $a(e,t,n,r,i){if(wi(n)){var o=!0;Ii(t)}else o=!1;if(lo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Ao(t,n,r),Po(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=ho(c):c=bi(t,c=wi(n)?vi:yi.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&xo(t,a,r,c),fo=!1;var f=t.memoizedState;u=a.state=f;var d=t.updateQueue;null!==d&&(Eo(t,d,r,a,i),u=t.memoizedState),s!==r||f!==u||gi.current||fo?("function"===typeof l&&(Do(t,n,l,r),u=t.memoizedState),(s=fo||_o(t,n,s,r,f,u,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.effectTag|=4)):("function"===typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:to(t.type,s),u=a.context,"object"===typeof(c=n.contextType)&&null!==c?c=ho(c):c=bi(t,c=wi(n)?vi:yi.current),(h="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&xo(t,a,r,c),fo=!1,u=t.memoizedState,f=a.state=u,null!==(d=t.updateQueue)&&(Eo(t,d,r,a,i),f=t.memoizedState),s!==r||u!==f||gi.current||fo?("function"===typeof l&&(Do(t,n,l,r),f=t.memoizedState),(l=fo||_o(t,n,s,r,u,f,c))?(h||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,c)),"function"===typeof a.componentDidUpdate&&(t.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return Za(e,t,n,r,o,i)}function Za(e,t,n,r,i,o){Xa(e,t);var a=0!==(64&t.effectTag);if(!r&&!a)return i&&ki(t,n,!1),ls(e,t,o);r=t.stateNode,Wa.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=Fo(t,e.child,null,o),t.child=Fo(t,null,s,o)):Qa(e,t,s,o),t.memoizedState=r.state,i&&ki(t,n,!0),t.child}function es(e){var t=e.stateNode;t.pendingContext?Si(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Si(0,t.context,!1),Wo(e,t.containerInfo)}var ts,ns,rs,is,os={dehydrated:null,retryTime:0};function as(e,t,n){var r,i=t.mode,o=t.pendingProps,a=Ho.current,s=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&a)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),pi(Ho,1&a),null===e){if(void 0!==o.fallback&&Ba(t),s){if(s=o.fallback,(o=Xu(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Xu(s,i,n,null)).return=t,o.sibling=n,t.memoizedState=os,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=Vo(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(o=o.fallback,(n=Hu(e,e.pendingProps)).return=t,0===(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Hu(i,o,i.expirationTime)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=os,t.child=n,i}return n=Fo(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=Xu(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Xu(s,i,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=os,t.child=o,n}return t.memoizedState=null,t.child=Fo(t,e,o.children,n)}function ss(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),co(e.return,t)}function us(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function cs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Qa(e,t,r.children,n),0!==(2&(r=Ho.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ss(e,n);else if(19===e.tag)ss(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(pi(Ho,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Yo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),us(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Yo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}us(t,!0,n,null,o,t.lastEffect);break;case"together":us(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ls(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&Nu(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Hu(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hu(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function hs(e){e.effectTag|=4}function fs(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ds(e){switch(e.tag){case 1:wi(e.type)&&Ti();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Ko(),Ei(),0!==(64&(t=e.effectTag)))throw Error(a(285));return e.effectTag=-4097&t|64,e;case 5:return Go(e),null;case 13:return di(Ho),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return di(Ho),null;case 4:return Ko(),null;case 10:return uo(e),null;default:return null}}function ps(e,t){return{value:e,source:t,stack:$(t)}}ts=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ns=function(){},rs=function(e,t,n,r,o){var a=e.memoizedProps;if(a!==r){var s,u,c=t.stateNode;switch(zo(Bo.current),e=null,n){case"input":a=ke(c,a),r=ke(c,r),e=[];break;case"option":a=Pe(c,a),r=Pe(c,r),e=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":a=Re(c,a),r=Re(c,r),e=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(c.onclick=Wn)}for(s in qn(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(u in c=a[s])c.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(d.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in r){var l=r[s];if(c=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&l!==c&&(null!=l||null!=c))if("style"===s)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&(n||(n={}),n[u]=l[u])}else n||(e||(e=[]),e.push(s,n)),n=l;else"dangerouslySetInnerHTML"===s?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(e=e||[]).push(s,""+l)):"children"===s?c===l||"string"!==typeof l&&"number"!==typeof l||(e=e||[]).push(s,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(d.hasOwnProperty(s)?(null!=l&&zn(o,s),e||c===l||(e=[])):(e=e||[]).push(s,l))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&hs(t)}},is=function(e,t,n,r){n!==r&&hs(t)};var ms="function"===typeof WeakSet?WeakSet:Set;function ys(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=$(n)),null!==n&&J(n.type),t=t.value,null!==e&&1===e.tag&&J(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function gs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Bu(e,n)}else t.current=null}function vs(e,t){switch(t.tag){case 0:case 11:case 15:bs(2,0,t);break;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:to(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break;case 3:case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}function bs(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if(0!==(r.tag&e)){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}0!==(r.tag&t)&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function ws(e,t,n){switch("function"===typeof Wu&&Wu(t),t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Hi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(o){Bu(i,o)}}e=e.next}while(e!==r)}))}break;case 1:gs(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Bu(e,n)}}(t,n);break;case 5:gs(t);break;case 4:Cs(e,t,n)}}function Ts(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,null!==t&&Ts(t)}function Es(e){return 5===e.tag||3===e.tag||4===e.tag}function Ss(e){e:{for(var t=e.return;null!==t;){if(Es(t)){var n=t;break e}t=t.return}throw Error(a(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(ze(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Es(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){var o=5===i.tag||6===i.tag;if(o){var s=o?i.stateNode:i.stateNode.instance;if(n)if(r){var u=s;s=n,8===(o=t).nodeType?o.parentNode.insertBefore(u,s):o.insertBefore(u,s)}else t.insertBefore(s,n);else r?(8===(u=t).nodeType?(o=u.parentNode).insertBefore(s,u):(o=u).appendChild(s),null!==(u=u._reactRootContainer)&&void 0!==u||null!==o.onclick||(o.onclick=Wn)):t.appendChild(s)}else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function Cs(e,t,n){for(var r,i,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag){e:for(var u=e,c=o,l=n,h=c;;)if(ws(u,h,l),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break;for(;null===h.sibling;){if(null===h.return||h.return===c)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(u=r,c=o.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(ws(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function Is(e,t){switch(t.tag){case 0:case 11:case 14:case 15:bs(4,8,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[lr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ne(n,r),jn(e,i),t=jn(e,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?Un(n,u):"dangerouslySetInnerHTML"===s?je(n,u):"children"===s?ze(n,u):Ee(n,s,u,t)}switch(e){case"input":_e(n,r);break;case"textarea":Le(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Oe(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Oe(n,!!r.multiple,r.defaultValue,!0):Oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 6:if(null===t.stateNode)throw Error(a(162));t.stateNode.nodeValue=t.memoizedProps;break;case 3:(t=t.stateNode).hydrate&&(t.hydrate=!1,It(t.containerInfo));break;case 12:break;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,tu=Ki()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=Vn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}ks(t);break;case 19:ks(t);break;case 17:case 20:case 21:break;default:throw Error(a(163))}}function ks(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ms),t.forEach((function(t){var r=ju.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var Ds="function"===typeof WeakMap?WeakMap:Map;function Ns(e,t,n){(n=yo(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){iu||(iu=!0,ou=r),ys(e,t)},n}function _s(e,t,n){(n=yo(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ys(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===au?au=new Set([this]):au.add(this),ys(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var As,xs=Math.ceil,Ps=O.ReactCurrentDispatcher,Os=O.ReactCurrentOwner,Rs=0,Ms=8,Ls=16,Fs=32,Vs=0,Us=1,Bs=2,qs=3,js=4,zs=5,Ws=Rs,Ks=null,Qs=null,Gs=0,Hs=Vs,Ys=null,Xs=1073741823,Js=1073741823,$s=null,Zs=0,eu=!1,tu=0,nu=500,ru=null,iu=!1,ou=null,au=null,su=!1,uu=null,cu=90,lu=null,hu=0,fu=null,du=0;function pu(){return(Ws&(Ls|Fs))!==Rs?1073741821-(Ki()/10|0):0!==du?du:du=1073741821-(Ki()/10|0)}function mu(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Qi();if(0===(4&t))return 99===r?1073741823:1073741822;if((Ws&Ls)!==Rs)return Gs;if(null!==n)e=eo(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=eo(e,150,100);break;case 97:case 96:e=eo(e,5e3,250);break;case 95:e=2;break;default:throw Error(a(326))}return null!==Ks&&e===Gs&&--e,e}function yu(e,t){if(50<hu)throw hu=0,fu=null,Error(a(185));if(null!==(e=gu(e,t))){var n=Qi();1073741823===t?(Ws&Ms)!==Rs&&(Ws&(Ls|Fs))===Rs?Tu(e):(bu(e),Ws===Rs&&Ji()):bu(e),(4&Ws)===Rs||98!==n&&99!==n||(null===lu?lu=new Map([[e,t]]):(void 0===(n=lu.get(e))||n>t)&&lu.set(e,t))}}function gu(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Ks===i&&(Nu(t),Hs===js&&tc(i,Gs)),nc(i,t)),i}function vu(e){var t=e.lastExpiredTime;return 0!==t?t:ec(e,t=e.firstPendingTime)?(t=e.lastPingedTime)>(e=e.nextKnownPendingLevel)?t:e:t}function bu(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Xi(Tu.bind(null,e));else{var t=vu(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=pu();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Ui&&_i(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Xi(Tu.bind(null,e)):Yi(r,wu.bind(null,e),{timeout:10*(1073741821-t)-Ki()}),e.callbackNode=t}}}function wu(e,t){if(du=0,t)return rc(e,t=pu()),bu(e),null;var n=vu(e);if(0!==n){if(t=e.callbackNode,(Ws&(Ls|Fs))!==Rs)throw Error(a(327));if(Fu(),e===Ks&&n===Gs||Cu(e,n),null!==Qs){var r=Ws;Ws|=Ls;for(var i=ku();;)try{Au();break}catch(u){Iu(e,u)}if(ao(),Ws=r,Ps.current=i,Hs===Us)throw t=Ys,Cu(e,n),tc(e,n),bu(e),t;if(null===Qs)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Hs,Ks=null,r){case Vs:case Us:throw Error(a(345));case Bs:rc(e,2<n?2:n);break;case qs:if(tc(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Ou(i)),1073741823===Xs&&10<(i=tu+nu-Ki())){if(eu){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,Cu(e,n);break}}if(0!==(o=vu(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=ir(Ru.bind(null,e),i);break}Ru(e);break;case js:if(tc(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Ou(i)),eu&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,Cu(e,n);break}if(0!==(i=vu(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Js?r=10*(1073741821-Js)-Ki():1073741823===Xs?r=0:(r=10*(1073741821-Xs)-5e3,0>(r=(i=Ki())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xs(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=ir(Ru.bind(null,e),r);break}Ru(e);break;case zs:if(1073741823!==Xs&&null!==$s){o=Xs;var s=$s;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(o=Ki()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=i?0:i+r-o),10<r){tc(e,n),e.timeoutHandle=ir(Ru.bind(null,e),r);break}}Ru(e);break;default:throw Error(a(329))}if(bu(e),e.callbackNode===t)return wu.bind(null,e)}}return null}function Tu(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,e.finishedExpirationTime===t)Ru(e);else{if((Ws&(Ls|Fs))!==Rs)throw Error(a(327));if(Fu(),e===Ks&&t===Gs||Cu(e,t),null!==Qs){var n=Ws;Ws|=Ls;for(var r=ku();;)try{_u();break}catch(i){Iu(e,i)}if(ao(),Ws=n,Ps.current=r,Hs===Us)throw n=Ys,Cu(e,t),tc(e,t),bu(e),n;if(null!==Qs)throw Error(a(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Ks=null,Ru(e),bu(e)}}return null}function Eu(e,t){var n=Ws;Ws|=1;try{return e(t)}finally{(Ws=n)===Rs&&Ji()}}function Su(e,t){var n=Ws;Ws&=-2,Ws|=Ms;try{return e(t)}finally{(Ws=n)===Rs&&Ji()}}function Cu(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,or(n)),null!==Qs)for(n=Qs.return;null!==n;){var r=n;switch(r.tag){case 1:var i=r.type.childContextTypes;null!==i&&void 0!==i&&Ti();break;case 3:Ko(),Ei();break;case 5:Go(r);break;case 4:Ko();break;case 13:case 19:di(Ho);break;case 10:uo(r)}n=n.return}Ks=e,Qs=Hu(e.current,null),Gs=t,Hs=Vs,Ys=null,Js=Xs=1073741823,$s=null,Zs=0,eu=!1}function Iu(e,t){for(;;){try{if(ao(),ma(),null===Qs||null===Qs.return)return Hs=Us,Ys=t,null;e:{var n=e,r=Qs.return,i=Qs,o=t;if(t=Gs,i.effectTag|=2048,i.firstEffect=i.lastEffect=null,null!==o&&"object"===typeof o&&"function"===typeof o.then){var a=o,s=0!==(1&Ho.current),u=r;do{var c;if(c=13===u.tag){var l=u.memoizedState;if(null!==l)c=null!==l.dehydrated;else{var h=u.memoizedProps;c=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!s)}}if(c){var f=u.updateQueue;if(null===f){var d=new Set;d.add(a),u.updateQueue=d}else f.add(a);if(0===(2&u.mode)){if(u.effectTag|=64,i.effectTag&=-2981,1===i.tag)if(null===i.alternate)i.tag=17;else{var p=yo(1073741823,null);p.tag=2,vo(i,p)}i.expirationTime=1073741823;break e}o=void 0,i=t;var m=n.pingCache;if(null===m?(m=n.pingCache=new Ds,o=new Set,m.set(a,o)):void 0===(o=m.get(a))&&(o=new Set,m.set(a,o)),!o.has(i)){o.add(i);var y=qu.bind(null,n,a,i);a.then(y,y)}u.effectTag|=4096,u.expirationTime=t;break e}u=u.return}while(null!==u);o=Error((J(i.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+$(i))}Hs!==zs&&(Hs=Bs),o=ps(o,i),u=r;do{switch(u.tag){case 3:a=o,u.effectTag|=4096,u.expirationTime=t,bo(u,Ns(u,a,t));break e;case 1:a=o;var g=u.type,v=u.stateNode;if(0===(64&u.effectTag)&&("function"===typeof g.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===au||!au.has(v)))){u.effectTag|=4096,u.expirationTime=t,bo(u,_s(u,a,t));break e}}u=u.return}while(null!==u)}Qs=Pu(Qs)}catch(b){t=b;continue}break}}function ku(){var e=Ps.current;return Ps.current=Pa,null===e?Pa:e}function Du(e,t){e<Xs&&2<e&&(Xs=e),null!==t&&e<Js&&2<e&&(Js=e,$s=t)}function Nu(e){e>Zs&&(Zs=e)}function _u(){for(;null!==Qs;)Qs=xu(Qs)}function Au(){for(;null!==Qs&&!Ai();)Qs=xu(Qs)}function xu(e){var t=As(e.alternate,e,Gs);return e.memoizedProps=e.pendingProps,null===t&&(t=Pu(e)),Os.current=null,t}function Pu(e){Qs=e;do{var t=Qs.alternate;if(e=Qs.return,0===(2048&Qs.effectTag)){e:{var n=t,r=Gs,o=(t=Qs).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:wi(t.type)&&Ti();break;case 3:Ko(),Ei(),(o=t.stateNode).pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(null===n||null===n.child)&&ja(t)&&hs(t),ns(t);break;case 5:Go(t),r=zo(jo.current);var s=t.type;if(null!==n&&null!=t.stateNode)rs(n,t,s,o,r),n.ref!==t.ref&&(t.effectTag|=128);else if(o){var u=zo(Bo.current);if(ja(t)){var c=(o=t).stateNode;n=o.type;var l=o.memoizedProps,h=r;switch(c[cr]=o,c[lr]=l,s=void 0,r=c,n){case"iframe":case"object":case"embed":In("load",r);break;case"video":case"audio":for(c=0;c<Ze.length;c++)In(Ze[c],r);break;case"source":In("error",r);break;case"img":case"image":case"link":In("error",r),In("load",r);break;case"form":In("reset",r),In("submit",r);break;case"details":In("toggle",r);break;case"input":De(r,l),In("invalid",r),zn(h,"onChange");break;case"select":r._wrapperState={wasMultiple:!!l.multiple},In("invalid",r),zn(h,"onChange");break;case"textarea":Me(r,l),In("invalid",r),zn(h,"onChange")}for(s in qn(n,l),c=null,l)l.hasOwnProperty(s)&&(u=l[s],"children"===s?"string"===typeof u?r.textContent!==u&&(c=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(c=["children",""+u]):d.hasOwnProperty(s)&&null!=u&&zn(h,s));switch(n){case"input":Ce(r),Ae(r,l,!0);break;case"textarea":Ce(r),Fe(r);break;case"select":case"option":break;default:"function"===typeof l.onClick&&(r.onclick=Wn)}s=c,o.updateQueue=s,(o=null!==s)&&hs(t)}else{n=t,h=s,l=o,c=9===r.nodeType?r:r.ownerDocument,u===Ve.html&&(u=Ue(h)),u===Ve.html?"script"===h?((l=c.createElement("div")).innerHTML="<script><\/script>",c=l.removeChild(l.firstChild)):"string"===typeof l.is?c=c.createElement(h,{is:l.is}):(c=c.createElement(h),"select"===h&&(h=c,l.multiple?h.multiple=!0:l.size&&(h.size=l.size))):c=c.createElementNS(u,h),(l=c)[cr]=n,l[lr]=o,ts(l,t,!1,!1),t.stateNode=l;var f=r,p=jn(h=s,n=o);switch(h){case"iframe":case"object":case"embed":In("load",l),r=n;break;case"video":case"audio":for(r=0;r<Ze.length;r++)In(Ze[r],l);r=n;break;case"source":In("error",l),r=n;break;case"img":case"image":case"link":In("error",l),In("load",l),r=n;break;case"form":In("reset",l),In("submit",l),r=n;break;case"details":In("toggle",l),r=n;break;case"input":De(l,n),r=ke(l,n),In("invalid",l),zn(f,"onChange");break;case"option":r=Pe(l,n);break;case"select":l._wrapperState={wasMultiple:!!n.multiple},r=i({},n,{value:void 0}),In("invalid",l),zn(f,"onChange");break;case"textarea":Me(l,n),r=Re(l,n),In("invalid",l),zn(f,"onChange");break;default:r=n}qn(h,r),c=void 0,u=h;var m=l,y=r;for(c in y)if(y.hasOwnProperty(c)){var g=y[c];"style"===c?Un(m,g):"dangerouslySetInnerHTML"===c?null!=(g=g?g.__html:void 0)&&je(m,g):"children"===c?"string"===typeof g?("textarea"!==u||""!==g)&&ze(m,g):"number"===typeof g&&ze(m,""+g):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(d.hasOwnProperty(c)?null!=g&&zn(f,c):null!=g&&Ee(m,c,g,p))}switch(h){case"input":Ce(l),Ae(l,n,!1);break;case"textarea":Ce(l),Fe(l);break;case"option":null!=n.value&&l.setAttribute("value",""+Te(n.value));break;case"select":(r=l).multiple=!!n.multiple,null!=(l=n.value)?Oe(r,!!n.multiple,l,!1):null!=n.defaultValue&&Oe(r,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof r.onClick&&(l.onclick=Wn)}(o=nr(s,o))&&hs(t)}null!==t.ref&&(t.effectTag|=128)}else if(null===t.stateNode)throw Error(a(166));break;case 6:if(n&&null!=t.stateNode)is(n,t,n.memoizedProps,o);else{if("string"!==typeof o&&null===t.stateNode)throw Error(a(166));r=zo(jo.current),zo(Bo.current),ja(t)?(s=(o=t).stateNode,r=o.memoizedProps,s[cr]=o,(o=s.nodeValue!==r)&&hs(t)):(s=t,(o=(9===r.nodeType?r:r.ownerDocument).createTextNode(o))[cr]=s,t.stateNode=o)}break;case 11:break;case 13:if(di(Ho),o=t.memoizedState,0!==(64&t.effectTag)){t.expirationTime=r;break e}o=null!==o,s=!1,null===n?void 0!==t.memoizedProps.fallback&&ja(t):(s=null!==(r=n.memoizedState),o||null===r||null!==(r=n.child.sibling)&&(null!==(l=t.firstEffect)?(t.firstEffect=r,r.nextEffect=l):(t.firstEffect=t.lastEffect=r,r.nextEffect=null),r.effectTag=8)),o&&!s&&0!==(2&t.mode)&&(null===n&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ho.current)?Hs===Vs&&(Hs=qs):(Hs!==Vs&&Hs!==qs||(Hs=js),0!==Zs&&null!==Ks&&(tc(Ks,Gs),nc(Ks,Zs)))),(o||s)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Ko(),ns(t);break;case 10:uo(t);break;case 9:case 14:break;case 17:wi(t.type)&&Ti();break;case 19:if(di(Ho),null===(o=t.memoizedState))break;if(s=0!==(64&t.effectTag),null===(l=o.rendering)){if(s)fs(o,!1);else if(Hs!==Vs||null!==n&&0!==(64&n.effectTag))for(n=t.child;null!==n;){if(null!==(l=Yo(n))){for(t.effectTag|=64,fs(o,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.effectTag|=4),null===o.lastEffect&&(t.firstEffect=null),t.lastEffect=o.lastEffect,o=r,s=t.child;null!==s;)n=o,(r=s).effectTag&=2,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null,null===(l=r.alternate)?(r.childExpirationTime=0,r.expirationTime=n,r.child=null,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null):(r.childExpirationTime=l.childExpirationTime,r.expirationTime=l.expirationTime,r.child=l.child,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,n=l.dependencies,r.dependencies=null===n?null:{expirationTime:n.expirationTime,firstContext:n.firstContext,responders:n.responders}),s=s.sibling;pi(Ho,1&Ho.current|2),t=t.child;break e}n=n.sibling}}else{if(!s)if(null!==(n=Yo(l))){if(t.effectTag|=64,s=!0,null!==(r=n.updateQueue)&&(t.updateQueue=r,t.effectTag|=4),fs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate){null!==(t=t.lastEffect=o.lastEffect)&&(t.nextEffect=null);break}}else Ki()>o.tailExpiration&&1<r&&(t.effectTag|=64,s=!0,fs(o,!1),t.expirationTime=t.childExpirationTime=r-1);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=o.last)?r.sibling=l:t.child=l,o.last=l)}if(null!==o.tail){0===o.tailExpiration&&(o.tailExpiration=Ki()+500),r=o.tail,o.rendering=r,o.tail=r.sibling,o.lastEffect=t.lastEffect,r.sibling=null,o=Ho.current,pi(Ho,o=s?1&o|2:1&o),t=r;break e}break;case 20:case 21:break;default:throw Error(a(156,t.tag))}t=null}if(o=Qs,1===Gs||1!==o.childExpirationTime){for(s=0,r=o.child;null!==r;)(n=r.expirationTime)>s&&(s=n),(l=r.childExpirationTime)>s&&(s=l),r=r.sibling;o.childExpirationTime=s}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Qs.firstEffect),null!==Qs.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Qs.firstEffect),e.lastEffect=Qs.lastEffect),1<Qs.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Qs:e.firstEffect=Qs,e.lastEffect=Qs))}else{if(null!==(t=ds(Qs)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Qs.sibling))return t;Qs=e}while(null!==Qs);return Hs===Vs&&(Hs=zs),null}function Ou(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Ru(e){var t=Qi();return Hi(99,Mu.bind(null,e,t)),null}function Mu(e,t){do{Fu()}while(null!==uu);if((Ws&(Ls|Fs))!==Rs)throw Error(a(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=Ou(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Ks&&(Qs=Ks=null,Gs=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Ws;Ws|=Fs,Os.current=null,er=Cn;var s=Hn();if(Yn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{var c=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{u.nodeType,h.nodeType}catch(M){u=null;break e}var f=0,d=-1,p=-1,m=0,y=0,g=s,v=null;t:for(;;){for(var b;g!==u||0!==l&&3!==g.nodeType||(d=f+l),g!==h||0!==c&&3!==g.nodeType||(p=f+c),3===g.nodeType&&(f+=g.nodeValue.length),null!==(b=g.firstChild);)v=g,g=b;for(;;){if(g===s)break t;if(v===u&&++m===l&&(d=f),v===h&&++y===c&&(p=f),null!==(b=g.nextSibling))break;v=(g=v).parentNode}g=b}u=-1===d||-1===p?null:{start:d,end:p}}else u=null}u=u||{start:0,end:0}}else u=null;tr={focusedElem:s,selectionRange:u},Cn=!1,ru=i;do{try{Lu()}catch(M){if(null===ru)throw Error(a(330));Bu(ru,M),ru=ru.nextEffect}}while(null!==ru);ru=i;do{try{for(s=e,u=t;null!==ru;){var w=ru.effectTag;if(16&w&&ze(ru.stateNode,""),128&w){var T=ru.alternate;if(null!==T){var E=T.ref;null!==E&&("function"===typeof E?E(null):E.current=null)}}switch(1038&w){case 2:Ss(ru),ru.effectTag&=-3;break;case 6:Ss(ru),ru.effectTag&=-3,Is(ru.alternate,ru);break;case 1024:ru.effectTag&=-1025;break;case 1028:ru.effectTag&=-1025,Is(ru.alternate,ru);break;case 4:Is(ru.alternate,ru);break;case 8:Cs(s,l=ru,u),Ts(l)}ru=ru.nextEffect}}catch(M){if(null===ru)throw Error(a(330));Bu(ru,M),ru=ru.nextEffect}}while(null!==ru);if(E=tr,T=Hn(),w=E.focusedElem,u=E.selectionRange,T!==w&&w&&w.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(w.ownerDocument.documentElement,w)){null!==u&&Yn(w)&&(T=u.start,void 0===(E=u.end)&&(E=T),"selectionStart"in w?(w.selectionStart=T,w.selectionEnd=Math.min(E,w.value.length)):(E=(T=w.ownerDocument||document)&&T.defaultView||window).getSelection&&(E=E.getSelection(),l=w.textContent.length,s=Math.min(u.start,l),u=void 0===u.end?s:Math.min(u.end,l),!E.extend&&s>u&&(l=u,u=s,s=l),l=Gn(w,s),h=Gn(w,u),l&&h&&(1!==E.rangeCount||E.anchorNode!==l.node||E.anchorOffset!==l.offset||E.focusNode!==h.node||E.focusOffset!==h.offset)&&((T=T.createRange()).setStart(l.node,l.offset),E.removeAllRanges(),s>u?(E.addRange(T),E.extend(h.node,h.offset)):(T.setEnd(h.node,h.offset),E.addRange(T))))),T=[];for(E=w;E=E.parentNode;)1===E.nodeType&&T.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"===typeof w.focus&&w.focus(),w=0;w<T.length;w++)(E=T[w]).element.scrollLeft=E.left,E.element.scrollTop=E.top}tr=null,Cn=!!er,er=null,e.current=n,ru=i;do{try{for(w=r;null!==ru;){var S=ru.effectTag;if(36&S){var C=ru.alternate;switch(E=w,(T=ru).tag){case 0:case 11:case 15:bs(16,32,T);break;case 1:var I=T.stateNode;if(4&T.effectTag)if(null===C)I.componentDidMount();else{var k=T.elementType===T.type?C.memoizedProps:to(T.type,C.memoizedProps);I.componentDidUpdate(k,C.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var D=T.updateQueue;null!==D&&So(0,D,I);break;case 3:var N=T.updateQueue;if(null!==N){if(s=null,null!==T.child)switch(T.child.tag){case 5:s=T.child.stateNode;break;case 1:s=T.child.stateNode}So(0,N,s)}break;case 5:var _=T.stateNode;null===C&&4&T.effectTag&&nr(T.type,T.memoizedProps)&&_.focus();break;case 6:case 4:case 12:break;case 13:if(null===T.memoizedState){var A=T.alternate;if(null!==A){var x=A.memoizedState;if(null!==x){var P=x.dehydrated;null!==P&&It(P)}}}break;case 19:case 17:case 20:case 21:break;default:throw Error(a(163))}}if(128&S){T=void 0;var O=ru.ref;if(null!==O){var R=ru.stateNode;switch(ru.tag){case 5:T=R;break;default:T=R}"function"===typeof O?O(T):O.current=T}}ru=ru.nextEffect}}catch(M){if(null===ru)throw Error(a(330));Bu(ru,M),ru=ru.nextEffect}}while(null!==ru);ru=null,Bi(),Ws=o}else e.current=n;if(su)su=!1,uu=e,cu=t;else for(ru=i;null!==ru;)t=ru.nextEffect,ru.nextEffect=null,ru=t;if(0===(t=e.firstPendingTime)&&(au=null),1073741823===t?e===fu?hu++:(hu=0,fu=e):hu=0,"function"===typeof zu&&zu(n.stateNode,r),bu(e),iu)throw iu=!1,e=ou,ou=null,e;return(Ws&Ms)!==Rs?null:(Ji(),null)}function Lu(){for(;null!==ru;){var e=ru.effectTag;0!==(256&e)&&vs(ru.alternate,ru),0===(512&e)||su||(su=!0,Yi(97,(function(){return Fu(),null}))),ru=ru.nextEffect}}function Fu(){if(90!==cu){var e=97<cu?97:cu;return cu=90,Hi(e,Vu)}}function Vu(){if(null===uu)return!1;var e=uu;if(uu=null,(Ws&(Ls|Fs))!==Rs)throw Error(a(331));var t=Ws;for(Ws|=Fs,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:bs(128,0,n),bs(0,64,n)}}catch(r){if(null===e)throw Error(a(330));Bu(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Ws=t,Ji(),!0}function Uu(e,t,n){vo(e,t=Ns(e,t=ps(n,t),1073741823)),null!==(e=gu(e,1073741823))&&bu(e)}function Bu(e,t){if(3===e.tag)Uu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Uu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===au||!au.has(r))){vo(n,e=_s(n,e=ps(t,e),1073741823)),null!==(n=gu(n,1073741823))&&bu(n);break}}n=n.return}}function qu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Ks===e&&Gs===n?Hs===js||Hs===qs&&1073741823===Xs&&Ki()-tu<nu?Cu(e,Gs):eu=!0:ec(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,e.finishedExpirationTime===n&&(e.finishedExpirationTime=0,e.finishedWork=null),bu(e)))}function ju(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=mu(t=pu(),e,null)),null!==(e=gu(e,t))&&bu(e)}As=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||gi.current)Ka=!0;else{if(r<n){switch(Ka=!1,t.tag){case 3:es(t),za();break;case 5:if(Qo(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:wi(t.type)&&Ii(t);break;case 4:Wo(t,t.stateNode.containerInfo);break;case 10:so(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?as(e,t,n):(pi(Ho,1&Ho.current),null!==(t=ls(e,t,n))?t.sibling:null);pi(Ho,1&Ho.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return cs(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),pi(Ho,Ho.current),!r)return null}return ls(e,t,n)}Ka=!1}}else Ka=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=bi(t,yi.current),lo(t,n),i=pa(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,ma(),wi(r)){var o=!0;Ii(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;"function"===typeof s&&Do(t,r,s,e),i.updater=No,t.stateNode=i,i._reactInternalFiber=t,Po(t,r,e,n),t=Za(null,t,r,!0,o,n)}else t.tag=0,Qa(null,t,i,n),t=t.child;return t;case 16:if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"===typeof e)return Gu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===W)return 11;if(e===G)return 14}return 2}(i),e=to(i,e),o){case 0:t=Ja(null,t,i,e,n);break;case 1:t=$a(null,t,i,e,n);break;case 11:t=Ga(null,t,i,e,n);break;case 14:t=Ha(null,t,i,to(i.type,e),r,n);break;default:throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ja(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,$a(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:if(es(t),null===(r=t.updateQueue))throw Error(a(282));if(i=null!==(i=t.memoizedState)?i.element:null,Eo(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i)za(),t=ls(e,t,n);else{if((i=t.stateNode.hydrate)&&(La=ar(t.stateNode.containerInfo.firstChild),Ma=t,i=Fa=!0),i)for(n=Vo(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Qa(e,t,r,n),za();t=t.child}return t;case 5:return Qo(t),null===e&&Ba(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,rr(r,i)?s=null:null!==o&&rr(r,o)&&(t.effectTag|=16),Xa(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Qa(e,t,s,n),t=t.child),t;case 6:return null===e&&Ba(t),null;case 13:return as(e,t,n);case 4:return Wo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Fo(t,null,r,n):Qa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ga(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return Qa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Qa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,so(t,o=i.value),null!==s){var u=s.value;if(0===(o=ei(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!gi.current){t=ls(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=yo(n,null)).tag=2,vo(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),co(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}}Qa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,lo(t,n),r=r(i=ho(i,o.unstable_observedBits)),t.effectTag|=1,Qa(e,t,r,n),t.child;case 14:return o=to(i=t.type,t.pendingProps),Ha(e,t,i,o=to(i.type,o),r,n);case 15:return Ya(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,wi(r)?(e=!0,Ii(t)):e=!1,lo(t,n),Ao(t,r,i),Po(t,r,i,n),Za(null,t,r,!0,e,n);case 19:return cs(e,t,n)}throw Error(a(156,t.tag))};var zu=null,Wu=null;function Ku(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Qu(e,t,n,r){return new Ku(e,t,n,r)}function Gu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hu(e,t){var n=e.alternate;return null===n?((n=Qu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Yu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Gu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case V:return Xu(n.children,i,o,t);case z:s=8,i|=7;break;case U:s=8,i|=1;break;case B:return(e=Qu(12,n,t,8|i)).elementType=B,e.type=B,e.expirationTime=o,e;case K:return(e=Qu(13,n,t,i)).type=K,e.elementType=K,e.expirationTime=o,e;case Q:return(e=Qu(19,n,t,i)).elementType=Q,e.expirationTime=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case q:s=10;break e;case j:s=9;break e;case W:s=11;break e;case G:s=14;break e;case H:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Qu(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Xu(e,t,n,r){return(e=Qu(7,e,r,t)).expirationTime=n,e}function Ju(e,t,n){return(e=Qu(6,e,null,t)).expirationTime=n,e}function $u(e,t,n){return(t=Qu(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zu(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function ec(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function tc(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function nc(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function rc(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function ic(e,t,n,r){var i=t.current,o=pu(),s=Io.suspense;o=mu(o,i,s);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(wi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(wi(c)){n=Ci(n,c,u);break e}}n=u}else n=mi;return null===t.context?t.context=n:t.pendingContext=n,(t=yo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),vo(i,t),yu(i,o),o}function oc(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function ac(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function sc(e,t){ac(e,t),(e=e.alternate)&&ac(e,t)}function uc(e,t,n){var r=new Zu(e,t,n=null!=n&&!0===n.hydrate),i=Qu(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,e[hr]=r.current,n&&0!==t&&function(e){var t=Rn(e);mt.forEach((function(n){Mn(n,e,t)})),yt.forEach((function(n){Mn(n,e,t)}))}(9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function cc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function lc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=oc(a);s.call(e)}}ic(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new uc(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var e=oc(a);u.call(e)}}Su((function(){ic(t,a,e,i)}))}return oc(a)}function hc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!cc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:F,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}uc.prototype.render=function(e,t){ic(e,this._internalRoot,null,void 0===t?null:t)},uc.prototype.unmount=function(e){var t=this._internalRoot,n=void 0===e?null:e,r=t.containerInfo;ic(null,t,null,(function(){r[hr]=null,null!==n&&n()}))},it=function(e){if(13===e.tag){var t=eo(pu(),150,100);yu(e,t),sc(e,t)}},ot=function(e){if(13===e.tag){pu();var t=Zi++;yu(e,t),sc(e,t)}},at=function(e){if(13===e.tag){var t=pu();yu(e,t=mu(t,e,null)),sc(e,t)}},ee=function(e,t,n){switch(t){case"input":if(_e(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=mr(r);if(!i)throw Error(a(90));Ie(r),_e(r,i)}}}break;case"textarea":Le(e,n);break;case"select":null!=(t=n.value)&&Oe(e,!!n.multiple,t,!1)}},ae=Eu,se=function(e,t,n,r){var i=Ws;Ws|=4;try{return Hi(98,e.bind(null,t,n,r))}finally{(Ws=i)===Rs&&Ji()}},ue=function(){(Ws&(1|Ls|Fs))===Rs&&(function(){if(null!==lu){var e=lu;lu=null,e.forEach((function(e,t){rc(t,e),bu(t)})),Ji()}}(),Fu())},ce=function(e,t){var n=Ws;Ws|=2;try{return e(t)}finally{(Ws=n)===Rs&&Ji()}};var fc={createPortal:hc,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},hydrate:function(e,t,n){if(!cc(t))throw Error(a(200));return lc(null,e,t,!0,n)},render:function(e,t,n){if(!cc(t))throw Error(a(200));return lc(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){if(!cc(n))throw Error(a(200));if(null==e||void 0===e._reactInternalFiber)throw Error(a(38));return lc(e,t,n,!1,r)},unmountComponentAtNode:function(e){if(!cc(e))throw Error(a(40));return!!e._reactRootContainer&&(Su((function(){lc(null,null,e,!1,(function(){e._reactRootContainer=null,e[hr]=null}))})),!0)},unstable_createPortal:function(){return hc.apply(void 0,arguments)},unstable_batchedUpdates:Eu,flushSync:function(e,t){if((Ws&(Ls|Fs))!==Rs)throw Error(a(187));var n=Ws;Ws|=1;try{return Hi(99,e.bind(null,t))}finally{Ws=n,Ji()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[dr,pr,mr,x.injectEventPluginsByName,f,Pt,function(e){D(e,xt)},ie,oe,An,A,Fu,{current:!1}]}};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);zu=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},Wu=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:fr,bundleType:0,version:"16.12.0",rendererPackageName:"react-dom"});var dc={default:fc},pc=dc&&fc||dc;e.exports=pc.default||pc},function(e,t,n){"use strict";e.exports=n(26)},function(e,t,n){"use strict";var r,i,o,a,s;if(Object.defineProperty(t,"__esModule",{value:!0}),"undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,c=null,l=function e(){if(null!==u)try{var n=t.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(e,0),r}},h=Date.now();t.unstable_now=function(){return Date.now()-h},r=function(e){null!==u?setTimeout(r,0,e):(u=e,setTimeout(l,0))},i=function(e,t){c=setTimeout(e,t)},o=function(){clearTimeout(c)},a=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var f=window.performance,d=window.Date,p=window.setTimeout,m=window.clearTimeout;if("undefined"!==typeof console){var y=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof y&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof f&&"function"===typeof f.now)t.unstable_now=function(){return f.now()};else{var g=d.now();t.unstable_now=function(){return d.now()-g}}var v=!1,b=null,w=-1,T=5,E=0;a=function(){return t.unstable_now()>=E},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):T=0<e?Math.floor(1e3/e):5};var S=new MessageChannel,C=S.port2;S.port1.onmessage=function(){if(null!==b){var e=t.unstable_now();E=e+T;try{b(!0,e)?C.postMessage(null):(v=!1,b=null)}catch(n){throw C.postMessage(null),n}}else v=!1},r=function(e){b=e,v||(v=!0,C.postMessage(null))},i=function(e,n){w=p((function(){e(t.unstable_now())}),n)},o=function(){m(w),w=-1}}function I(e,t){var n=e.length;e.push(t);e:for(;;){var r=Math.floor((n-1)/2),i=e[r];if(!(void 0!==i&&0<N(i,t)))break e;e[r]=t,e[n]=i,n=r}}function k(e){return void 0===(e=e[0])?null:e}function D(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>N(a,n))void 0!==u&&0>N(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>N(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function N(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var _=[],A=[],x=1,P=null,O=3,R=!1,M=!1,L=!1;function F(e){for(var t=k(A);null!==t;){if(null===t.callback)D(A);else{if(!(t.startTime<=e))break;D(A),t.sortIndex=t.expirationTime,I(_,t)}t=k(A)}}function V(e){if(L=!1,F(e),!M)if(null!==k(_))M=!0,r(U);else{var t=k(A);null!==t&&i(V,t.startTime-e)}}function U(e,n){M=!1,L&&(L=!1,o()),R=!0;var r=O;try{for(F(n),P=k(_);null!==P&&(!(P.expirationTime>n)||e&&!a());){var s=P.callback;if(null!==s){P.callback=null,O=P.priorityLevel;var u=s(P.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?P.callback=u:P===k(_)&&D(_),F(n)}else D(_);P=k(_)}if(null!==P)var c=!0;else{var l=k(A);null!==l&&i(V,l.startTime-n),c=!1}return c}finally{P=null,O=r,R=!1}}function B(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var q=s;t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=O;O=e;try{return t()}finally{O=n}},t.unstable_next=function(e){switch(O){case 1:case 2:case 3:var t=3;break;default:t=O}var n=O;O=t;try{return e()}finally{O=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();if("object"===typeof a&&null!==a){var u=a.delay;u="number"===typeof u&&0<u?s+u:s,a="number"===typeof a.timeout?a.timeout:B(e)}else a=B(e),u=s;return e={id:x++,callback:n,priorityLevel:e,startTime:u,expirationTime:a=u+a,sortIndex:-1},u>s?(e.sortIndex=u,I(A,e),null===k(_)&&e===k(A)&&(L?o():L=!0,i(V,u-s))):(e.sortIndex=a,I(_,e),M||R||(M=!0,r(U))),e},t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_wrapCallback=function(e){var t=O;return function(){var n=O;O=t;try{return e.apply(this,arguments)}finally{O=n}}},t.unstable_getCurrentPriorityLevel=function(){return O},t.unstable_shouldYield=function(){var e=t.unstable_now();F(e);var n=k(_);return n!==P&&null!==P&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<P.expirationTime||a()},t.unstable_requestPaint=q,t.unstable_continueExecution=function(){M||R||(M=!0,r(U))},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return k(_)},t.unstable_Profiling=null},,function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),a=new D(r||[]);return o._invoke=function(e,t,n){var r=l;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return _()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var u=c(e,t,n);if("normal"===u.type){if(r=n.done?d:h,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}e.wrap=u;var l="suspendedStart",h="suspendedYield",f="executing",d="completed",p={};function m(){}function y(){}function g(){}var v={};v[o]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(N([])));w&&w!==n&&r.call(w,o)&&(v=w);var T=g.prototype=m.prototype=Object.create(v);function E(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function S(e){var t;this._invoke=function(n,i){function o(){return new Promise((function(t,o){!function t(n,i,o,a){var s=c(e[n],e,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"===typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then((function(e){t("next",e,o,a)}),(function(e){t("throw",e,o,a)})):Promise.resolve(l).then((function(e){u.value=e,o(u)}),(function(e){return t("throw",e,o,a)}))}a(s.arg)}(n,i,t,o)}))}return t=t?t.then(o,o):o()}}function C(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=c(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function N(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:_}}function _(){return{value:t,done:!0}}return y.prototype=T.constructor=g,g.constructor=y,g[s]=y.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},E(S.prototype),S.prototype[a]=function(){return this},e.AsyncIterator=S,e.async=function(t,n,r,i){var o=new S(u(t,n,r,i));return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(T),T[s]="Generator",T[o]=function(){return this},T.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=n(13),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),a="[DEFAULT]",s=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(e){void 0===e&&(e=a);var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.Deferred;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService(t);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=r.__assign({identifier:a,optional:!1},e),n=t.identifier,i=t.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(u){if(i)return null;throw u}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService(a)}catch(f){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=r.__read(o.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService(l);c.resolve(h)}catch(f){}}}catch(d){t={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.clearInstance=function(e){void 0===e&&(e=a),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,function(e){return e===a?void 0:e}(e)),this.instances.set(e,t)),t||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:a:e},e}();var u=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();t.Component=o,t.ComponentContainer=u,t.Provider=s},function(e,t,n){"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}n.r(t),n.d(t,"LogLevel",(function(){return i})),n.d(t,"Logger",(function(){return u})),n.d(t,"setLogLevel",(function(){return c}));var i,o=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));var a=i.INFO,s=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(t<e.logLevel)){var a=(new Date).toISOString();switch(t){case i.DEBUG:case i.VERBOSE:console.log.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.INFO:console.info.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.WARN:console.warn.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.ERROR:console.error.apply(console,r(["["+a+"]  "+e.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},u=function(){function e(e){this.name=e,this._logLevel=a,this._logHandler=s,o.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.ERROR],e))},e}();function c(e){o.forEach((function(t){t.logLevel=e}))}},function(e,t,n){(function(e,t){!function(n){"use strict";try{(function(){n=n&&n.hasOwnProperty("default")?n.default:n;var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o,a,s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function u(e,t,n,r){return new(n=n||Promise)((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function c(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function l(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function h(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function f(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString();switch(t){case o.DEBUG:case o.VERBOSE:console.log.apply(console,h(["["+i+"]  "+e.name+":"],n));break;case o.INFO:console.info.apply(console,h(["["+i+"]  "+e.name+":"],n));break;case o.WARN:console.warn.apply(console,h(["["+i+"]  "+e.name+":"],n));break;case o.ERROR:console.error.apply(console,h(["["+i+"]  "+e.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}}(a=o=o||{})[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT";var d=o.INFO,p=(Object.defineProperty(m.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(m.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),m.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,h([this,o.DEBUG],e))},m.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,h([this,o.VERBOSE],e))},m.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,h([this,o.INFO],e))},m.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,h([this,o.WARN],e))},m.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,h([this,o.ERROR],e))},m);function m(e){this.name=e,this._logLevel=d,this._logHandler=f}function y(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var g,v=(i(b,g=Error),b);function b(e,t){var n=g.call(this,t)||this;return n.code=e,n.name="FirebaseError",Object.setPrototypeOf(n,b.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,w.prototype.create),n}var w=(T.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?function(e,t){return e.replace(E,(function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"}))}(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new v(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},T);function T(e,t,n){this.service=e,this.serviceName=t,this.errors=n}var E=/\{\$([^}]+)}/g,S=(C.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},C.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},C.prototype.setServiceProps=function(e){return this.serviceProps=e,this},C);function C(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var I,k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{},D=D||{},N=k;function _(e){return"string"==typeof e}function A(e){return"number"==typeof e}function x(e,t){e=e.split("."),t=t||N;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function P(){}function O(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function R(e){return"array"==O(e)}function M(e){var t=O(e);return"array"==t||"object"==t&&"number"==typeof e.length}function L(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var F="closure_uid_"+(1e9*Math.random()>>>0),V=0;function U(e,t,n){return e.call.apply(e.bind,arguments)}function B(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function q(e,t,n){return(q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?U:B).apply(null,arguments)}function j(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var z=Date.now||function(){return+new Date};function W(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,(e.prototype.constructor=e).xb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function K(){this.j=this.j,this.i=this.i}K.prototype.j=!1,K.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[F]||(this[F]=++V))},K.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Q=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(_(e))return _(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},G=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=_(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function H(e){return Array.prototype.concat.apply([],arguments)}function Y(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function X(e){return/^[\s\xa0]*$/.test(e)}var J,$=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Z(e,t){return-1!=e.indexOf(t)}function ee(e,t){return e<t?-1:t<e?1:0}e:{var te=N.navigator;if(te){var ne=te.userAgent;if(ne){J=ne;break e}}J=""}function re(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function ie(e){var t,n={};for(t in e)n[t]=e[t];return n}var oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<oe.length;o++)n=oe[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function se(e){return se[" "](e),e}se[" "]=P;var ue,ce,le=Z(J,"Opera"),he=Z(J,"Trident")||Z(J,"MSIE"),fe=Z(J,"Edge"),de=fe||he,pe=Z(J,"Gecko")&&!(Z(J.toLowerCase(),"webkit")&&!Z(J,"Edge"))&&!(Z(J,"Trident")||Z(J,"MSIE"))&&!Z(J,"Edge"),me=Z(J.toLowerCase(),"webkit")&&!Z(J,"Edge");function ye(){var e=N.document;return e?e.documentMode:void 0}e:{var ge="",ve=(ce=J,pe?/rv:([^\);]+)(\)|;)/.exec(ce):fe?/Edge\/([\d\.]+)/.exec(ce):he?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ce):me?/WebKit\/(\S+)/.exec(ce):le?/(?:Version)[ \/]?(\S+)/.exec(ce):void 0);if(ve&&(ge=ve?ve[1]:""),he){var be=ye();if(null!=be&&be>parseFloat(ge)){ue=String(be);break e}}ue=ge}var we,Te={};function Ee(e){return function(t,n){var r=Te;return Object.prototype.hasOwnProperty.call(r,t)?r[t]:r[t]=function(){for(var t=0,n=$(String(ue)).split("."),r=$(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=ee(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ee(0==a[2].length,0==s[2].length)||ee(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}()}(e)}var Se=N.document;we=Se&&he?ye()||("CSS1Compat"==Se.compatMode?parseInt(ue,10):5):void 0;var Ce=!he||9<=Number(we),Ie=he&&!Ee("9"),ke=function(){if(!N.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{N.addEventListener("test",P,t),N.removeEventListener("test",P,t)}catch(e){}return e}();function De(e,t){this.type=e,this.a=this.target=t,this.Ia=!0}function Ne(e,t){if(De.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(pe){e:{try{se(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=_(e.pointerType)?e.pointerType:_e[e.pointerType]||"",(this.c=e).defaultPrevented&&this.b()}}De.prototype.b=function(){this.Ia=!1},W(Ne,De);var _e={2:"touch",3:"pen",4:"mouse"};Ne.prototype.b=function(){Ne.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Ie)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}};var Ae="closure_listenable_"+(1e6*Math.random()|0),xe=0;function Pe(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++xe,this.X=this.Z=!1}function Oe(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function Re(e){this.src=e,this.a={},this.b=0}function Me(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=Q(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Oe(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function Le(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}Re.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=Le(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new Pe(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var Fe="closure_lm_"+(1e6*Math.random()|0),Ve={};function Ue(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(R(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=Ge(r),t&&t[Ae]?t.Aa(n,r,L(i)?!!i.capture:!!i,o):Be(t,n,r,!0,i,o)}(e,t,n,r,i);if(R(t)){for(var o=0;o<t.length;o++)Ue(e,t[o],n,r,i);return null}return n=Ge(n),e&&e[Ae]?e.za(t,n,L(r)?!!r.capture:!!r,i):Be(e,t,n,!1,r,i)}function Be(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=L(i)?!!i.capture:!!i;if(a&&!Ce)return null;var s=Ke(e);if(s||(e[Fe]=s=new Re(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=We,t=Ce?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),(n.proxy=r).src=e,r.listener=n,e.addEventListener)ke||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(je(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function qe(e){if(!A(e)&&e&&!e.X){var t=e.src;if(t&&t[Ae])Me(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(je(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ke(t))?(Me(n,e),0==n.b&&(n.src=null,t[Fe]=null)):Oe(e)}}}function je(e){return e in Ve?Ve[e]:Ve[e]="on"+e}function ze(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&qe(e),n.call(r,t)}function We(e,t){return!!e.X||ze(e,Ce?new Ne(t,this):t=new Ne(t||x("window.event"),this))}function Ke(e){return(e=e[Fe])instanceof Re?e:null}var Qe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ge(e){return"function"==O(e)?e:(e[Qe]||(e[Qe]=function(t){return e.handleEvent(t)}),e[Qe])}function He(){K.call(this),this.c=new Re(this),(this.J=this).B=null}function Ye(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&Me(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ia}W(He,K),He.prototype[Ae]=!0,(I=He.prototype).addEventListener=function(e,t,n,r){Ue(this,e,t,n,r)},I.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(R(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=L(i)?!!i.capture:!!i,r=Ge(r),t&&t[Ae]?(t=t.c,(n=String(n).toString())in t.a&&-1<(r=Le(a=t.a[n],r,i,o))&&(Oe(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.a[n],t.b--))):(t=t&&Ke(t))&&(n=t.a[n.toString()],t=-1,n&&(t=Le(n,r,i,o)),(r=-1<t?n[t]:null)&&qe(r))}(this,e,t,n,r)},I.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(_(e))e=new De(e,n);else if(e instanceof De)e.target=e.target||n;else{var i=e;ae(e=new De(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=Ye(a,r,!0,e)&&i}if(i=Ye(a=e.a=n,r,!0,e)&&i,i=Ye(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Ye(a=e.a=t[o],r,!1,e)&&i;return i},I.G=function(){if(He.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)Oe(n[r]);delete t.a[e],t.b--}}this.B=null},I.za=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},I.Aa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Xe=N.JSON.stringify;function Je(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function $e(){this.b=this.a=null}Je.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var Ze,et=new Je((function(){return new tt}),(function(e){e.reset()}));function tt(){this.next=this.b=this.a=null}function nt(e){N.setTimeout((function(){throw e}),0)}function rt(e,t){Ze||function(){var e=N.Promise.resolve(void 0);Ze=function(){e.then(at)}}(),it||(Ze(),it=!0),ot.add(e,t)}$e.prototype.add=function(e,t){var n=et.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},tt.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null};var it=!(tt.prototype.reset=function(){this.next=this.b=this.a=null}),ot=new $e;function at(){for(var e;r=n=void 0,r=null,(n=ot).a&&(r=n.a,n.a=n.a.next,n.a||(n.b=null),r.next=null),e=r;){try{e.a.call(e.b)}catch(e){nt(e)}var t=et;t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}var n,r;it=!1}function st(e,t){He.call(this),this.b=e||1,this.a=t||N,this.f=q(this.fb,this),this.g=z()}function ut(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function ct(e,t,n){if("function"==O(e))n&&(e=q(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=q(e.handleEvent,e)}return 2147483647<Number(t)?-1:N.setTimeout(e,t||0)}function lt(e,t,n){K.call(this),this.f=null!=n?q(e,n):e,this.c=t,this.b=q(this.$a,this),this.a=[]}function ht(e){e.U=ct(e.b,e.c),e.f.apply(null,e.a)}function ft(e){K.call(this),this.b=e,this.a={}}W(st,He),(I=st.prototype).ba=!1,I.L=null,I.fb=function(){if(this.ba){var e=z()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(ut(this),this.start()))}},I.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=z())},I.G=function(){st.N.G.call(this),ut(this),delete this.a},W(lt,K),(I=lt.prototype).ea=!1,I.U=null,I.Ta=function(e){this.a=arguments,this.U?this.ea=!0:ht(this)},I.G=function(){lt.N.G.call(this),this.U&&(N.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},I.$a=function(){this.U=null,this.ea&&(this.ea=!1,ht(this))},W(ft,K);var dt=[];function pt(e,t,n,r){R(n)||(n&&(dt[0]=n.toString()),n=dt);for(var i=0;i<n.length;i++){var o=Ue(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function mt(e){re(e.a,(function(e,t){this.a.hasOwnProperty(t)&&qe(e)}),e),e.a={}}function yt(){}ft.prototype.G=function(){ft.N.G.call(this),mt(this)},ft.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gt=new He;function vt(e){De.call(this,"serverreachability",e)}function bt(e){gt.dispatchEvent(new vt(gt,e))}function wt(e){De.call(this,"statevent",e)}function Tt(e){gt.dispatchEvent(new wt(gt,e))}function Et(e){De.call(this,"timingevent",e)}function St(e,t){if("function"!=O(e))throw Error("Fn must not be null and must be a function");return N.setTimeout((function(){e()}),t)}W(vt,De),W(wt,De),W(Et,De);var Ct={NO_ERROR:0,gb:1,nb:2,mb:3,jb:4,lb:5,ob:6,La:7,TIMEOUT:8,rb:9},It={ib:"complete",vb:"success",Ma:"error",La:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",kb:"downloadprogress",wb:"uploadprogress"};function kt(){}function Dt(e){var t;return(t=e.a)||(t=e.a={}),t}function Nt(){}kt.prototype.a=null;var _t,At={OPEN:"a",hb:"b",Ma:"c",qb:"d"};function xt(){De.call(this,"d")}function Pt(){De.call(this,"c")}function Ot(){}function Rt(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new ft(this),this.O=Mt,e=de?125:void 0,this.P=new st(e),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}W(xt,De),W(Pt,De),W(Ot,kt),_t=new Ot;var Mt=45e3,Lt={},Ft={};function Vt(e,t,n){e.F=1,e.f=ln(nn(t)),e.l=n,e.H=!0,Bt(e,null)}function Ut(e,t,n,r){e.F=1,e.f=ln(nn(t)),e.l=null,e.H=n,Bt(e,r)}function Bt(e,t){e.v=z(),zt(e),e.D=nn(e.f),cn(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new lt(q(e.Ja,e,e.a),e.J)),pt(e.I,e.a,"readystatechange",e.cb),t=e.h?ie(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),bt(1)}function qt(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=jt(e,n);if(i==Ft){4==t&&(e.c=4,Tt(14),r=!1);break}if(i==Lt){e.c=4,Tt(15),r=!1;break}Ht(e,i)}4==t&&0==n.length&&(e.c=1,Tt(16),r=!1),e.b=e.b&&r,r||(Gt(e),Qt(e))}function jt(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?Ft:(n=Number(t.substring(n,r)),isNaN(n)?Lt:(r+=1)+n>t.length?Ft:(t=t.substr(r,n),e.A=r+n,t))}function zt(e){e.R=z()+e.O,Wt(e,e.O)}function Wt(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=St(q(e.ab,e),t)}function Kt(e){e.i&&(N.clearTimeout(e.i),e.i=null)}function Qt(e){e.g.Ca()||e.m||e.g.na(e)}function Gt(e){Kt(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,ut(e.P),mt(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function Ht(e,t){try{e.g.Fa(e,t),bt(4)}catch(e){}}function Yt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(M(e)||_(e))G(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(M(e)||_(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.C&&"function"==typeof e.C)return e.C();if(_(e))return e.split("");if(M(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Xt(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Xt)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Jt(e,t){Zt(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&$t(e))}function $t(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Zt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Zt(i,r=e.a[t])||(i[e.a[n++]=r]=1),t++;e.a.length=n}}function Zt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(I=Rt.prototype).setTimeout=function(e){this.O=e},I.cb=function(e){e=e.target;var t=this.B;t&&3==nr(e)?t.Ta():this.Ja(e)},I.Ja=function(e){try{if(e==this.a)e:{var t=nr(this.a),n=this.a.ya(),r=this.a.T();if(!(t<3||3==t&&!de&&!this.a.aa())){this.m||4!=t||7==n||bt(8==n||r<=0?3:2),Kt(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var a=rr(this.a,"X-HTTP-Initial-Response");if(a&&!X(a)){var s=a;break t}}s=null}if(!s){this.b=!1,this.c=3,Tt(12),Gt(this),Qt(this);break e}this.s=!0,Ht(this,s)}this.H?(qt(this,t,o),de&&this.b&&3==t&&(pt(this.I,this.P,"tick",this.bb),this.P.start())):Ht(this,o),4==t&&Gt(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,zt(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Tt(12)):(this.c=0,Tt(13)),Gt(this),Qt(this)}}}catch(e){}},I.bb=function(){if(this.a){var e=nr(this.a),t=this.a.aa();this.A<t.length&&(Kt(this),qt(this,e,t),this.b&&4!=e&&zt(this))}},I.cancel=function(){this.m=!0,Gt(this)},I.ab=function(){this.i=null;var e=z();0<=e-this.R?(2!=this.F&&(bt(3),Tt(17)),Gt(this),this.c=2,Qt(this)):Wt(this,this.R-e)},(I=Xt.prototype).C=function(){$t(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},I.K=function(){return $t(this),this.a.concat()},I.get=function(e,t){return Zt(this.b,e)?this.b[e]:t},I.set=function(e,t){Zt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},I.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var en=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function tn(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof tn?(this.h=void 0!==t?t:e.h,rn(this,e.f),this.j=e.j,on(this,e.b),an(this,e.i),this.a=e.a,sn(this,Cn(e.c)),this.g=e.g):e&&(n=String(e).match(en))?(this.h=!!t,rn(this,n[1]||"",!0),this.j=hn(n[2]||""),on(this,n[3]||"",!0),an(this,n[4]),this.a=hn(n[5]||"",!0),sn(this,n[6]||"",!0),this.g=hn(n[7]||"")):(this.h=!!t,this.c=new bn(null,this.h))}function nn(e){return new tn(e)}function rn(e,t,n){e.f=n?hn(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function on(e,t,n){e.b=n?hn(t,!0):t}function an(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.i=t}else e.i=null}function sn(e,t,n){t instanceof bn?(e.c=t,function(e,t){t&&!e.f&&(wn(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Tn(this,t),Sn(this,n,e))}),e)),e.f=t}(e.c,e.h)):(n||(t=fn(t,gn)),e.c=new bn(t,e.h))}function un(e,t,n){e.c.set(t,n)}function cn(e,t,n){R(n)||(n=[String(n)]),Sn(e.c,t,n)}function ln(e){return un(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^z()).toString(36)),e}function hn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function fn(e,t,n){return _(e)?(e=encodeURI(e).replace(t,dn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function dn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}tn.prototype.toString=function(){var e=[],t=this.f;t&&e.push(fn(t,pn,!0),":");var n=this.b;return!n&&"file"!=t||(e.push("//"),(t=this.j)&&e.push(fn(t,pn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(fn(n,"/"==n.charAt(0)?yn:mn,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",fn(n,vn)),e.join("")},tn.prototype.resolve=function(e){var t=nn(this),n=!!e.f;n?rn(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?on(t,e.b):n=null!=e.i;var r=e.a;if(n)an(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(Z(i,"./")||Z(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?sn(t,Cn(e.c)):n=!!e.g,n&&(t.g=e.g),t};var pn=/[#\/\?@]/g,mn=/[#\?:]/g,yn=/[#\?]/g,gn=/[#\?@]/g,vn=/#/g;function bn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function wn(e){e.a||(e.a=new Xt,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Tn(e,t){wn(e),t=In(e,t),Zt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Jt(e.a,t))}function En(e,t){return wn(e),t=In(e,t),Zt(e.a.b,t)}function Sn(e,t,n){Tn(e,t),0<n.length&&(e.c=null,e.a.set(In(e,t),Y(n)),e.b+=n.length)}function Cn(e){var t=new bn;return t.c=e.c,e.a&&(t.a=new Xt(e.a),t.b=e.b),t}function In(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function kn(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function Dn(e){var t=e.a.F.a;if(null!=t)Tt(4),t?(Tt(10),mr(e.a,e,!1)):(Tt(11),mr(e.a,e,!0));else{e.b=new Rt(e,void 0,void 0),e.b.h=e.h,t=wr(t=e.a,t.Y()?e.f:null,e.i),Tt(4),cn(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&un(t,n,r),Ut(e.b,t,!1,e.f)}}function Nn(){this.a=this.b=null}function _n(){this.a=new Xt}function An(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[F]||(e[F]=++V)):t.charAt(0)+e}function xn(e,t){this.b=e,this.a=t}function Pn(e){this.g=e||On,e=N.PerformanceNavigationTiming?0<(e=N.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(N.ka&&N.ka.Da&&N.ka.Da()&&N.ka.Da().yb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new _n),this.b=null,this.c=[]}(I=bn.prototype).add=function(e,t){wn(this),this.c=null,e=In(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},I.forEach=function(e,t){wn(this),this.a.forEach((function(n,r){G(n,(function(n){e.call(t,n,r,this)}),this)}),this)},I.K=function(){wn(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},I.C=function(e){wn(this);var t=[];if(_(e))En(this,e)&&(t=H(t,this.a.get(In(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=H(t,e[n])}return t},I.set=function(e,t){return wn(this),this.c=null,En(this,e=In(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},I.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},I.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},W((function(){}),(function(){})),(I=kn.prototype).M=null,I.$=function(e){return this.a.$(e)},I.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},I.Ca=function(){return!1},I.Fa=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=rr(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=rr(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(e){return(t=this.a).m=this.c,void vr(t,2)}this.f=r[0]}else(t=this.a).m=this.c,vr(t,2)}else 1==this.M&&(this.g?Tt(6):"11111"==t?(Tt(5),this.g=!0,(!he||10<=Number(we))&&(this.c=200,this.b.cancel(),Tt(11),mr(this.a,this,!0))):(Tt(7),this.g=!1))},I.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,Dn(this)):1==this.M&&(this.g?(Tt(11),mr(this.a,this,!0)):(Tt(10),mr(this.a,this,!1)));else{0==this.M?Tt(8):1==this.M&&Tt(9);var e=this.a;e.m=this.c,vr(e,2)}},I.Y=function(){return this.a.Y()},I.ma=function(){return this.a.ma()},_n.prototype.add=function(e){this.a.set(An(e),e)},_n.prototype.C=function(){return this.a.C()};var On=10;function Rn(e,t){!e.a&&(Z(t,"spdy")||Z(t,"quic")||Z(t,"h2"))&&(e.f=e.g,e.a=new _n,e.b&&(Vn(e,e.b),e.b=null))}function Mn(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function Ln(e){return e.b?1:e.a?e.a.a.c:0}function Fn(e,t){return e.b?e.b==t:!!e.a&&(t=An(t),Zt(e.a.a.b,t))}function Vn(e,t){e.a?e.a.add(t):e.b=t}function Un(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=An(t),n=Zt(e.a.a.b,n)),n&&Jt(e.a.a,An(t)))}function Bn(e){if(null!=e.b)return e.c.concat(e.b.j);if(null==e.a||0==e.a.a.c)return Y(e.c);var t=e.c;return G(e.a.C(),(function(e){t=t.concat(e.j)})),t}function qn(){}function jn(){this.a=new qn}function zn(e,t,n){var r=n||"";try{Yt(e,(function(e,n){var i=e;L(e)&&(i=Xe(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Wn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}Pn.prototype.cancel=function(){this.c=Bn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(G(this.a.C(),(function(e){e.cancel()})),function(e){e.b={},e.a.length=0,e.c=0}(this.a.a))},qn.prototype.stringify=function(e){return N.JSON.stringify(e,void 0)},qn.prototype.parse=function(e){return N.JSON.parse(e,void 0)};var Kn=N.JSON.parse;function Qn(e){He.call(this),this.headers=new Xt,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Gn,this.D=this.F=!1}W(Qn,He);var Gn="",Hn=/^https?$/i,Yn=["POST","PUT"];function Xn(e){return"content-type"==e.toLowerCase()}function Jn(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,$n(e),er(e)}function $n(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Zn(e){if(e.b&&void 0!==D&&(!e.s[1]||4!=nr(e)||2!=e.T()))if(e.l&&4==nr(e))ct(e.Ea,0,e);else if(e.dispatchEvent("readystatechange"),4==nr(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.A).match(en)[1]||null;if(!o&&N.self&&N.self.location){var a=N.self.location.protocol;o=a.substr(0,a.length-1)}i=!Hn.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{e.h=6;try{var s=2<nr(e)?e.a.statusText:""}catch(e){s=""}e.f=s+" ["+e.T()+"]",$n(e)}}finally{er(e)}}}function er(e,t){if(e.a){tr(e);var n=e.a,r=e.s[0]?P:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){}}}function tr(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(N.clearTimeout(e.m),e.m=null)}function nr(e){return e.a?e.a.readyState:0}function rr(e,t){return e.a?e.a.getResponseHeader(t):null}function ir(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=function(e){var t="";return re(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),_(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=e.indexOf("#"))<0&&(n=e.length),(r=e.indexOf("?"))<0||n<r){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return un(e,t,n),e}function or(e){this.f=[],this.F=new Nn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!x("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=x("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Ra=x("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Pa=x("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=x("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.Ka=e&&e.zb||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new Pn(e&&e.concurrentRequestLimit),this.ja=new jn,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function ar(e){if(sr(e),3==e.u){var t=e.P++,n=nn(e.B);un(n,"SID",e.H),un(n,"RID",t),un(n,"TYPE","terminate"),hr(e,n),(t=new Rt(e,t,void 0)).F=2,t.f=ln(nn(n)),n=!1,N.navigator&&N.navigator.sendBeacon&&(n=N.navigator.sendBeacon(t.f.toString(),"")),!n&&N.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=z(),zt(t)}br(e)}function sr(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(N.clearTimeout(e.l),e.l=null),yr(e),e.b.cancel(),e.h&&(A(e.h)&&N.clearTimeout(e.h),e.h=null)}function ur(e,t){e.f.push(new xn(e.Qa++,t)),3==e.u&&cr(e)}function cr(e){Mn(e.b)||e.h||(e.h=!0,rt(e.Ha,e),e.A=0)}function lr(e,t){var n;n=t?t.W:e.P++;var r=nn(e.B);un(r,"SID",e.H),un(r,"RID",n),un(r,"AID",e.O),hr(e,r),e.g&&e.i&&ir(r,e.g,e.i),n=new Rt(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=fr(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),Vn(e.b,n),Vt(n,r,t)}function hr(e,t){e.c&&Yt({},(function(e,n){un(t,n,e)}))}function fr(e,t,n){n=Math.min(e.f.length,n);var r=e.c?q(e.c.Sa,e.c,e):null;e:for(var i=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),s=!1;else try{zn(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function dr(e){e.a||e.l||(e.S=1,rt(e.Ga,e),e.v=0)}function pr(e){return!(e.a||e.l||3<=e.v)&&(e.S++,e.l=St(q(e.Ga,e),gr(e,e.v)),e.v++,!0)}function mr(e,t,n){var r=t.l;r&&Rn(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=wr(e,null,e.ha),cr(e)}function yr(e){null!=e.s&&(N.clearTimeout(e.s),e.s=null)}function gr(e,t){var n=e.Na+Math.floor(Math.random()*e.Ra);return e.ma()||(n*=2),n*t}function vr(e,t){if(2==t){var n=null;e.c&&(n=null);var r=q(e.eb,e);n||(n=new tn("//www.google.com/images/cleardot.gif"),N.location&&"http"==N.location.protocol||rn(n,"https"),ln(n)),function(e,t){var n=new yt;if(N.Image){var r=new Image;r.onload=j(Wn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=j(Wn,n,r,"TestLoadImage: error",!1,t),r.onabort=j(Wn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=j(Wn,n,r,"TestLoadImage: timeout",!1,t),N.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Tt(2);e.u=0,e.c&&e.c.ta(t),br(e),sr(e)}function br(e){e.u=0,e.m=-1,e.c&&(0==Bn(e.b).length&&0==e.f.length||(e.b.c.length=0,Y(e.f),e.f.length=0),e.c.sa())}function wr(e,t,n){var r=function(e){return e instanceof tn?nn(e):new tn(e,void 0)}(n);if(""!=r.b)t&&on(r,t+"."+r.b),an(r,r.i);else{var i,o=N.location;i=t?t+"."+o.hostname:o.hostname,r=function(e,t,n,r){var i=new tn(null,void 0);return e&&rn(i,e),t&&on(i,t),n&&an(i,n),r&&(i.a=r),i}(o.protocol,i,+o.port,n)}return e.V&&re(e.V,(function(e,t){un(r,t,e)})),t=e.j,n=e.I,t&&n&&un(r,t,n),un(r,"VER",e.wa),hr(e,r),r}function Tr(){}function Er(){if(he&&!(10<=Number(we)))throw Error("Environmental error: no available transport.")}function Sr(e,t){He.call(this),this.a=new or(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=e,n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?t=i:((r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i)}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!X(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!X(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&t in(e=this.b)&&delete e[t]),this.f=new kr(this)}function Cr(e){xt.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function Ir(){Pt.call(this),this.status=1}function kr(e){this.a=e}(I=Qn.prototype).ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Dt(this.H):Dt(_t),this.a.onreadystatechange=q(this.Ea,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(e){return void Jn(this,e)}e=n||"";var i=new Xt(this.headers);r&&Yt(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Xn,n=e.length,r=_(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return t<0?null:_(e)?e.charAt(t):e[t]}(i.K()),n=N.FormData&&e instanceof N.FormData,0<=Q(Yn,t)&&!r&&!n&&i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{tr(this),0<this.o&&((this.D=function(e){return he&&Ee(9)&&A(e.timeout)&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=q(this.Ba,this)):this.m=ct(this.Ba,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){Jn(this,e)}},I.Ba=function(){void 0!==D&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},I.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),er(this))},I.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),er(this,!0)),Qn.N.G.call(this)},I.Ea=function(){this.j||(this.w||this.l||this.g?Zn(this):this.Za())},I.Za=function(){Zn(this)},I.T=function(){try{return 2<nr(this)?this.a.status:-1}catch(i){return-1}},I.aa=function(){try{return this.a?this.a.responseText:""}catch(i){return""}},I.Ua=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Kn(t)}},I.ya=function(){return this.h},I.Xa=function(){return _(this.f)?this.f:String(this.f)},(I=or.prototype).wa=8,I.u=1,I.Ca=function(){return 0==this.u},I.Ha=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random());var t,n=new Rt(this,e=this.P++,void 0),r=this.i;if(this.J&&(r?ae(r=ie(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var i=t=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&_(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.f.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=fr(this,n,t),un(i=nn(this.B),"RID",e),un(i,"CVER",22),this.o&&this.j&&un(i,"X-HTTP-Session-Id",this.j),hr(this,i),this.g&&r&&ir(i,this.g,r),Vn(this.b,n),this.W?(un(i,"$req",t),un(i,"SID","null"),n.S=!0,Vt(n,i,null)):Vt(n,i,t),this.u=2}}else 3==this.u&&(e?lr(this,e):0==this.f.length||Mn(this.b)||lr(this))},I.Ga=function(){this.l=null,this.a=new Rt(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=nn(this.pa);un(e,"RID","rpc"),un(e,"SID",this.H),un(e,"CI",this.ia?"0":"1"),un(e,"AID",this.O),hr(this,e),un(e,"TYPE","xmlhttp"),this.g&&this.i&&ir(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),Ut(this.a,e,!0,this.ga)},I.Fa=function(e,t){if(0!=this.u&&(this.a==e||Fn(this.b,e)))if(this.m=e.o,!e.s&&Fn(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(e){n=null}if(R(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;yr(this),this.a.cancel(),this.a=null}pr(this),Tt(18)}}else this.ra=t[1],0<this.ra-this.O&&t[2]<37500&&this.ia&&0==this.v&&!this.s&&(this.s=St(q(this.Ya,this),6e3));if(Ln(this.b)<=1&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else vr(this,11)}else if(!e.s&&this.a!=e||yr(this),!X(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&A(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((i=rr(r,"X-Client-Wire-Protocol"))&&Rn(this.b,i),this.j&&(r=rr(r,"X-HTTP-Session-Id")))&&(this.I=r,un(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=wr(this,this.Y()?this.ga:null,this.ha),r.s?(Un(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Kt(r),zt(r)),this.a=r):dr(this),0<this.f.length&&cr(this)}else"stop"!=r[0]&&"close"!=r[0]||vr(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?vr(this,7):ar(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},I.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,pr(this),Tt(19))},I.na=function(e){var t=null;if(this.a==e){yr(this),this.a=null;var n=2}else{if(!Fn(this.b,e))return;t=e.j,Un(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=z()-e.v,gt.dispatchEvent(new Et(gt,e.l?e.l.length:0,t,this.A)),cr(this)):dr(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&function(e,t){return!(Ln(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.f=t.j.concat(e.f),!0):!(1==e.u||2==e.u||e.A>=(e.Oa?0:e.Pa))&&(e.h=St(q(e.Ha,e,t),gr(e,e.A)),e.A++,!0))}(this,e)||2==n&&pr(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:vr(this,5);break;case 4:vr(this,10);break;case 3:vr(this,6);break;default:vr(this,2)}}},I.eb=function(e){Tt(e?2:1)},I.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Qn(this.Ka)).F=this.R,e},I.ma=function(){return!!this.c&&!0},I.Y=function(){return this.R},(I=Tr.prototype).va=function(){},I.ua=function(){},I.ta=function(){},I.sa=function(){},I.Sa=function(){},Er.prototype.a=function(e,t){return new Sr(e,t)},W(Sr,He),(I=Sr.prototype).addEventListener=function(e,t,n,r){Sr.N.addEventListener.call(this,e,t,n,r)},I.removeEventListener=function(e,t,n,r){Sr.N.removeEventListener.call(this,e,t,n,r)},I.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;Tt(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new kn(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=ir(t,e.g,e.i)),(e=e.w).i=n,t=wr(e.a,null,e.i),Tt(3),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,Dn(e)):(cn(t,"MODE","init"),!e.a.o&&e.a.j&&cn(t,"X-HTTP-Session-Id",e.a.j),e.b=new Rt(e,void 0,void 0),e.b.h=e.h,Ut(e.b,t,!1,null),e.M=0)},I.close=function(){ar(this.a)},I.Wa=function(e){if(_(e)){var t={};t.__data__=e,ur(this.a,t)}else this.h?((t={}).__data__=Xe(e),ur(this.a,t)):ur(this.a,e)},I.G=function(){this.a.c=null,delete this.f,ar(this.a),delete this.a,Sr.N.G.call(this)},W(Cr,xt),W(Ir,Pt),W(kr,Tr),kr.prototype.va=function(){this.a.dispatchEvent("a")},kr.prototype.ua=function(e){this.a.dispatchEvent(new Cr(e))},kr.prototype.ta=function(e){this.a.dispatchEvent(new Ir(e))},kr.prototype.sa=function(){this.a.dispatchEvent("b")};var Dr=j((function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r}),Er);Er.prototype.createWebChannel=Er.prototype.a,Sr.prototype.send=Sr.prototype.Wa,Sr.prototype.open=Sr.prototype.Va,Sr.prototype.close=Sr.prototype.close,Ct.NO_ERROR=0,Ct.TIMEOUT=8,Ct.HTTP_ERROR=6,It.COMPLETE="complete",(Nt.EventType=At).OPEN="a",At.CLOSE="b",At.ERROR="c",At.MESSAGE="d",He.prototype.listen=He.prototype.za,Qn.prototype.listenOnce=Qn.prototype.Aa,Qn.prototype.getLastError=Qn.prototype.Xa,Qn.prototype.getLastErrorCode=Qn.prototype.ya,Qn.prototype.getStatus=Qn.prototype.T,Qn.prototype.getResponseJson=Qn.prototype.Ua,Qn.prototype.getResponseText=Qn.prototype.aa,Qn.prototype.send=Qn.prototype.ca;var Nr,_r,Ar={createWebChannelTransport:Dr,ErrorCode:Ct,EventType:It,WebChannel:Nt,XhrIo:Qn},xr=Ar.createWebChannelTransport,Pr=Ar.ErrorCode,Or=Ar.EventType,Rr=Ar.WebChannel,Mr=Ar.XhrIo,Lr=n.SDK_VERSION,Fr=new p("@firebase/firestore");function Vr(){return Fr.logLevel===o.DEBUG?Nr.DEBUG:Fr.logLevel===o.SILENT?Nr.SILENT:Nr.ERROR}function Ur(e){switch(e){case Nr.DEBUG:Fr.logLevel=o.DEBUG;break;case Nr.ERROR:Fr.logLevel=o.ERROR;break;case Nr.SILENT:Fr.logLevel=o.SILENT;break;default:Fr.error("Firestore ("+Lr+"): Invalid value passed to `setLogLevel`")}}function Br(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(Fr.logLevel<=o.DEBUG){var i=n.map(jr);Fr.debug.apply(Fr,l(["Firestore ("+Lr+") ["+e+"]: "+t],i))}}function qr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Fr.logLevel<=o.ERROR){var r=t.map(jr);Fr.error.apply(Fr,l(["Firestore ("+Lr+"): "+e],r))}}function jr(e){if("string"==typeof e)return e;var t=Kr.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function zr(e){var t="FIRESTORE ("+Lr+") INTERNAL ASSERTION FAILED: "+e;throw qr(t),new Error(t)}function Wr(e,t){e||zr(t)}(_r=Nr=Nr||{})[_r.DEBUG=0]="DEBUG",_r[_r.ERROR=1]="ERROR",_r[_r.SILENT=2]="SILENT";var Kr=(Qr.setPlatform=function(e){Qr.platform&&zr("Platform already defined"),Qr.platform=e},Qr.getPlatform=function(){return Qr.platform||zr("Platform not set"),Qr.platform},Qr);function Qr(){}function Gr(){return Kr.getPlatform().emptyByteString}var Hr,Yr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Xr=(i(Jr,Hr=Error),Jr);function Jr(e,t){var n=Hr.call(this,t)||this;return n.code=e,n.message=t,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function $r(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new Xr(Yr.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function Zr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ei(e,t){return void 0!==e?e:t}function ti(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function ni(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ri(e){for(var t in Wr(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ii(e,t){if(0!==t.length)throw new Xr(Yr.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+Ti(t.length,"argument")+".")}function oi(e,t,n){if(t.length!==n)throw new Xr(Yr.INVALID_ARGUMENT,"Function "+e+"() requires "+Ti(n,"argument")+", but was called with "+Ti(t.length,"argument")+".")}function ai(e,t,n){if(t.length<n)throw new Xr(Yr.INVALID_ARGUMENT,"Function "+e+"() requires at least "+Ti(n,"argument")+", but was called with "+Ti(t.length,"argument")+".")}function si(e,t,n,r){if(t.length<n||t.length>r)throw new Xr(Yr.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+Ti(t.length,"argument")+".")}function ui(e,t,n,r){di(e,t,wi(n)+" argument",r)}function ci(e,t,n,r){void 0!==r&&ui(e,t,n,r)}function li(e,t,n,r){di(e,t,n+" option",r)}function hi(e,t,n,r){void 0!==r&&li(e,t,n,r)}function fi(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(mi(u))}var c=mi(r);throw new Xr(Yr.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function di(e,t,n,r){if(!("object"===t?pi(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=mi(r);throw new Xr(Yr.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function pi(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function mi(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":zr("Unknown wrong type: "+typeof e);if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}function yi(e,t,n){if(void 0===n)throw new Xr(Yr.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+wi(t)+" argument, but it was undefined.")}function gi(e,t,n){ni(t,(function(t,r){if(n.indexOf(t)<0)throw new Xr(Yr.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))}))}function vi(e,t,n,r){var i=mi(r);return new Xr(Yr.INVALID_ARGUMENT,"Function "+e+"() requires its "+wi(n)+" argument to be a "+t+", but it was: "+i)}function bi(e,t,n){if(n<=0)throw new Xr(Yr.INVALID_ARGUMENT,'Function "'+e+'()" requires its '+wi(t)+" argument to be a positive number, but it was: "+n+".")}function wi(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function Ti(e,t){return e+" "+t+(1===e?"":"s")}var Ei=(Si.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return Wr(20===t.length,"Invalid auto ID: "+t),t},Si);function Si(){}function Ci(e,t){return e<t?-1:t<e?1:0}function Ii(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function ki(e){return e+"\0"}function Di(){if("undefined"==typeof Uint8Array)throw new Xr(Yr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ni(){if(!Kr.getPlatform().base64Available)throw new Xr(Yr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var _i=(Ai.fromBase64String=function(e){oi("Blob.fromBase64String",arguments,1),ui("Blob.fromBase64String","string",1,e),Ni();try{return new Ai(Kr.getPlatform().atob(e))}catch(e){throw new Xr(Yr.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},Ai.fromUint8Array=function(e){if(oi("Blob.fromUint8Array",arguments,1),Di(),!(e instanceof Uint8Array))throw vi("Blob.fromUint8Array","Uint8Array",1,e);return new Ai(Array.prototype.map.call(e,(function(e){return String.fromCharCode(e)})).join(""))},Ai.prototype.toBase64=function(){return oi("Blob.toBase64",arguments,0),Ni(),Kr.getPlatform().btoa(this._binaryString)},Ai.prototype.toUint8Array=function(){oi("Blob.toUint8Array",arguments,0),Di();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},Ai.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},Ai.prototype.isEqual=function(e){return this._binaryString===e._binaryString},Ai.prototype._compareTo=function(e){return Ci(this._binaryString,e._binaryString)},Ai);function Ai(e){Ni(),this._binaryString=e}var xi=$r(_i,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),Pi=function(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i},Oi="(default)",Ri=(Object.defineProperty(Mi.prototype,"isDefaultDatabase",{get:function(){return this.database===Oi},enumerable:!0,configurable:!0}),Mi.prototype.isEqual=function(e){return e instanceof Mi&&e.projectId===this.projectId&&e.database===this.database},Mi.prototype.compareTo=function(e){return Ci(this.projectId,e.projectId)||Ci(this.database,e.database)},Mi);function Mi(e,t){this.projectId=e,this.database=t||Oi}var Li=(Fi.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},Fi.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},Fi.INVALID=-1,Fi);function Fi(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}var Vi="__name__",Ui=(Object.defineProperty(Bi.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),Bi.prototype.isEqual=function(e){return 0===Bi.comparator(this,e)},Bi.prototype.child=function(e){var t=this.segments.slice(this.offset,this.limit());return e instanceof Bi?e.forEach((function(e){t.push(e)})):t.push(e),this.construct(t)},Bi.prototype.limit=function(){return this.offset+this.length},Bi.prototype.popFirst=function(e){return e=void 0===e?1:e,Wr(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},Bi.prototype.popLast=function(){return Wr(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},Bi.prototype.firstSegment=function(){return Wr(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},Bi.prototype.lastSegment=function(){return this.get(this.length-1)},Bi.prototype.get=function(e){return Wr(e<this.length,"Index out of range"),this.segments[this.offset+e]},Bi.prototype.isEmpty=function(){return 0===this.length},Bi.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},Bi.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},Bi.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},Bi.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},Bi.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(o<i)return 1}return e.length<t.length?-1:e.length>t.length?1:0},Bi);function Bi(e,t,n){void 0===t?t=0:t>e.length&&zr("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&zr("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}var qi,ji=(i(zi,qi=Ui),zi.prototype.construct=function(e,t,n){return new zi(e,t,n)},zi.prototype.canonicalString=function(){return this.toArray().join("/")},zi.prototype.toString=function(){return this.canonicalString()},zi.fromString=function(e){if(0<=e.indexOf("//"))throw new Xr(Yr.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new zi(e.split("/").filter((function(e){return 0<e.length})))},zi.EMPTY_PATH=new zi([]),zi);function zi(){return null!==qi&&qi.apply(this,arguments)||this}var Wi,Ki=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Qi=(i(Gi,Wi=Ui),Gi.prototype.construct=function(e,t,n){return new Gi(e,t,n)},Gi.isValidIdentifier=function(e){return Ki.test(e)},Gi.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),Gi.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},Gi.prototype.toString=function(){return this.canonicalString()},Gi.prototype.isKeyField=function(){return 1===this.length&&this.get(0)===Vi},Gi.keyField=function(){return new Gi([Vi])},Gi.fromServerFormat=function(e){for(var t=[],n="",r=0,i=function(){if(0===n.length)throw new Xr(Yr.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");t.push(n),n=""},o=!1;r<e.length;){var a=e[r];if("\\"===a){if(r+1===e.length)throw new Xr(Yr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[r+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Xr(Yr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=s,r+=2}else"`"===a?o=!o:"."!==a||o?n+=a:i(),r++}if(i(),o)throw new Xr(Yr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gi(t)},Gi.EMPTY_PATH=new Gi([]),Gi);function Gi(){return null!==Wi&&Wi.apply(this,arguments)||this}var Hi=(Yi.prototype.hasCollectionId=function(e){return 2<=this.path.length&&this.path.get(this.path.length-2)===e},Yi.prototype.isEqual=function(e){return null!==e&&0===ji.comparator(this.path,e.path)},Yi.prototype.toString=function(){return this.path.toString()},Yi.comparator=function(e,t){return ji.comparator(e.path,t.path)},Yi.isDocumentKey=function(e){return e.length%2==0},Yi.fromSegments=function(e){return new Yi(new ji(e.slice()))},Yi.fromPathString=function(e){return new Yi(ji.fromString(e))},Yi.EMPTY=new Yi(new ji([])),Yi);function Yi(e){this.path=e,Wr(Yi.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}var Xi,Ji,$i=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};(Ji=Xi=Xi||{}).All="all",Ji.ListenStreamIdle="listen_stream_idle",Ji.ListenStreamConnectionBackoff="listen_stream_connection_backoff",Ji.WriteStreamIdle="write_stream_idle",Ji.WriteStreamConnectionBackoff="write_stream_connection_backoff",Ji.OnlineStateTimeout="online_state_timeout",Ji.ClientMetadataRefresh="client_metadata_refresh",Ji.LruGarbageCollection="lru_garbage_collection",Ji.RetryTransaction="retry_transaction";var Zi=(eo.createAndSchedule=function(e,t,n,r,i){var o=new eo(e,t,Date.now()+n,r,i);return o.start(n),o},eo.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},eo.prototype.skipDelay=function(){return this.handleDelayElapsed()},eo.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xr(Yr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},eo.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},eo.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},eo);function eo(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new $i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}var to=(Object.defineProperty(no.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),no.prototype.enqueueAndForget=function(e){this.enqueue(e)},no.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},no.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},no.prototype.enqueueAndInitiateShutdown=function(e){return u(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},no.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(e){})):this.enqueueInternal(e)},no.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then((function(){return t.operationInProgress=!0,e().catch((function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw qr("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw e}),0),e})).then((function(e){return t.operationInProgress=!1,e}))}));return this.tail=n},no.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),Wr(0<=t,"Attempted to schedule an operation with a negative delay of "+t),-1<this.timerIdsToSkip.indexOf(e)&&(t=0);var i=Zi.createAndSchedule(this,e,t,n,(function(e){return r.removeDelayedOperation(e)}));return this.delayedOperations.push(i),i},no.prototype.verifyNotFailed=function(){this.failure&&zr("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},no.prototype.verifyOperationInProgress=function(){Wr(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},no.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},no.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},no.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then((function(){Wr(e===Xi.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==Xi.All&&i.timerId===e)break}return t.drain()}))},no.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},no.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);Wr(0<=t,"Delayed operation not found."),this.delayedOperations.splice(t,1)},no);function no(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}var ro="\x01",io="\x01",oo="\x10",ao="\x11";function so(e){for(var t="",n=0;n<e.length;n++)0<t.length&&(t=co(t)),t=uo(e.get(n),t);return co(t)}function uo(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+=ro+oo;break;case ro:n+=ro+ao;break;default:n+=o}}return n}function co(e){return e+ro+io}function lo(e){var t=e.length;if(Wr(2<=t,"Invalid path "+e),2===t)return Wr(e.charAt(0)===ro&&e.charAt(1)===io,"Non-empty path "+e+" had length 2"),ji.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf(ro,o);switch((a<0||n<a)&&zr('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case io:var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case oo:i+=e.substring(o,a),i+="\0";break;case ao:i+=e.substring(o,a+1);break;default:zr('Invalid encoded resource path: "'+e+'"')}o=a+2}return new ji(r)}var ho=(fo.now=function(){return fo.fromMillis(Date.now())},fo.fromDate=function(e){return fo.fromMillis(e.getTime())},fo.fromMillis=function(e){var t=Math.floor(e/1e3);return new fo(t,1e6*(e-1e3*t))},fo.prototype.toDate=function(){return new Date(this.toMillis())},fo.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},fo.prototype._compareTo=function(e){return this.seconds===e.seconds?Ci(this.nanoseconds,e.nanoseconds):Ci(this.seconds,e.seconds)},fo.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},fo.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},fo);function fo(e,t){if(this.seconds=e,(this.nanoseconds=t)<0)throw new Xr(Yr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(1e9<=t)throw new Xr(Yr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Xr(Yr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(253402300800<=e)throw new Xr(Yr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}var po=(mo.fromMicroseconds=function(e){var t=Math.floor(e/1e6);return new mo(new ho(t,e%1e6*1e3))},mo.fromTimestamp=function(e){return new mo(e)},mo.forDeletedDoc=function(){return mo.MIN},mo.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},mo.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},mo.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},mo.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},mo.prototype.toTimestamp=function(){return this.timestamp},mo.MIN=new mo(new ho(0,0)),mo);function mo(e){this.timestamp=e}var yo=(go.prototype.insert=function(e,t){return new go(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wo.BLACK,null,null))},go.prototype.remove=function(e){return new go(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wo.BLACK,null,null))},go.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:0<n&&(t=t.right)}return null},go.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;n=r<0?n.left:(t+=n.left.size+1,n.right)}return-1},go.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(go.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),go.prototype.minKey=function(){return this.root.minKey()},go.prototype.maxKey=function(){return this.root.maxKey()},go.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},go.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},go.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},go.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},go.prototype.getIterator=function(){return new vo(this.root,null,this.comparator,!1)},go.prototype.getIteratorFrom=function(e){return new vo(this.root,e,this.comparator,!1)},go.prototype.getReverseIterator=function(){return new vo(this.root,null,this.comparator,!0)},go.prototype.getReverseIteratorFrom=function(e){return new vo(this.root,e,this.comparator,!0)},go);function go(e,t){this.comparator=e,this.root=t||wo.EMPTY}var vo=(bo.prototype.getNext=function(){Wr(0<this.nodeStack.length,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},bo.prototype.hasNext=function(){return 0<this.nodeStack.length},bo.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},bo);function bo(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}var wo=(To.prototype.copy=function(e,t,n,r,i){return new To(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},To.prototype.isEmpty=function(){return!1},To.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},To.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},To.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},To.prototype.minKey=function(){return this.min().key},To.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},To.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},To.prototype.removeMin=function(){if(this.left.isEmpty())return To.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},To.prototype.remove=function(e,t){var n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return To.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()},To.prototype.isRed=function(){return this.color},To.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},To.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},To.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},To.prototype.rotateLeft=function(){var e=this.copy(null,null,To.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},To.prototype.rotateRight=function(){var e=this.copy(null,null,To.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},To.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},To.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},To.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw zr("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw zr("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw zr("Black depths differ");return e+(this.isRed()?0:1)},To.EMPTY=null,To.RED=!0,To.BLACK=!1,To);function To(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:To.RED,this.left=null!=r?r:To.EMPTY,this.right=null!=i?i:To.EMPTY,this.size=this.left.size+1+this.right.size}var Eo=(Object.defineProperty(So.prototype,"key",{get:function(){throw zr("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(So.prototype,"value",{get:function(){throw zr("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(So.prototype,"color",{get:function(){throw zr("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(So.prototype,"left",{get:function(){throw zr("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(So.prototype,"right",{get:function(){throw zr("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),So.prototype.copy=function(e,t,n,r,i){return this},So.prototype.insert=function(e,t,n){return new wo(e,t)},So.prototype.remove=function(e,t){return this},So.prototype.isEmpty=function(){return!0},So.prototype.inorderTraversal=function(e){return!1},So.prototype.reverseTraversal=function(e){return!1},So.prototype.minKey=function(){return null},So.prototype.maxKey=function(){return null},So.prototype.isRed=function(){return!1},So.prototype.checkMaxDepth=function(){return!0},So.prototype.check=function(){return 0},So);function So(){this.size=0}wo.EMPTY=new Eo;var Co=(Io.fromMapKeys=function(e){var t=new Io(e.comparator);return e.forEach((function(e){t=t.add(e)})),t},Io.prototype.has=function(e){return null!==this.data.get(e)},Io.prototype.first=function(){return this.data.minKey()},Io.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(Io.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),Io.prototype.indexOf=function(e){return this.data.indexOf(e)},Io.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},Io.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,e[1]))return;t(r.key)}},Io.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},Io.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},Io.prototype.getIterator=function(){return new ko(this.data.getIterator())},Io.prototype.getIteratorFrom=function(e){return new ko(this.data.getIteratorFrom(e))},Io.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},Io.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},Io.prototype.isEmpty=function(){return this.data.isEmpty()},Io.prototype.unionWith=function(e){var t=this;return e.forEach((function(e){t=t.add(e)})),t},Io.prototype.isEqual=function(e){if(!(e instanceof Io))return!1;if(this.size!==e.size)return!1;for(var t=this.data.getIterator(),n=e.data.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},Io.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},Io.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},Io.prototype.copy=function(e){var t=new Io(this.comparator);return t.data=e,t},Io);function Io(e){this.comparator=e,this.data=new yo(this.comparator)}var ko=(Do.prototype.getNext=function(){return this.iter.getNext().key},Do.prototype.hasNext=function(){return this.iter.hasNext()},Do);function Do(e){this.iter=e}var No=new yo(Hi.comparator);function _o(){return No}function Ao(){return _o()}var xo=new yo(Hi.comparator);function Po(){return xo}var Oo=new yo(Hi.comparator);function Ro(){return Oo}var Mo=new Co(Hi.comparator);function Lo(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Mo,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Fo=new Co(Ci);function Vo(){return Fo}var Uo=(Bo.prototype.applyToRemoteDocument=function(e,t,n){t&&Wr(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;Wr(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},Bo.prototype.applyToLocalView=function(e,t){t&&Wr(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(e)&&(t=s.applyToLocalView(t,t,this.localWriteTime));for(var i=t,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(e)&&(t=s.applyToLocalView(t,i,this.localWriteTime))}return t},Bo.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))})),n},Bo.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Lo())},Bo.prototype.isEqual=function(e){return this.batchId===e.batchId&&Ii(this.mutations,e.mutations)&&Ii(this.baseMutations,e.baseMutations)},Bo);function Bo(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,Wr(0<(this.mutations=r).length,"Cannot create an empty mutation batch")}var qo=(jo.from=function(e,t,n,r){Wr(e.mutations.length===n.length,"Mutations sent "+e.mutations.length+" must equal results received "+n.length);for(var i=Ro(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,n[a].version);return new jo(e,t,n,r,i)},jo);function jo(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}var zo=(Wo.prototype.catch=function(e){return this.next(void 0,e)},Wo.prototype.next=function(e,t){var n=this;return this.callbackAttached&&zr("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Wo((function(r,i){n.nextCallback=function(t){n.wrapSuccess(e,t).next(r,i)},n.catchCallback=function(e){n.wrapFailure(t,e).next(r,i)}}))},Wo.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},Wo.prototype.wrapUserFunction=function(e){try{var t=e();return t instanceof Wo?t:Wo.resolve(t)}catch(e){return Wo.reject(e)}},Wo.prototype.wrapSuccess=function(e,t){return e?this.wrapUserFunction((function(){return e(t)})):Wo.resolve(t)},Wo.prototype.wrapFailure=function(e,t){return e?this.wrapUserFunction((function(){return e(t)})):Wo.reject(t)},Wo.resolve=function(e){return new Wo((function(t,n){t(e)}))},Wo.reject=function(e){return new Wo((function(t,n){n(e)}))},Wo.waitFor=function(e){return new Wo((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(e){return n(e)}))})),o=!0,i===r&&t()}))},Wo.or=function(e){for(var t=Wo.resolve(!1),n=function(e){t=t.next((function(t){return t?Wo.resolve(t):e()}))},r=0,i=e;r<i.length;r++)n(i[r]);return t},Wo.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},Wo);function Wo(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}var Ko="SimpleDb",Qo=(Go.openOrCreate=function(e,t,n){return Wr(Go.isAvailable(),"IndexedDB not supported in current environment."),Br(Ko,"Opening database:",e),new zo((function(r,i){var o=window.indexedDB.open(e,t);o.onsuccess=function(e){var t=e.target.result;r(new Go(t))},o.onblocked=function(){i(new Xr(Yr.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=function(e){var t=e.target.error;"VersionError"===t.name?i(new Xr(Yr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i(t)},o.onupgradeneeded=function(t){Br(Ko,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var r=t.target.result;n.createOrUpgrade(r,o.transaction,t.oldVersion,hu).next((function(){Br(Ko,"Database upgrade to version "+hu+" complete")}))}})).toPromise()},Go.delete=function(e){return Br(Ko,"Removing database:",e),ea(window.indexedDB.deleteDatabase(e)).toPromise()},Go.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(Go.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var e=y(),t=Go.getIOSVersion(e),n=0<t&&t<10,r=Go.getAndroidVersion(e),i=0<r&&r<4.5;return!(0<e.indexOf("MSIE ")||0<e.indexOf("Trident/")||0<e.indexOf("Edge/")||n||i)},Go.isMockPersistence=function(){var e;return"undefined"!=typeof t&&"YES"===(null===(e=Object({NODE_ENV:"production",PUBLIC_URL:""}))||void 0===e?void 0:e.USE_MOCK_PERSISTENCE)},Go.getStore=function(e,t){return e.store(t)},Go.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},Go.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},Go.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},Go.prototype.runTransaction=function(e,t,n){return u(this,void 0,void 0,(function(){var r,i,o,a,s,u;return c(this,(function(l){switch(l.label){case 0:r=e.startsWith("readonly"),i=e.endsWith("idempotent"),o=0,a=function(){var e,a,u,l;return c(this,(function(c){switch(c.label){case 0:++o,e=Xo.open(s.db,r?"readonly":"readwrite",t),c.label=1;case 1:return c.trys.push([1,3,,4]),(a=n(e).catch((function(t){return e.abort(t),zo.reject(t)})).toPromise()).catch((function(){})),[4,e.completionPromise];case 2:return c.sent(),[2,{value:a}];case 3:return u=c.sent(),l=i&&"FirebaseError"!==u.name&&o<3,Br(Ko,"Transaction failed with error: %s. Retrying: %s.",u.message,l),l?[3,4]:[2,{value:Promise.reject(u)}];case 4:return[2]}}))},s=this,l.label=1;case 1:return[5,a()];case 2:return"object"==typeof(u=l.sent())?[2,u.value]:[3,1];case 3:return[2]}}))}))},Go.prototype.close=function(){this.db.close()},Go);function Go(e){this.db=e,12.2===Go.getIOSVersion(y())&&qr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}var Ho=(Object.defineProperty(Yo.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(Yo.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(Yo.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),Yo.prototype.done=function(){this.shouldStop=!0},Yo.prototype.skip=function(e){this.nextKey=e},Yo.prototype.delete=function(){return ea(this.dbCursor.delete())},Yo);function Yo(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}var Xo=(Jo.open=function(e,t,n){return new Jo(e.transaction(n,t))},Object.defineProperty(Jo.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),Jo.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(Br(Ko,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},Jo.prototype.store=function(e){var t=this.transaction.objectStore(e);return Wr(!!t,"Object store not part of transaction: "+e),new $o(t)},Jo);function Jo(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new $i,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=na(e.target.error);t.completionDeferred.reject(n)}}var $o=(Zo.prototype.put=function(e,t){return ea(void 0!==t?(Br(Ko,"PUT",this.store.name,e,t),this.store.put(t,e)):(Br(Ko,"PUT",this.store.name,"<auto-key>",e),this.store.put(e)))},Zo.prototype.add=function(e){return Br(Ko,"ADD",this.store.name,e,e),ea(this.store.add(e))},Zo.prototype.get=function(e){var t=this;return ea(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Br(Ko,"GET",t.store.name,e,n),n}))},Zo.prototype.delete=function(e){return Br(Ko,"DELETE",this.store.name,e),ea(this.store.delete(e))},Zo.prototype.count=function(){return Br(Ko,"COUNT",this.store.name),ea(this.store.count())},Zo.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,(function(e,t){r.push(t)})).next((function(){return r}))},Zo.prototype.deleteAll=function(e,t){Br(Ko,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,(function(e,t,n){return n.delete()}))},Zo.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},Zo.prototype.iterateSerial=function(e){var t=this.cursor({});return new zo((function(n,r){t.onerror=function(e){var t=na(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},Zo.prototype.iterateCursor=function(e,t){var n=[];return new zo((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new Ho(i),a=t(i.primaryKey,i.value,o);if(a instanceof zo){var s=a.catch((function(e){return o.done(),zo.reject(e)}));n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}})).next((function(){return zo.waitFor(n)}))},Zo.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(Wr(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},Zo.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},Zo);function Zo(e){this.store=e}function ea(e){return new zo((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=na(e.target.error);n(t)}}))}var ta=!1;function na(e){var t=Qo.getIOSVersion(y());if(12.2<=t&&t<13){var n="An internal error was encountered in the Indexed Database server";if(0<=e.message.indexOf(n)){var r=new Xr("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ta||(ta=!0,setTimeout((function(){throw r}),0)),r}}return e}var ra,ia,oa=(aa.forUser=function(e,t,n,r){return Wr(""!==e.uid,"UserID must not be an empty string."),new aa(e.isAuthenticated()?e.uid:"",t,n,r)},aa.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return la(e).iterate({index:bu.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},aa.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next((function(t){return t.lastStreamToken=ca(n),fa(e).put(t)}))},aa.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next((function(e){return e.lastStreamToken}))},aa.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next((function(n){return n.lastStreamToken=ca(t),fa(e).put(n)}))},aa.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=ha(e),a=la(e);return a.add({}).next((function(s){Wr("number"==typeof s,"Auto-generated key is not a number");for(var u=new Uo(s,t,n,r),c=i.serializer.toDbMutationBatch(i.userId,u),l=[],h=new Co((function(e,t){return Ci(e.canonicalString(),t.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],m=Tu.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(m,Tu.PLACEHOLDER))}return h.forEach((function(t){l.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.documentKeysByBatchId[s]=u.keys()})),zo.waitFor(l).next((function(){return u}))}))},aa.prototype.lookupMutationBatch=function(e,t){var n=this;return la(e).get(t).next((function(e){return e?(Wr(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null}))},aa.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?zo.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r}return null}))},aa.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return la(e).iterate({index:bu.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(Wr(t.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(t)),i.done()})).next((function(){return o}))},aa.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return la(e).iterate({index:bu.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},aa.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return la(e).loadAll(bu.userMutationsIndex,n).next((function(e){return e.map((function(e){return t.serializer.fromDbMutationBatch(e)}))}))},aa.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=Tu.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return ha(e).iterate({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=lo(u);if(s===n.userId&&t.path.isEqual(l))return la(e).get(c).next((function(e){if(!e)throw zr("Dangling document-mutation reference found: "+r+" which points to "+c);Wr(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(e))}));a.done()})).next((function(){return o}))},aa.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Co(Ci),i=[];return t.forEach((function(t){var o=Tu.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=ha(e).iterate({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],c=lo(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),zo.waitFor(i).next((function(){return n.lookupMutationBatches(e,r)}))},aa.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;Wr(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),Wr(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=Tu.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Co(Ci);return ha(e).iterate({range:a},(function(e,t,o){var a=e[0],u=e[1],c=e[2],l=lo(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.lookupMutationBatches(e,s)}))},aa.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(la(e).get(t).next((function(e){if(null===e)throw zr("Dangling document-mutation reference found, which points to "+t);Wr(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))})))})),zo.waitFor(i).next((function(){return r}))},aa.prototype.removeMutationBatch=function(e,t){var n=this;return ua(e.simpleDbTransaction,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.removeCachedMutationKeys(t.batchId)})),zo.forEach(r,(function(t){return n.referenceDelegate.removeMutationReference(e,t)}))}))},aa.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},aa.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return zo.resolve();var r=IDBKeyRange.lowerBound(Tu.prefixForUser(t.userId)),i=[];return ha(e).iterate({range:r},(function(e,n,r){if(e[0]===t.userId){var o=lo(e[1]);i.push(o)}else r.done()})).next((function(){Wr(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(e){return e.canonicalString()})))}))}))},aa.prototype.containsKey=function(e,t){return sa(e,this.userId,t)},aa.prototype.getMutationQueueMetadata=function(e){var t=this;return fa(e).get(this.userId).next((function(e){return e||new gu(t.userId,-1,"")}))},aa);function aa(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}function sa(e,t,n){var r=Tu.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return ha(e).iterate({range:o,keysOnly:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function ua(e,t,n){var r=e.store(bu.store),i=e.store(Tu.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){Wr(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Tu.key(t,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return zo.waitFor(o).next((function(){return c}))}function ca(e){return e instanceof Uint8Array?(Wr(Qo.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function la(e){return pc.getStore(e,bu.store)}function ha(e){return pc.getStore(e,Tu.store)}function fa(e){return pc.getStore(e,gu.store)}(ia=ra=ra||{})[ia.QueryCache=0]="QueryCache",ia[ia.SyncEngine=1]="SyncEngine";var da=(pa.prototype.next=function(){var e=this.nextId;return this.nextId+=2,e},pa.prototype.after=function(e){return this.seek(e+2),this.next()},pa.prototype.seek=function(e){Wr((1&e)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},pa.forTargetCache=function(){return new pa(ra.QueryCache,2)},pa.forSyncEngine=function(){return new pa(ra.SyncEngine)},pa);function pa(e,t){Wr((1&(this.generatorId=e))===e,"Generator ID "+e+" contains more than 1 reserved bits"),this.seek(void 0!==t?t:this.generatorId)}var ma=(ya.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next((function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next((function(){return n.highestTargetId}))}))},ya.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next((function(e){return po.fromTimestamp(new ho(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},ya.prototype.getHighestSequenceNumber=function(e){return ba(e.simpleDbTransaction)},ya.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)}))},ya.prototype.addTargetData=function(e,t){var n=this;return this.saveTargetData(e,t).next((function(){return n.retrieveMetadata(e).next((function(r){return r.targetCount+=1,n.updateMetadataFromTargetData(t,r),n.saveMetadata(e,r)}))}))},ya.prototype.updateTargetData=function(e,t){return this.saveTargetData(e,t)},ya.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return ga(e).delete(t.targetId)})).next((function(){return n.retrieveMetadata(e)})).next((function(t){return Wr(0<t.targetCount,"Removing from an empty target cache"),t.targetCount-=1,n.saveMetadata(e,t)}))},ya.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return ga(e).iterate((function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return zo.waitFor(o)})).next((function(){return i}))},ya.prototype.forEachTarget=function(e,t){var n=this;return ga(e).iterate((function(e,r){var i=n.serializer.fromDbTarget(r);t(i)}))},ya.prototype.retrieveMetadata=function(e){return va(e.simpleDbTransaction)},ya.prototype.saveMetadata=function(e,t){return function(e){return pc.getStore(e,Ou.store)}(e).put(Ou.key,t)},ya.prototype.saveTargetData=function(e,t){return ga(e).put(this.serializer.toDbTarget(t))},ya.prototype.updateMetadataFromTargetData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},ya.prototype.getTargetCount=function(e){return this.retrieveMetadata(e).next((function(e){return e.targetCount}))},ya.prototype.getTargetData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ga(e).iterate({range:i,index:_u.queryTargetsIndexName},(function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.target)&&(o=a,i.done())})).next((function(){return o}))},ya.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=wa(e);return t.forEach((function(t){var a=so(t.path);i.push(o.put(new xu(n,a))),i.push(r.referenceDelegate.addReference(e,t))})),zo.waitFor(i)},ya.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=wa(e);return zo.forEach(t,(function(t){var o=so(t.path);return zo.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])}))},ya.prototype.removeMatchingKeysForTargetId=function(e,t){var n=wa(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},ya.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=wa(e),i=Lo();return r.iterate({range:n,keysOnly:!0},(function(e,t,n){var r=lo(e[1]),o=new Hi(r);i=i.add(o)})).next((function(){return i}))},ya.prototype.containsKey=function(e,t){var n=so(t.path),r=IDBKeyRange.bound([n],[ki(n)],!1,!0),i=0;return wa(e).iterate({index:xu.documentTargetsIndex,keysOnly:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return 0<i}))},ya.prototype.getTargetDataForTarget=function(e,t){var n=this;return ga(e).get(t).next((function(e){return e?n.serializer.fromDbTarget(e):null}))},ya);function ya(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=da.forTargetCache()}function ga(e){return pc.getStore(e,_u.store)}function va(e){return Qo.getStore(e,Ou.store).get(Ou.key).next((function(e){return Wr(null!==e,"Missing metadata row."),e}))}function ba(e){return va(e).next((function(e){return e.highestListenSequenceNumber}))}function wa(e){return pc.getStore(e,xu.store)}var Ta=(Ea.fromSet=function(e){return new Ea(e)},Ea.fromArray=function(e){var t=new Co(Qi.comparator);return e.forEach((function(e){return t=t.add(e)})),new Ea(t)},Ea.prototype.covers=function(e){var t=!1;return this.fields.forEach((function(n){n.isPrefixOf(e)&&(t=!0)})),t},Ea.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},Ea);function Ea(e){this.fields=e}var Sa=(Ca.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},Ca);function Ca(e,t){this.field=e,this.transform=t}var Ia,ka,Da=function(e,t){this.version=e,this.transformResults=t};(ka=Ia=Ia||{})[ka.Set=0]="Set",ka[ka.Patch=1]="Patch",ka[ka.Transform=2]="Transform",ka[ka.Delete=3]="Delete";var Na=(_a.exists=function(e){return new _a(void 0,e)},_a.updateTime=function(e){return new _a(e)},Object.defineProperty(_a.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),_a.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof qs&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof qs:(Wr(this.isNone,"Precondition should be empty"),!0)},_a.prototype.isEqual=function(e){return function(e,t){return null!=e?!(!t||!e.isEqual(t)):e===t}(this.updateTime,e.updateTime)&&this.exists===e.exists},_a.NONE=new _a,_a);function _a(e,t){this.updateTime=e,this.exists=t,Wr(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}var Aa=(xa.prototype.verifyKeyMatches=function(e){null!=e&&Wr(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},xa.getPostMutationVersion=function(e){return e instanceof qs?e.version:po.MIN},xa);function xa(){}var Pa,Oa=(i(Ra,Pa=Aa),Ra.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),Wr(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new qs(this.key,n,{hasCommittedMutations:!0},this.value)},Ra.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=Aa.getPostMutationVersion(e);return new qs(this.key,r,{hasLocalMutations:!0},this.value)},Ra.prototype.extractBaseValue=function(e){return null},Ra.prototype.isEqual=function(e){return e instanceof Ra&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},Ra);function Ra(e,t,n){var r=Pa.call(this)||this;return r.key=e,r.value=t,r.precondition=n,r.type=Ia.Set,r}var Ma,La=(i(Fa,Ma=Aa),Fa.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),Wr(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new Gs(this.key,t.version);var n=this.patchDocument(e);return new qs(this.key,t.version,{hasCommittedMutations:!0},n)},Fa.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=Aa.getPostMutationVersion(e),i=this.patchDocument(e);return new qs(this.key,r,{hasLocalMutations:!0},i)},Fa.prototype.extractBaseValue=function(e){return null},Fa.prototype.isEqual=function(e){return e instanceof Fa&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},Fa.prototype.patchDocument=function(e){var t;return t=e instanceof qs?e.data():Os.EMPTY,this.patchObject(t)},Fa.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}})),e},Fa);function Fa(e,t,n,r){var i=Ma.call(this)||this;return i.key=e,i.data=t,i.fieldMask=n,i.precondition=r,i.type=Ia.Patch,i}var Va,Ua=(i(Ba,Va=Aa),Ba.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),Wr(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new Gs(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data(),r);return new qs(this.key,i,{hasCommittedMutations:!0},o)},Ba.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data(),i);return new qs(this.key,r.version,{hasLocalMutations:!0},o)},Ba.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof qs?e.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(t=null==t?Os.EMPTY.set(i.field,a):t.set(i.field,a))}return t},Ba.prototype.isEqual=function(e){return e instanceof Ba&&this.key.isEqual(e.key)&&Ii(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},Ba.prototype.requireDocument=function(e){return Wr(e instanceof qs,"Unknown MaybeDocument type "+e),Wr(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},Ba.prototype.serverTransformResults=function(e,t){var n=[];Wr(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof qs&&(a=e.field(i.field)),n.push(o.applyToRemoteDocument(a,t[r]))}return n},Ba.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;t instanceof qs&&(u=t.field(a.field)),null===u&&n instanceof qs&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,e))}return r},Ba.prototype.transformObject=function(e,t){Wr(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;e=e.set(r,t[n])}return e},Ba);function Ba(e,t){var n=Va.call(this)||this;return n.key=e,n.fieldTransforms=t,n.type=Ia.Transform,n.precondition=Na.exists(!0),n}var qa,ja,za,Wa,Ka,Qa=(i(Ga,qa=Aa),Ga.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),Wr(null==t.transformResults,"Transform results received by DeleteMutation."),new Ws(this.key,t.version,{hasCommittedMutations:!0})},Ga.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&Wr(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Ws(this.key,po.forDeletedDoc())):e},Ga.prototype.extractBaseValue=function(e){return null},Ga.prototype.isEqual=function(e){return e instanceof Ga&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},Ga);function Ga(e,t){var n=qa.call(this)||this;return n.key=e,n.precondition=t,n.type=Ia.Delete,n}(za=ja=ja||{})[za.NullValue=0]="NullValue",za[za.BooleanValue=1]="BooleanValue",za[za.NumberValue=2]="NumberValue",za[za.TimestampValue=3]="TimestampValue",za[za.StringValue=4]="StringValue",za[za.BlobValue=5]="BlobValue",za[za.RefValue=6]="RefValue",za[za.GeoPointValue=7]="GeoPointValue",za[za.ArrayValue=8]="ArrayValue",za[za.ObjectValue=9]="ObjectValue",(Ka=Wa=Wa||{})[Ka.Default=0]="Default",Ka[Ka.Estimate=1]="Estimate",Ka[Ka.Previous=2]="Previous";var Ha=(Ya.fromSnapshotOptions=function(e,t){switch(e.serverTimestamps){case"estimate":return new Ya(Wa.Estimate,t);case"previous":return new Ya(Wa.Previous,t);case"none":case void 0:return new Ya(Wa.Default,t);default:return zr("fromSnapshotOptions() called with invalid options.")}},Ya);function Ya(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}var Xa=(Ja.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},Ja.prototype.defaultCompareTo=function(e){return Wr(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),Ci(this.typeOrder,e.typeOrder)},Ja);function Ja(){}var $a,Za=(i(es,$a=Xa),es.prototype.value=function(e){return null},es.prototype.isEqual=function(e){return e instanceof es},es.prototype.compareTo=function(e){return e instanceof es?0:this.defaultCompareTo(e)},es.INSTANCE=new es,es);function es(){var e=$a.call(this)||this;return e.typeOrder=ja.NullValue,e.internalValue=null,e}var ts,ns=(i(rs,ts=Xa),rs.prototype.value=function(e){return this.internalValue},rs.prototype.isEqual=function(e){return e instanceof rs&&this.internalValue===e.internalValue},rs.prototype.compareTo=function(e){return e instanceof rs?Ci(this,e):this.defaultCompareTo(e)},rs.of=function(e){return e?rs.TRUE:rs.FALSE},rs.TRUE=new rs(!0),rs.FALSE=new rs(!1),rs);function rs(e){var t=ts.call(this)||this;return t.internalValue=e,t.typeOrder=ja.BooleanValue,t}var is,os=(i(as,is=Xa),as.prototype.value=function(e){return this.internalValue},as.prototype.compareTo=function(e){return e instanceof as?function(e,t){return e<t?-1:t<e?1:e===t?0:isNaN(e)?isNaN(t)?0:-1:1}(this.internalValue,e.internalValue):this.defaultCompareTo(e)},as);function as(e){var t=is.call(this)||this;return t.internalValue=e,t.typeOrder=ja.NumberValue,t}function ss(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var us,cs=(i(ls,us=os),ls.prototype.isEqual=function(e){return e instanceof ls&&ss(this.internalValue,e.internalValue)},ls);function ls(){return null!==us&&us.apply(this,arguments)||this}var hs,fs=(i(ds,hs=os),ds.prototype.isEqual=function(e){return e instanceof ds&&ss(this.internalValue,e.internalValue)},ds.NAN=new ds(NaN),ds.POSITIVE_INFINITY=new ds(1/0),ds.NEGATIVE_INFINITY=new ds(-1/0),ds);function ds(){return null!==hs&&hs.apply(this,arguments)||this}var ps,ms=(i(ys,ps=Xa),ys.prototype.value=function(e){return this.internalValue},ys.prototype.isEqual=function(e){return e instanceof ys&&this.internalValue===e.internalValue},ys.prototype.compareTo=function(e){return e instanceof ys?Ci(this.internalValue,e.internalValue):this.defaultCompareTo(e)},ys);function ys(e){var t=ps.call(this)||this;return t.internalValue=e,t.typeOrder=ja.StringValue,t}var gs,vs=(i(bs,gs=Xa),bs.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},bs.prototype.isEqual=function(e){return e instanceof bs&&this.internalValue.isEqual(e.internalValue)},bs.prototype.compareTo=function(e){return e instanceof bs?this.internalValue._compareTo(e.internalValue):e instanceof Ts?-1:this.defaultCompareTo(e)},bs);function bs(e){var t=gs.call(this)||this;return t.internalValue=e,t.typeOrder=ja.TimestampValue,t}var ws,Ts=(i(Es,ws=Xa),Es.prototype.value=function(e){return e&&e.serverTimestampBehavior===Wa.Estimate?new vs(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===Wa.Previous&&this.previousValue?this.previousValue.value(e):null},Es.prototype.isEqual=function(e){return e instanceof Es&&this.localWriteTime.isEqual(e.localWriteTime)},Es.prototype.compareTo=function(e){return e instanceof Es?this.localWriteTime._compareTo(e.localWriteTime):e instanceof vs?1:this.defaultCompareTo(e)},Es.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},Es);function Es(e,t){var n=ws.call(this)||this;return n.localWriteTime=e,n.previousValue=t,n.typeOrder=ja.TimestampValue,n}var Ss,Cs=(i(Is,Ss=Xa),Is.prototype.value=function(e){return this.internalValue},Is.prototype.isEqual=function(e){return e instanceof Is&&this.internalValue.isEqual(e.internalValue)},Is.prototype.compareTo=function(e){return e instanceof Is?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},Is);function Is(e){var t=Ss.call(this)||this;return t.internalValue=e,t.typeOrder=ja.BlobValue,t}var ks,Ds=(i(Ns,ks=Xa),Ns.prototype.value=function(e){return this.key},Ns.prototype.isEqual=function(e){return e instanceof Ns&&this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId)},Ns.prototype.compareTo=function(e){if(e instanceof Ns){var t=this.databaseId.compareTo(e.databaseId);return 0!==t?t:Hi.comparator(this.key,e.key)}return this.defaultCompareTo(e)},Ns);function Ns(e,t){var n=ks.call(this)||this;return n.databaseId=e,n.key=t,n.typeOrder=ja.RefValue,n}var _s,As=(i(xs,_s=Xa),xs.prototype.value=function(e){return this.internalValue},xs.prototype.isEqual=function(e){return e instanceof xs&&this.internalValue.isEqual(e.internalValue)},xs.prototype.compareTo=function(e){return e instanceof xs?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},xs);function xs(e){var t=_s.call(this)||this;return t.internalValue=e,t.typeOrder=ja.GeoPointValue,t}var Ps,Os=(i(Rs,Ps=Xa),Rs.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal((function(n,r){t[n]=r.value(e)})),t},Rs.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},Rs.prototype.isEqual=function(e){if(e instanceof Rs){for(var t=this.internalValue.getIterator(),n=e.internalValue.getIterator();t.hasNext()&&n.hasNext();){var r=t.getNext(),i=n.getNext();if(r.key!==i.key||!r.value.isEqual(i.value))return!1}return!t.hasNext()&&!n.hasNext()}return!1},Rs.prototype.compareTo=function(e){if(e instanceof Rs){for(var t=this.internalValue.getIterator(),n=e.internalValue.getIterator();t.hasNext()&&n.hasNext();){var r=t.getNext(),i=n.getNext(),o=Ci(r.key,i.key)||r.value.compareTo(i.value);if(o)return o}return Ci(t.hasNext(),n.hasNext())}return this.defaultCompareTo(e)},Rs.prototype.set=function(e,t){if(Wr(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),t);var n=this.child(e.firstSegment());n instanceof Rs||(n=Rs.EMPTY);var r=n.set(e.popFirst(),t);return this.setChild(e.firstSegment(),r)},Rs.prototype.delete=function(e){if(Wr(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new Rs(this.internalValue.remove(e.firstSegment()));var t=this.child(e.firstSegment());if(t instanceof Rs){var n=t.delete(e.popFirst());return new Rs(this.internalValue.insert(e.firstSegment(),n))}return this},Rs.prototype.contains=function(e){return null!==this.field(e)},Rs.prototype.field=function(e){Wr(!e.isEmpty(),"Can't get field of empty path");var t=this;return e.forEach((function(e){t=t instanceof Rs?t.internalValue.get(e):null})),t},Rs.prototype.fieldMask=function(){var e=new Co(Qi.comparator);return this.internalValue.forEach((function(t,n){var r=new Qi([t]);if(n instanceof Rs){var i=n.fieldMask().fields;i.isEmpty()?e=e.add(r):i.forEach((function(t){e=e.add(r.child(t))}))}else e=e.add(r)})),Ta.fromSet(e)},Rs.prototype.toString=function(){return this.internalValue.toString()},Rs.prototype.child=function(e){return this.internalValue.get(e)||void 0},Rs.prototype.setChild=function(e,t){return new Rs(this.internalValue.insert(e,t))},Rs.EMPTY=new Rs(new yo(Ci)),Rs);function Rs(e){var t=Ps.call(this)||this;return t.internalValue=e,t.typeOrder=ja.ObjectValue,t}var Ms,Ls=(i(Fs,Ms=Xa),Fs.prototype.value=function(e){return this.internalValue.map((function(t){return t.value(e)}))},Fs.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++)if(n[t].isEqual(e))return!0;return!1},Fs.prototype.forEach=function(e){this.internalValue.forEach(e)},Fs.prototype.isEqual=function(e){if(e instanceof Fs){if(this.internalValue.length!==e.internalValue.length)return!1;for(var t=0;t<this.internalValue.length;t++)if(!this.internalValue[t].isEqual(e.internalValue[t]))return!1;return!0}return!1},Fs.prototype.compareTo=function(e){if(e instanceof Fs){for(var t=Math.min(this.internalValue.length,e.internalValue.length),n=0;n<t;n++){var r=this.internalValue[n].compareTo(e.internalValue[n]);if(r)return r}return Ci(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},Fs.prototype.toString=function(){return"["+this.internalValue.map((function(e){return e.toString()})).join(",")+"]"},Fs);function Fs(e){var t=Ms.call(this)||this;return t.internalValue=e,t.typeOrder=ja.ArrayValue,t}var Vs=(Us.compareByKey=function(e,t){return Hi.comparator(e.key,t.key)},Us);function Us(e,t){this.key=e,this.version=t}var Bs,qs=(i(js,Bs=Vs),js.prototype.field=function(e){if(this.objectValue)return this.objectValue.field(e);this.fieldValueCache||(this.fieldValueCache=new Map);var t=e.canonicalString(),n=this.fieldValueCache.get(t);if(void 0===n){var r=this.getProtoField(e);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(t,n)}return n},js.prototype.data=function(){var e=this;if(!this.objectValue){var t=Os.EMPTY;ni(this.proto.fields||{},(function(n,r){t=t.set(new Qi([n]),e.converter(r))})),this.objectValue=t,this.fieldValueCache=void 0}return this.objectValue},js.prototype.value=function(){return this.data().value()},js.prototype.isEqual=function(e){return e instanceof js&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},js.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(js.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),js.prototype.getProtoField=function(e){Wr(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields?this.proto.fields[e.firstSegment()]:void 0,n=1;n<e.length;++n){if(!t||!t.mapValue||!t.mapValue.fields)return;t=t.mapValue.fields[e.get(n)]}return t},js.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):zr("Trying to compare documents on fields that don't exist")},js);function js(e,t,n,r,i,o){var a=Bs.call(this,e,t)||this;return a.objectValue=r,a.proto=i,a.converter=o,Wr(void 0!==a.objectValue||void 0!==a.proto&&void 0!==a.converter,"If objectValue is not defined, proto and converter need to be set."),a.hasLocalMutations=!!n.hasLocalMutations,a.hasCommittedMutations=!!n.hasCommittedMutations,a}var zs,Ws=(i(Ks,zs=Vs),Ks.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Ks.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),Ks.prototype.isEqual=function(e){return e instanceof Ks&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},Ks);function Ks(e,t,n){var r=zs.call(this,e,t)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}var Qs,Gs=(i(Hs,Qs=Vs),Hs.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Hs.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),Hs.prototype.isEqual=function(e){return e instanceof Hs&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},Hs);function Hs(){return null!==Qs&&Qs.apply(this,arguments)||this}var Ys=(Xs.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(e))return s}},Xs.prototype.has=function(e){return void 0!==this.get(e)},Xs.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},Xs.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},Xs.prototype.forEach=function(e){ni(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},Xs.prototype.isEmpty=function(){return ri(this.inner)},Xs);function Xs(e){this.mapKeyFn=e,this.inner={}}var Js=(Object.defineProperty($s.prototype,"readTime",{get:function(){return Wr(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(e){Wr(void 0===this._readTime||this._readTime.isEqual(e),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=e},enumerable:!0,configurable:!0}),$s.prototype.addEntry=function(e,t){this.assertNotApplied(),this.readTime=t,this.changes.set(e.key,e)},$s.prototype.removeEntry=function(e,t){this.assertNotApplied(),t&&(this.readTime=t),this.changes.set(e,null)},$s.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?zo.resolve(n):this.getFromCache(e,t)},$s.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},$s.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},$s.prototype.assertNotApplied=function(){Wr(!this.changesApplied,"Changes have already been applied.")},$s);function $s(){this.changes=new Ys((function(e){return e.toString()})),this.changesApplied=!1}var Zs,eu=(tu.prototype.addEntry=function(e,t,n){return iu(e).put(ou(t),n)},tu.prototype.removeEntry=function(e,t){var n=iu(e),r=ou(t);return n.delete(r)},tu.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.setMetadata(e,r)}))},tu.prototype.getEntry=function(e,t){var n=this;return iu(e).get(ou(t)).next((function(e){return n.maybeDecodeDocument(e)}))},tu.prototype.getSizedEntry=function(e,t){var n=this;return iu(e).get(ou(t)).next((function(e){var t=n.maybeDecodeDocument(e);return t?{maybeDocument:t,size:au(e)}:null}))},tu.prototype.getEntries=function(e,t){var n=this,r=Ao();return this.forEachDbEntry(e,t,(function(e,t){var i=n.maybeDecodeDocument(t);r=r.insert(e,i)})).next((function(){return r}))},tu.prototype.getSizedEntries=function(e,t){var n=this,r=Ao(),i=new yo(Hi.comparator);return this.forEachDbEntry(e,t,(function(e,t){var o=n.maybeDecodeDocument(t);i=o?(r=r.insert(e,o),i.insert(e,au(t))):(r=r.insert(e,null),i.insert(e,0))})).next((function(){return{maybeDocuments:r,sizeMap:i}}))},tu.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return zo.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return iu(e).iterate({range:r},(function(e,t,r){for(var a=Hi.fromSegments(e);o&&Hi.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},tu.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this;Wr(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=Po(),o=t.path.length+1,a={};if(n.isEqual(po.MIN)){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=this.serializer.toDbTimestampKey(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=Iu.collectionReadTimeIndex}return iu(e).iterate(a,(function(e,n,a){if(e.length===o){var s=r.serializer.fromDbRemoteDocument(n);t.path.isPrefixOf(s.key.path)?s instanceof qs&&t.matches(s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},tu.prototype.getNewDocumentChanges=function(e,t){var n=this,r=_o(),i=this.serializer.toDbTimestampKey(t),o=iu(e),a=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:Iu.readTimeIndex,range:a},(function(e,t){var o=n.serializer.fromDbRemoteDocument(t);r=r.insert(o.key,o),i=t.readTime})).next((function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}}))},tu.prototype.getLastDocumentChange=function(e){var t,n=this,r=iu(e),i=po.MIN;return r.iterate({index:Iu.readTimeIndex,reverse:!0},(function(e,r,o){t=n.serializer.fromDbRemoteDocument(r),r.readTime&&(i=n.serializer.fromDbTimestampKey(r.readTime)),o.done()})).next((function(){return{changedDoc:t,readTime:i}}))},tu.prototype.newChangeBuffer=function(e){return new tu.RemoteDocumentChangeBuffer(this,!!e&&e.trackRemovals)},tu.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},tu.prototype.getMetadata=function(e){return ru(e).get(Du.key).next((function(e){return Wr(!!e,"Missing document cache metadata"),e}))},tu.prototype.setMetadata=function(e,t){return ru(e).put(Du.key,t)},tu.prototype.maybeDecodeDocument=function(e){if(e){var t=this.serializer.fromDbRemoteDocument(e);return t instanceof Ws&&t.version.isEqual(po.forDeletedDoc())?null:t}return null},tu.RemoteDocumentChangeBuffer=(i(nu,Zs=Js),nu.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new Co((function(e,t){return Ci(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.documentSizes.get(o);if(Wr(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){Wr(!t.readTime.isEqual(po.MIN),"Cannot add a document with a read time of zero");var u=t.documentCache.serializer.toDbRemoteDocument(a,t.readTime);i=i.add(o.path.popLast());var c=au(u);r+=c-s,n.push(t.documentCache.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=t.documentCache.serializer.toDbRemoteDocument(new Ws(o,po.forDeletedDoc()),t.readTime);n.push(t.documentCache.addEntry(e,o,l))}else n.push(t.documentCache.removeEntry(e,o))})),i.forEach((function(r){n.push(t.documentCache.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.documentCache.updateMetadata(e,r)),zo.waitFor(n)},nu.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next((function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)}))},nu.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next((function(e){var t=e.maybeDocuments;return e.sizeMap.forEach((function(e,t){n.documentSizes.set(e,t)})),t}))},nu),tu);function tu(e,t){this.serializer=e,this.indexManager=t}function nu(e,t){var n=Zs.call(this)||this;return n.documentCache=e,n.trackRemovals=t,n.documentSizes=new Ys((function(e){return e.toString()})),n}function ru(e){return pc.getStore(e,Du.store)}function iu(e){return pc.getStore(e,Iu.store)}function ou(e){return e.path.toArray()}function au(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw zr("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var su=(uu.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),zo.resolve()},uu.prototype.getCollectionParents=function(e,t){return zo.resolve(this.collectionParentIndex.getEntries(t))},uu);function uu(){this.collectionParentIndex=new cu}var cu=(lu.prototype.add=function(e){Wr(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Co(ji.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},lu.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},lu.prototype.getEntries=function(e){return(this.index[e]||new Co(ji.comparator)).toArray()},lu);function lu(){this.index={}}var hu=9,fu=(du.prototype.createOrUpgrade=function(e,t,n,r){var i=this;Wr(n<r&&0<=n&&r<=hu,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new Xo(t);n<1&&1<=r&&(function(e){e.createObjectStore(mu.store)}(e),function(e){e.createObjectStore(gu.store,{keyPath:gu.keyPath}),e.createObjectStore(bu.store,{keyPath:bu.keyPath,autoIncrement:!0}).createIndex(bu.userMutationsIndex,bu.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Tu.store)}(e),Fu(e),function(e){e.createObjectStore(Iu.store)}(e));var a=zo.resolve();return n<3&&3<=r&&(0!==n&&(function(e){e.deleteObjectStore(xu.store),e.deleteObjectStore(_u.store),e.deleteObjectStore(Ou.store)}(e),Fu(e)),a=a.next((function(){return function(e){var t=e.store(Ou.store),n=new Ou(0,0,po.MIN.toTimestamp(),0);return t.put(Ou.key,n)}(o)}))),n<4&&4<=r&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(bu.store).loadAll().next((function(n){e.deleteObjectStore(bu.store),e.createObjectStore(bu.store,{keyPath:bu.keyPath,autoIncrement:!0}).createIndex(bu.userMutationsIndex,bu.userMutationsKeyPath,{unique:!0});var r=t.store(bu.store),i=n.map((function(e){return r.put(e)}));return zo.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(Vu.store,{keyPath:Vu.keyPath})}(e)}))),n<5&&5<=r&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&6<=r&&(a=a.next((function(){return function(e){e.createObjectStore(Du.store)}(e),i.addDocumentGlobal(o)}))),n<7&&7<=r&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&8<=r&&(a=a.next((function(){return i.createCollectionParentIndex(e,o)}))),n<9&&9<=r&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(Iu.store);t.createIndex(Iu.readTimeIndex,Iu.readTimeIndexPath,{unique:!1}),t.createIndex(Iu.collectionReadTimeIndex,Iu.collectionReadTimeIndexPath,{unique:!1})}(t)}))),a},du.prototype.addDocumentGlobal=function(e){var t=0;return e.store(Iu.store).iterate((function(e,n){t+=au(n)})).next((function(){var n=new Du(t);return e.store(Du.store).put(Du.key,n)}))},du.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(gu.store),r=e.store(bu.store);return n.loadAll().next((function(n){return zo.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(bu.userMutationsIndex,i).next((function(r){return zo.forEach(r,(function(r){Wr(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return ua(e,n.userId,i).next((function(){}))}))}))}))}))},du.prototype.ensureSequenceNumbers=function(e){var t=e.store(xu.store),n=e.store(Iu.store);return ba(e).next((function(e){var r=[];return n.iterate((function(n,i){var o=new ji(n),a=function(e){return[0,so(e)]}(o);r.push(t.get(a).next((function(n){return n?zo.resolve():function(n){return t.put(new xu(0,so(n),e))}(o)})))})).next((function(){return zo.waitFor(r)}))}))},du.prototype.createCollectionParentIndex=function(e,t){function n(e){if(i.add(e)){var t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:so(n)})}}e.createObjectStore(Mu.store,{keyPath:Mu.keyPath});var r=t.store(Mu.store),i=new cu;return t.store(Iu.store).iterate({keysOnly:!0},(function(e,t){return n(new ji(e).popLast())})).next((function(){return t.store(Tu.store).iterate({keysOnly:!0},(function(e,t){e[0];var r=e[1];return n((e[2],lo(r)).popLast())}))}))},du);function du(e){this.serializer=e}var pu=function(e,t){this.seconds=e,this.nanoseconds=t},mu=(yu.store="owner",yu.key="owner",yu);function yu(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}var gu=(vu.store="mutationQueues",vu.keyPath="userId",vu);function vu(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}var bu=(wu.store="mutations",wu.keyPath="batchId",wu.userMutationsIndex="userMutationsIndex",wu.userMutationsKeyPath=["userId","batchId"],wu);function wu(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}var Tu=(Eu.prefixForUser=function(e){return[e]},Eu.prefixForPath=function(e,t){return[e,so(t)]},Eu.key=function(e,t,n){return[e,so(t),n]},Eu.store="documentMutations",Eu.PLACEHOLDER=new Eu,Eu);function Eu(){}var Su=function(e,t){this.path=e,this.readTime=t},Cu=function(e,t){this.path=e,this.version=t},Iu=(ku.store="remoteDocuments",ku.readTimeIndex="readTimeIndex",ku.readTimeIndexPath="readTime",ku.collectionReadTimeIndex="collectionReadTimeIndex",ku.collectionReadTimeIndexPath=["parentPath","readTime"],ku);function ku(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}var Du=(Nu.store="remoteDocumentGlobal",Nu.key="remoteDocumentGlobalKey",Nu);function Nu(e){this.byteSize=e}var _u=(Au.store="targets",Au.keyPath="targetId",Au.queryTargetsIndexName="queryTargetsIndex",Au.queryTargetsKeyPath=["canonicalId","targetId"],Au);function Au(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}var xu=(Pu.store="targetDocuments",Pu.keyPath=["targetId","path"],Pu.documentTargetsIndex="documentTargetsIndex",Pu.documentTargetsKeyPath=["path","targetId"],Pu);function Pu(e,t,n){this.targetId=e,this.path=t,Wr(0===e==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}var Ou=(Ru.key="targetGlobalKey",Ru.store="targetGlobal",Ru);function Ru(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}var Mu=(Lu.store="collectionParents",Lu.keyPath=["collectionId","parent"],Lu);function Lu(e,t){this.collectionId=e,this.parent=t}function Fu(e){e.createObjectStore(xu.store,{keyPath:xu.keyPath}).createIndex(xu.documentTargetsIndex,xu.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(_u.store,{keyPath:_u.keyPath}).createIndex(_u.queryTargetsIndexName,_u.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Ou.store)}var Vu=(Uu.store="clientMetadata",Uu.keyPath="clientId",Uu);function Uu(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}var Bu,qu,ju=l(l(l([gu.store,bu.store,Tu.store,Iu.store,_u.store,mu.store,Ou.store,xu.store],[Vu.store]),[Du.store]),[Mu.store]),zu=(Wu.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(Wr(t.length%2==1,"Expected a collection path."),this.collectionParentsCache.has(t))return zo.resolve();var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.collectionParentsCache.add(t)}));var o={collectionId:r,parent:so(i)};return Ku(e).put(o)},Wu.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[ki(t),""],!1,!0);return Ku(e).loadAll(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(lo(o.parent))}return n}))},Wu);function Wu(){this.collectionParentsCache=new cu}function Ku(e){return pc.getStore(e,Mu.store)}(qu=Bu=Bu||{})[qu.Listen=0]="Listen",qu[qu.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",qu[qu.LimboResolution=2]="LimboResolution";var Qu=(Gu.prototype.withSequenceNumber=function(e){return new Gu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},Gu.prototype.withResumeToken=function(e,t){return new Gu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)},Gu.prototype.withLastLimboFreeSnapshotVersion=function(e){return new Gu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},Gu.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(e.lastLimboFreeSnapshotVersion)&&this.resumeToken===e.resumeToken&&this.target.isEqual(e.target)},Gu);function Gu(e,t,n,r,i,o,a){void 0===i&&(i=po.MIN),void 0===o&&(o=po.MIN),void 0===a&&(a=Gr()),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}var Hu=(Yu.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=Hi.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new Ws(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}return e.unknownDocument?(t=Hi.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version),new Gs(t,n)):zr("Unexpected DbRemoteDocument")},Yu.prototype.toDbRemoteDocument=function(e,t){var n=this.toDbTimestampKey(t),r=e.key.path.popLast().toArray();if(e instanceof qs){var i=e.proto?e.proto:this.remoteSerializer.toDocument(e),o=e.hasCommittedMutations;return new Iu(null,null,i,o,n,r)}if(e instanceof Ws){var a=e.key.path.toArray(),s=this.toDbTimestamp(e.version);return o=e.hasCommittedMutations,new Iu(null,new Su(a,s),null,o,n,r)}if(e instanceof Gs){a=e.key.path.toArray();var u=this.toDbTimestamp(e.version);return new Iu(new Cu(a,u),null,null,!0,n,r)}return zr("Unexpected MaybeDocument")},Yu.prototype.toDbTimestampKey=function(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]},Yu.prototype.fromDbTimestampKey=function(e){var t=new ho(e[0],e[1]);return po.fromTimestamp(t)},Yu.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new pu(t.seconds,t.nanoseconds)},Yu.prototype.fromDbTimestamp=function(e){var t=new ho(e.seconds,e.nanoseconds);return po.fromTimestamp(t)},Yu.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map((function(e){return n.remoteSerializer.toMutation(e)})),i=t.mutations.map((function(e){return n.remoteSerializer.toMutation(e)}));return new bu(e,t.batchId,t.localWriteTime.toMillis(),r,i)},Yu.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map((function(e){return t.remoteSerializer.fromMutation(e)})),r=e.mutations.map((function(e){return t.remoteSerializer.fromMutation(e)})),i=ho.fromMillis(e.localWriteTimeMs);return new Uo(e.batchId,i,n,r)},Yu.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach((function(e){t.push(so(e.path))})),t},Yu.prototype.fromDbResourcePaths=function(e){for(var t=Lo(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new Hi(lo(i)))}return t},Yu.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(e.lastLimboFreeSnapshotVersion):po.MIN,i=e.resumeToken;return t=function(e){return void 0!==e.documents}(e.query)?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new Qu(t,e.targetId,Bu.Listen,e.lastListenSequenceNumber,n,r,i)},Yu.prototype.toDbTarget=function(e){Wr(Bu.Listen===e.purpose,"Only queries with purpose "+Bu.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion),i=this.toDbTimestamp(e.lastLimboFreeSnapshotVersion);return t=e.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.target):this.remoteSerializer.toQueryTarget(e.target),n=e.resumeToken instanceof Uint8Array?(Wr(Qo.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),e.resumeToken.toString()):e.resumeToken,new _u(e.targetId,e.target.canonicalId(),r,n,e.sequenceNumber,i,t)},Yu);function Yu(e){this.remoteSerializer=e}function Xu(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=Ci(n,i);return 0===a?Ci(r,o):a}var Ju=($u.prototype.nextIndex=function(){return++this.previousIndex},$u.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Xu(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty($u.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),$u);function $u(e){this.maxElements=e,this.buffer=new Co(Xu),this.previousIndex=0}var Zu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ec=(tc.withCacheSize=function(e){return new tc(e,tc.DEFAULT_COLLECTION_PERCENTILE,tc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},tc.COLLECTION_DISABLED=-1,tc.MINIMUM_CACHE_SIZE_BYTES=1048576,tc.DEFAULT=new tc(tc.DEFAULT_CACHE_SIZE_BYTES=41943040,tc.DEFAULT_COLLECTION_PERCENTILE=10,tc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),tc.DISABLED=new tc(tc.COLLECTION_DISABLED,0,0),tc);function tc(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}var nc=(rc.prototype.start=function(){Wr(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==ec.COLLECTION_DISABLED&&this.scheduleGC()},rc.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(rc.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),rc.prototype.scheduleGC=function(){var e=this;Wr(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;Br("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(Xi.LruGarbageCollection,t,(function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then((function(){return e.scheduleGC()})).catch(yc)}))},rc);function rc(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}var ic=(oc.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next((function(e){return Math.floor(t/100*e)}))},oc.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return zo.resolve(Li.INVALID);var r=new Ju(t);return this.delegate.forEachTarget(e,(function(e){return r.addElement(e.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,(function(e){return r.addElement(e)}))})).next((function(){return r.maxValue}))},oc.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},oc.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},oc.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===ec.COLLECTION_DISABLED?(Br("LruGarbageCollector","Garbage collection skipped; disabled"),zo.resolve(Zu)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Br("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Zu):n.runGarbageCollection(e,t)}))},oc.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},oc.prototype.runGarbageCollection=function(e,t){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return r=t>c.params.maximumSequenceNumbersToCollect?(Br("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+t),c.params.maximumSequenceNumbersToCollect):t,o=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Vr()<=Nr.DEBUG&&Br("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),zo.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},oc);function oc(e,t){this.delegate=e,this.params=t}var ac=(sc.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},sc.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},sc);function sc(){this.onCommittedListeners=[]}var uc,cc="IndexedDbPersistence",lc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",hc="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",fc=(i(dc,uc=ac),dc);function dc(e,t){var n=uc.call(this)||this;return n.simpleDbTransaction=e,n.currentSequenceNumber=t,n}var pc=(mc.getStore=function(e,t){if(e instanceof fc)return Qo.getStore(e.simpleDbTransaction,t);throw zr("IndexedDbPersistence must use instances of IndexedDbTransaction")},mc.createIndexedDbPersistence=function(e){return u(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:if(!mc.isAvailable())throw new Xr(Yr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(t=new mc(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.lruParams,e.queue,e.serializer,e.sequenceNumberSyncer)).start()];case 1:return n.sent(),[2,t]}}))}))},mc.prototype.start=function(){var e=this;return Wr(!this.started,"IndexedDbPersistence double-started!"),Wr(null!==this.window,"Expected 'window' to be defined"),Qo.openOrCreate(this.dbName,hu,new fu(this.serializer)).then((function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()})).then((function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.simpleDb.runTransaction("readonly-idempotent",[Ou.store],(function(e){return ba(e)}))})).then((function(t){e.listenSequence=new Li(t,e.sequenceNumberSyncer)})).then((function(){e._started=!0})).catch((function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)}))},mc.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return u(t,void 0,void 0,(function(){return c(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},mc.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener((function(n){return u(t,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},mc.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget((function(){return u(t,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},mc.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite-idempotent",ju,(function(t){return vc(t).put(new Vu(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next((function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget((function(){return e.primaryStateListener(!1)})))}))})).next((function(){return e.canActAsPrimary(t)})).next((function(n){return e.isPrimary&&!n?e.releasePrimaryLeaseIfHeld(t).next((function(){return!1})):!!n&&e.acquireOrExtendPrimaryLease(t).next((function(){return!0}))}))})).catch((function(t){if(!e.allowTabSynchronization)throw t;return Br(cc,"Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.queue.enqueueAndForget((function(){return e.primaryStateListener(t)})),e.isPrimary=t}))},mc.prototype.verifyPrimaryLease=function(e){var t=this;return gc(e).get(mu.key).next((function(e){return zo.resolve(t.isLocalClient(e))}))},mc.prototype.removeClientMetadata=function(e){return vc(e).delete(this.clientId)},mc.prototype.maybeGarbageCollectMultiClientState=function(){return u(this,void 0,void 0,(function(){var e=this;return c(this,(function(t){switch(t.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(t){var n=mc.getStore(t,Vu.store);return n.loadAll().next((function(t){var r=e.filterActiveClients(t,18e5),i=t.filter((function(e){return-1===r.indexOf(e)}));return zo.forEach(i,(function(e){return n.delete(e.clientId)})).next((function(){return i}))}))}))]);case 1:t.sent().forEach((function(t){e.window.localStorage.removeItem(e.zombiedClientLocalStorageKey(t.clientId))})),t.label=2;case 2:return[2]}}))}))},mc.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(Xi.ClientMetadataRefresh,4e3,(function(){return e.updateClientMetadataAndTryBecomePrimary().then((function(){return e.maybeGarbageCollectMultiClientState()})).then((function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},mc.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},mc.prototype.canActAsPrimary=function(e){var t=this;return gc(e).get(mu.key).next((function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new Xr(Yr.FAILED_PRECONDITION,hc);return!1}}return!(!t.networkEnabled||!t.inForeground)||vc(e).loadAll().next((function(e){return void 0===t.filterActiveClients(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Br(cc,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},mc.prototype.shutdown=function(){return u(this,void 0,void 0,(function(){var e=this;return c(this,(function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[mu.store,Vu.store],(function(t){return e.releasePrimaryLeaseIfHeld(t).next((function(){return e.removeClientMetadata(t)}))}))];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},mc.prototype.filterActiveClients=function(e,t){var n=this;return e.filter((function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)}))},mc.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly-idempotent",[Vu.store],(function(t){return vc(t).loadAll().next((function(t){return e.filterActiveClients(t,18e5).map((function(e){return e.clientId}))}))}))},mc.clearPersistence=function(e){return u(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return mc.isAvailable()?(t=e+mc.MAIN_DATABASE,[4,Qo.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))},Object.defineProperty(mc.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),mc.prototype.getMutationQueue=function(e){return Wr(this.started,"Cannot initialize MutationQueue before persistence is started."),oa.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},mc.prototype.getTargetCache=function(){return Wr(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},mc.prototype.getRemoteDocumentCache=function(){return Wr(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},mc.prototype.getIndexManager=function(){return Wr(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},mc.prototype.runTransaction=function(e,t,n){var r=this;Br(cc,"Starting transaction:",e);var i,o=t.endsWith("idempotent"),a=t.startsWith("readonly")?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(a,ju,(function(o){return i=new fc(o,r.listenSequence.next()),"readwrite-primary"===t||"readwrite-primary-idempotent"===t?r.verifyPrimaryLease(o).next((function(e){return!!e||r.canActAsPrimary(o)})).next((function(t){if(!t)throw qr("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new Xr(Yr.FAILED_PRECONDITION,lc);return n(i)})).next((function(e){return r.acquireOrExtendPrimaryLease(o).next((function(){return e}))})):r.verifyAllowTabSynchronization(o).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},mc.prototype.verifyAllowTabSynchronization=function(e){var t=this;return gc(e).get(mu.key).next((function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new Xr(Yr.FAILED_PRECONDITION,hc)}))},mc.prototype.acquireOrExtendPrimaryLease=function(e){var t=new mu(this.clientId,this.allowTabSynchronization,Date.now());return gc(e).put(mu.key,t)},mc.isAvailable=function(){return Qo.isAvailable()},mc.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},mc.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=gc(e);return n.get(mu.key).next((function(e){return t.isLocalClient(e)?(Br(cc,"Releasing primary lease."),n.delete(mu.key)):zo.resolve()}))},mc.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t||n<e&&(qr("Detected an update time that is in the future: "+e+" > "+n),1))},mc.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},mc.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(Wr(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},mc.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},mc.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(Wr("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},mc.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return Br(cc,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return qr(cc,"Failed to get zombied client id.",e),!1}},mc.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(i){qr("Failed to set zombie client id.",i)}},mc.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(i){}},mc.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},mc.MAIN_DATABASE="main",mc);function mc(e,t,n,r,i,o,a,s){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.queue=o,this.sequenceNumberSyncer=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new bc(this,i),this.dbName=t+mc.MAIN_DATABASE,this.serializer=new Hu(a),this.document=r.document,this.targetCache=new ma(this.referenceDelegate,this.serializer),this.indexManager=new zu,this.remoteDocumentCache=new eu(this.serializer,this.indexManager),!r.window||!r.window.localStorage)throw new Xr(Yr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}function yc(e){return u(this,void 0,void 0,(function(){return c(this,(function(t){if(!function(e){return e.code===Yr.FAILED_PRECONDITION&&e.message===lc}(e))throw e;return Br(cc,"Unexpectedly lost primary lease"),[2]}))}))}function gc(e){return e.store(mu.store)}function vc(e){return e.store(Vu.store)}var bc=(wc.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},wc.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},wc.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},wc.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,(function(e,n){return t(n)}))},wc.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},wc.prototype.addReference=function(e,t){return Tc(e,t)},wc.prototype.removeReference=function(e,t){return Tc(e,t)},wc.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},wc.prototype.removeMutationReference=function(e,t){return Tc(e,t)},wc.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?zo.resolve(!0):function(e,t){var n=!1;return fa(e).iterateSerial((function(r){return sa(e,r,t).next((function(e){return e&&(n=!0),zo.resolve(!e)}))})).next((function(){return n}))}(e,t)},wc.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(e,(function(a,s){if(s<=t){var u=n.isPinned(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),wa(e).delete(function(e){return[0,so(e.path)]}(a))}))}));i.push(u)}})).next((function(){return zo.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},wc.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},wc.prototype.updateLimboDocument=function(e,t){return Tc(e,t)},wc.prototype.forEachOrphanedDocument=function(e,t){var n,r=wa(e),i=Li.INVALID;return r.iterate({index:xu.documentTargetsIndex},(function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==Li.INVALID&&t(new Hi(lo(n)),i),i=s,n=a):i=Li.INVALID})).next((function(){i!==Li.INVALID&&t(new Hi(lo(n)),i)}))},wc.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},wc);function wc(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new ic(this,t)}function Tc(e,t){return wa(e).put(function(e,t){return new xu(0,so(e.path),t)}(t,e.currentSequenceNumber))}var Ec=Number,Sc=Ec.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Cc=Ec.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Ic=Ec.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function kc(e){return null==e}function Dc(e){return Ic(e)&&e<=Cc&&Sc<=e}var Nc,_c,Ac=(xc.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();null!==this.collectionGroup&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++)e+=n[t].canonicalId(),e+=",";e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)e+=i[r].canonicalId(),e+=",";kc(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},xc.prototype.toString=function(){var e=this.path.canonicalString();return null!==this.collectionGroup&&(e+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(e+=", filters: ["+this.filters.join(", ")+"]"),kc(this.limit)||(e+=", limit: "+this.limit),0<this.orderBy.length&&(e+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),"Target("+e+")"},xc.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&!!this.path.isEqual(e.path)&&!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)},xc.prototype.isDocumentQuery=function(){return Hi.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},xc);function xc(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}(_c=Nc=Nc||{}).First="F",_c.Last="L";var Pc=(Oc.atPath=function(e){return new Oc(e)},Object.defineProperty(Oc.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[al]:this.memoizedOrderBy=[new il(e),al];else{Wr(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field.");for(var n=!(this.memoizedOrderBy=[]),r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=0<this.explicitOrderBy.length?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:el.ASCENDING;this.memoizedOrderBy.push(a===el.ASCENDING?al:sl)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),Oc.prototype.addFilter=function(e){Wr(null==this.getInequalityFilterField()||!(e instanceof Fc)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),Wr(!this.isDocumentQuery(),"No filtering allowed for document query");var t=this.filters.concat([e]);return new Oc(this.path,this.collectionGroup,this.explicitOrderBy.slice(),t,this.limit,this.limitType,this.startAt,this.endAt)},Oc.prototype.addOrderBy=function(e){Wr(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var t=this.explicitOrderBy.concat([e]);return new Oc(this.path,this.collectionGroup,t,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},Oc.prototype.withLimitToFirst=function(e){return new Oc(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,Nc.First,this.startAt,this.endAt)},Oc.prototype.withLimitToLast=function(e){return new Oc(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,Nc.Last,this.startAt,this.endAt)},Oc.prototype.withStartAt=function(e){return new Oc(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,e,this.endAt)},Oc.prototype.withEndAt=function(e){return new Oc(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,e)},Oc.prototype.asCollectionQueryAtPath=function(e){return new Oc(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},Oc.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},Oc.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},Oc.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},Oc.prototype.isEqual=function(e){return this.toTarget().isEqual(e.toTarget())&&this.limitType===e.limitType},Oc.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return Wr(n,"orderBy used that doesn't compare on key field"),0},Oc.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},Oc.prototype.hasLimitToFirst=function(){return!kc(this.limit)&&this.limitType===Nc.First},Oc.prototype.hasLimitToLast=function(){return!kc(this.limit)&&this.limitType===Nc.Last},Oc.prototype.getFirstOrderByField=function(){return 0<this.explicitOrderBy.length?this.explicitOrderBy[0].field:null},Oc.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof Fc&&n.isInequality())return n.field}return null},Oc.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof Fc&&0<=e.indexOf(r.op))return r.op}return null},Oc.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},Oc.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},Oc.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===Nc.First)this.memoizedTarget=new Ac(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var e=[],t=0,n=this.orderBy;t<n.length;t++){var r=n[t],i=r.dir===el.DESCENDING?el.ASCENDING:el.DESCENDING;e.push(new il(r.field,i))}var o=this.endAt?new nl(this.endAt.position,!this.endAt.before):null,a=this.startAt?new nl(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new Ac(this.path,this.collectionGroup,e,this.filters,this.limit,o,a)}return this.memoizedTarget},Oc.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):Hi.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},Oc.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},Oc.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++)if(!n[t].matches(e))return!1;return!0},Oc.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,e))},Oc.prototype.assertValidBound=function(e){Wr(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},Oc);function Oc(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=Nc.First),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}var Rc=(Mc.fromString=function(e){switch(e){case"<":return Mc.LESS_THAN;case"<=":return Mc.LESS_THAN_OR_EQUAL;case"==":return Mc.EQUAL;case">=":return Mc.GREATER_THAN_OR_EQUAL;case">":return Mc.GREATER_THAN;case"array-contains":return Mc.ARRAY_CONTAINS;case"in":return Mc.IN;case"array-contains-any":return Mc.ARRAY_CONTAINS_ANY;default:return zr("Unknown FieldFilter operator: "+e)}},Mc.prototype.toString=function(){return this.name},Mc.prototype.isEqual=function(e){return this.name===e.name},Mc.LESS_THAN=new Mc("<"),Mc.LESS_THAN_OR_EQUAL=new Mc("<="),Mc.EQUAL=new Mc("=="),Mc.GREATER_THAN=new Mc(">"),Mc.GREATER_THAN_OR_EQUAL=new Mc(">="),Mc.ARRAY_CONTAINS=new Mc("array-contains"),Mc.IN=new Mc("in"),Mc.ARRAY_CONTAINS_ANY=new Mc("array-contains-any"),Mc);function Mc(e){this.name=e}var Lc,Fc=(i(Vc,Lc=function(){}),Vc.create=function(e,t,n){if(e.isKeyField())return t===Rc.IN?(Wr(n instanceof Ls,"Comparing on key with IN, but filter value not an ArrayValue"),Wr(n.internalValue.every((function(e){return e instanceof Ds})),"Comparing on key with IN, but an array value was not a RefValue"),new zc(e,n)):(Wr(n instanceof Ds,"Comparing on key, but filter value not a RefValue"),Wr(t!==Rc.ARRAY_CONTAINS&&t!==Rc.ARRAY_CONTAINS_ANY,"'"+t.toString()+"' queries don't make sense on document keys."),new Bc(e,t,n));if(n.isEqual(Za.INSTANCE)){if(t!==Rc.EQUAL)throw new Xr(Yr.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new Vc(e,t,n)}if(n.isEqual(fs.NAN)){if(t!==Rc.EQUAL)throw new Xr(Yr.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new Vc(e,t,n)}return t===Rc.ARRAY_CONTAINS?new Qc(e,n):t===Rc.IN?(Wr(n instanceof Ls,"IN filter has invalid value: "+n.toString()),new Yc(e,n)):t===Rc.ARRAY_CONTAINS_ANY?(Wr(n instanceof Ls,"ARRAY_CONTAINS_ANY filter has invalid value: "+n.toString()),new $c(e,n)):new Vc(e,t,n)},Vc.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},Vc.prototype.matchesComparison=function(e){switch(this.op){case Rc.LESS_THAN:return e<0;case Rc.LESS_THAN_OR_EQUAL:return e<=0;case Rc.EQUAL:return 0===e;case Rc.GREATER_THAN:return 0<e;case Rc.GREATER_THAN_OR_EQUAL:return 0<=e;default:return zr("Unknown FieldFilter operator: "+this.op)}},Vc.prototype.isInequality=function(){return 0<=[Rc.LESS_THAN,Rc.LESS_THAN_OR_EQUAL,Rc.GREATER_THAN,Rc.GREATER_THAN_OR_EQUAL].indexOf(this.op)},Vc.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},Vc.prototype.isEqual=function(e){return e instanceof Vc&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},Vc.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},Vc);function Vc(e,t,n){var r=Lc.call(this)||this;return r.field=e,r.op=t,r.value=n,r}var Uc,Bc=(i(qc,Uc=Fc),qc.prototype.matches=function(e){var t=this.value,n=Hi.comparator(e.key,t.key);return this.matchesComparison(n)},qc);function qc(){return null!==Uc&&Uc.apply(this,arguments)||this}var jc,zc=(i(Wc,jc=Fc),Wc.prototype.matches=function(e){return this.value.internalValue.some((function(t){return e.key.isEqual(t.key)}))},Wc);function Wc(e,t){var n=jc.call(this,e,Rc.IN,t)||this;return n.value=t,n}var Kc,Qc=(i(Gc,Kc=Fc),Gc.prototype.matches=function(e){var t=e.field(this.field);return t instanceof Ls&&t.contains(this.value)},Gc);function Gc(e,t){return Kc.call(this,e,Rc.ARRAY_CONTAINS,t)||this}var Hc,Yc=(i(Xc,Hc=Fc),Xc.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},Xc);function Xc(e,t){var n=Hc.call(this,e,Rc.IN,t)||this;return n.value=t,n}var Jc,$c=(i(Zc,Jc=Fc),Zc.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof Ls&&n.internalValue.some((function(e){return t.value.contains(e)}))},Zc);function Zc(e,t){var n=Jc.call(this,e,Rc.ARRAY_CONTAINS_ANY,t)||this;return n.value=t,n}var el=(tl.prototype.toString=function(){return this.name},tl.ASCENDING=new tl("asc"),tl.DESCENDING=new tl("desc"),tl);function tl(e){this.name=e}var nl=(rl.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++)e+=n[t].toString();return e},rl.prototype.sortsBeforeDocument=function(e,t){Wr(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())Wr(o instanceof Ds,"Bound has a non-key value where the key path is being used."),n=Hi.comparator(o.key,t.key);else{var a=t.field(i.field);Wr(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===el.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},rl.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];if(!n.isEqual(r))return!1}return!0},rl);function rl(e,t){this.position=e,this.before=t}var il=(ol.prototype.compare=function(e,t){var n=this.isKeyOrderBy?qs.compareByKey(e,t):qs.compareByField(this.field,e,t);switch(this.dir){case el.ASCENDING:return n;case el.DESCENDING:return-1*n;default:return zr("Unknown direction: "+this.dir)}},ol.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},ol.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},ol.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},ol);function ol(e,t){this.field=e,void 0===t&&(t=el.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}var al=new il(Qi.keyField(),el.ASCENDING),sl=new il(Qi.keyField(),el.DESCENDING),ul=(cl.prototype.setLocalDocumentsView=function(e){this.localDocumentsView=e},cl.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var i=this;return Wr(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),t.matchesAllDocuments()?this.executeFullCollectionScan(e,t):n.isEqual(po.MIN)?this.executeFullCollectionScan(e,t):this.localDocumentsView.getDocuments(e,r).next((function(o){var a=i.applyQuery(t,o);return(t.hasLimitToFirst()||t.hasLimitToLast())&&i.needsRefill(t.limitType,a,r,n)?i.executeFullCollectionScan(e,t):(Vr()<=Nr.DEBUG&&Br("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),t.toString()),i.localDocumentsView.getDocumentsMatchingQuery(e,t,n).next((function(e){return a.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},cl.prototype.applyQuery=function(e,t){var n=new Co((function(t,n){return e.docComparator(t,n)}));return t.forEach((function(t,r){r instanceof qs&&e.matches(r)&&(n=n.add(r))})),n},cl.prototype.needsRefill=function(e,t,n,r){if(n.size!==t.size)return!0;var i=e===Nc.First?t.last():t.first();return!!i&&(i.hasPendingWrites||0<i.version.compareTo(r))},cl.prototype.executeFullCollectionScan=function(e,t){return Vr()<=Nr.DEBUG&&Br("IndexFreeQueryEngine","Using full collection scan to execute query: %s",t.toString()),this.localDocumentsView.getDocumentsMatchingQuery(e,t,po.MIN)},cl);function cl(){}var ll=(hl.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.getDocumentInternal(e,t,r)}))},hl.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next((function(e){for(var r=0,i=n;r<i.length;r++)e=i[r].applyToLocalView(t,e);return e}))},hl.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=Ao();return t.forEach((function(e,t){for(var i=0,o=n;i<o.length;i++)t=o[i].applyToLocalView(e,t);r=r.insert(e,t)})),r},hl.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t)}))},hl.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=_o();return i.forEach((function(e,t){t=t||new Ws(e,po.forDeletedDoc()),o=o.insert(e,t)})),o}))},hl.prototype.getDocumentsMatchingQuery=function(e,t,n){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)},hl.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new Hi(t)).next((function(e){var t=Po();return e instanceof qs&&(t=t.insert(e.key,e)),t}))},hl.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t,n){var r=this;Wr(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=t.collectionGroup,o=Po();return this.indexManager.getCollectionParents(e,i).next((function(a){return zo.forEach(a,(function(a){var s=t.asCollectionQueryAtPath(a.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},hl.prototype.getDocumentsMatchingCollectionQuery=function(e,t,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.addMissingBaseDocuments(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);r=h instanceof qs?r.insert(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(e,n){t.matches(n)||(r=r.remove(e))})),r}))},hl.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=Lo(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof La&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(e,r).next((function(e){return e.forEach((function(e,t){null!==t&&t instanceof qs&&(c=c.insert(e,t))})),c}))},hl);function hl(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}var fl=(dl.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},dl.prototype.addReference=function(e,t){var n=new pl(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},dl.prototype.addReferences=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},dl.prototype.removeReference=function(e,t){this.removeRef(new pl(e,t))},dl.prototype.removeReferences=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},dl.prototype.removeReferencesForId=function(e){var t=this,n=Hi.EMPTY,r=new pl(n,e),i=new pl(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],(function(e){t.removeRef(e),o.push(e.key)})),o},dl.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach((function(t){return e.removeRef(t)}))},dl.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},dl.prototype.referencesForId=function(e){var t=Hi.EMPTY,n=new pl(t,e),r=new pl(t,e+1),i=Lo();return this.refsByTarget.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},dl.prototype.containsKey=function(e){var t=new pl(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},dl);function dl(){this.refsByKey=new Co(pl.compareByKey),this.refsByTarget=new Co(pl.compareByTargetId)}var pl=(ml.compareByKey=function(e,t){return Hi.comparator(e.key,t.key)||Ci(e.targetOrBatchId,t.targetOrBatchId)},ml.compareByTargetId=function(e,t){return Ci(e.targetOrBatchId,t.targetOrBatchId)||Hi.comparator(e.key,t.key)},ml);function ml(e,t){this.key=e,this.targetOrBatchId=t}var yl=(gl.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},gl.prototype.handleUserChange=function(e){return u(this,void 0,void 0,(function(){var t,n,r,i=this;return c(this,(function(o){switch(o.label){case 0:return t=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next((function(a){return o=a,t=i.persistence.getMutationQueue(e),n=new ll(i.remoteDocuments,t,i.persistence.getIndexManager()),t.getAllMutationBatches(r)})).next((function(e){for(var t=[],i=[],a=Lo(),s=0,u=o;s<u.length;s++){var c=u[s];t.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=e;d<p.length;d++){c=p[d],i.push(c.batchId);for(var m=0,y=c.mutations;m<y.length;m++)f=y[m],a=a.add(f.key)}return n.getDocuments(r,a).next((function(e){return{affectedDocuments:e,removedBatchIds:t,addedBatchIds:i}}))}))}))];case 1:return r=o.sent(),this.mutationQueue=t,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}}))}))},gl.prototype.localWrite=function(e){var t,n=this,r=ho.now(),i=e.reduce((function(e,t){return e.add(t.key)}),Lo());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.localDocuments.getDocuments(o,i).next((function(i){t=i;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=c.extractBaseValue(t.get(c.key));null!=l&&a.push(new La(c.key,l,l.fieldMask(),Na.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,a,e)}))})).then((function(e){var n=e.applyToLocalDocumentSet(t);return{batchId:e.batchId,changes:n}}))},gl.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return t.mutationQueue.lookupMutationKeys(n,e).next((function(e){return e?t.localDocuments.getDocuments(n,e):zo.resolve(null)}))}))},gl.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next((function(){return t.applyWriteToRemoteDocuments(n,e,i)})).next((function(){return i.apply(n)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},gl.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next((function(e){return Wr(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},gl.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)}))},gl.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(t){return e.mutationQueue.getLastStreamToken(t)}))},gl.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return t.mutationQueue.setLastStreamToken(n,e)}))},gl.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(t){return e.targetCache.getLastRemoteSnapshotVersion(t)}))},gl.prototype.applyRemoteEvent=function(e){var t=this,n=e.snapshotVersion,r=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(i){var o=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});r=t.targetDataByTarget;var a=[];ti(e.targetChanges,(function(e,o){var s=r.get(e);if(s){a.push(t.targetCache.removeMatchingKeys(i,o.removedDocuments,e).next((function(){return t.targetCache.addMatchingKeys(i,o.addedDocuments,e)})));var u=o.resumeToken;if(0<u.length){var c=s.withResumeToken(u,n).withSequenceNumber(i.currentSequenceNumber);r=r.insert(e,c),gl.shouldPersistTargetData(s,c,o)&&a.push(t.targetCache.updateTargetData(i,c))}}}));var s=_o(),u=Lo();if(e.documentUpdates.forEach((function(e,t){u=u.add(e)})),a.push(o.getEntries(i,u).next((function(r){e.documentUpdates.forEach((function(u,c){var l=r.get(u);c instanceof Ws&&c.version.isEqual(po.MIN)?(o.removeEntry(u,n),s=s.insert(u,c)):null==l||0<c.version.compareTo(l.version)||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(Wr(!po.MIN.isEqual(n),"Cannot add a document when the remote version is zero"),o.addEntry(c,n),s=s.insert(u,c)):Br("LocalStore","Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,u))}))}))),!n.isEqual(po.MIN)){var c=t.targetCache.getLastRemoteSnapshotVersion(i).next((function(e){return Wr(0<=n.compareTo(e),"Watch stream reverted to previous snapshot?? "+n+" < "+e),t.targetCache.setTargetsMetadata(i,i.currentSequenceNumber,n)}));a.push(c)}return zo.waitFor(a).next((function(){return o.apply(i)})).next((function(){return t.localDocuments.getLocalViewOfDocuments(i,s)}))})).then((function(e){return t.targetDataByTarget=r,e}))},gl.shouldPersistTargetData=function(e,t,n){return Wr(0<t.resumeToken.length,"Attempted to persist target data with no resume token"),0===e.resumeToken.length||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||0<n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size},gl.prototype.notifyLocalViewChanges=function(e){for(var t=this,n=0,r=e;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var a=this.targetDataByTarget.get(o);Wr(null!==a,"Can't set limbo-free snapshot version for unknown target: "+o);var s=a.snapshotVersion,u=a.withLastLimboFreeSnapshotVersion(s);this.targetDataByTarget=this.targetDataByTarget.insert(o,u)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return zo.forEach(e,(function(e){return zo.forEach(e.removedKeys,(function(e){return t.persistence.referenceDelegate.removeReference(n,e)}))}))}))},gl.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)}))},gl.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return t.localDocuments.getDocument(n,e)}))},gl.prototype.allocateTarget=function(e){var t=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return t.targetCache.getTargetData(n,e).next((function(i){return i?(r=i,zo.resolve(r)):t.targetCache.allocateTargetId(n).next((function(i){return r=new Qu(e,i,Bu.Listen,n.currentSequenceNumber),t.targetCache.addTargetData(n,r).next((function(){return r}))}))}))})).then((function(n){return null===t.targetDataByTarget.get(n.targetId)&&(t.targetDataByTarget=t.targetDataByTarget.insert(n.targetId,n),t.targetIdByTarget.set(e,n.targetId)),n}))},gl.prototype.getTargetData=function(e,t){var n=this.targetIdByTarget.get(t);return void 0!==n?zo.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(e,t)},gl.prototype.releaseTarget=function(e,t){var n=this,r=this.targetDataByTarget.get(e);Wr(null!==r,"Tried to release nonexistent target: "+e);var i=t?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",i,(function(i){var o=n.localViewReferences.removeReferencesForId(e);return t?zo.resolve():zo.forEach(o,(function(e){return n.persistence.referenceDelegate.removeReference(i,e)})).next((function(){n.persistence.referenceDelegate.removeTarget(i,r)}))})).then((function(){n.targetDataByTarget=n.targetDataByTarget.remove(e),n.targetIdByTarget.delete(r.target)}))},gl.prototype.executeQuery=function(e,t){var n=this,r=po.MIN,i=Lo();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.getTargetData(o,e.toTarget()).next((function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(o,e.targetId).next((function(e){i=e}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(o,e,t?r:po.MIN,t?i:Lo())})).next((function(e){return{documents:e,remoteKeys:i}}))}))},gl.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return t.targetCache.getMatchingKeysForTargetId(n,e)}))},gl.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},gl.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},gl.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},gl.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=zo.resolve();return o.forEach((function(r){a=a.next((function(){return n.getEntry(e,r)})).next((function(e){var o=e,a=t.docVersions.get(r);Wr(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,t))?n.addEntry(o,t.commitVersion):Wr(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))}))})),a.next((function(){return r.mutationQueue.removeMutationBatch(e,i)}))},gl.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return e.collect(n,t.targetDataByTarget)}))},gl.prototype.getTarget=function(e){var t=this,n=this.targetDataByTarget.get(e);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return t.targetCache.getTargetDataForTarget(n,e).next((function(e){return e?e.target:null}))}))},gl.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(t){return e.remoteDocuments.getNewDocumentChanges(t,e.lastDocumentChangeReadTime)})).then((function(t){var n=t.changedDocs,r=t.readTime;return e.lastDocumentChangeReadTime=r,n}))},gl.prototype.synchronizeLastDocumentChangeReadTime=function(){return u(this,void 0,void 0,(function(){var e,t=this;return c(this,(function(n){return this.remoteDocuments instanceof eu?(e=this.remoteDocuments,[2,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(t){return e.getLastDocumentChange(t)})).then((function(e){var n=e.readTime;t.lastDocumentChangeReadTime=n}))]):[2]}))}))},gl.RESUME_TOKEN_MAX_AGE_MICROS=3e8,gl);function gl(e,t,n){this.persistence=e,this.queryEngine=t,this.localViewReferences=new fl,this.targetDataByTarget=new yo(Ci),this.targetIdByTarget=new Ys((function(e){return e.canonicalId()})),this.lastDocumentChangeReadTime=po.MIN,Wr(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(n),this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.localDocuments=new ll(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}var vl=(bl.prototype.checkEmpty=function(e){return zo.resolve(0===this.mutationQueue.length)},bl.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");Wr(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return Wr(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,zo.resolve()},bl.prototype.getLastStreamToken=function(e){return zo.resolve(this.lastStreamToken)},bl.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,zo.resolve()},bl.prototype.addMutationBatch=function(e,t,n,r){Wr(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,0<this.mutationQueue.length&&Wr(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new Uo(i,t,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new pl(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return zo.resolve(o)},bl.prototype.lookupMutationBatch=function(e,t){return zo.resolve(this.findMutationBatch(t))},bl.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return Wr(null!=n,"Failed to find local mutation batch."),zo.resolve(n.keys())},bl.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return zo.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},bl.prototype.getHighestUnacknowledgedBatchId=function(){return zo.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},bl.prototype.getAllMutationBatches=function(e){return zo.resolve(this.mutationQueue.slice())},bl.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new pl(t,0),i=new pl(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],(function(e){Wr(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);Wr(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),zo.resolve(o)},bl.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Co(Ci);return t.forEach((function(e){var t=new pl(e,0),i=new pl(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],(function(t){Wr(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)}))})),zo.resolve(this.findMutationBatches(r))},bl.prototype.getAllMutationBatchesAffectingQuery=function(e,t){Wr(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;Hi.isDocumentKey(i)||(i=i.child(""));var o=new pl(new Hi(i),0),a=new Co(Ci);return this.batchesByDocumentKey.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)}),o),zo.resolve(this.findMutationBatches(a))},bl.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)})),n},bl.prototype.removeMutationBatch=function(e,t){var n=this;Wr(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return zo.forEach(t.mutations,(function(i){var o=new pl(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)})).next((function(){n.batchesByDocumentKey=r}))},bl.prototype.removeCachedMutationKeys=function(e){},bl.prototype.containsKey=function(e,t){var n=new pl(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return zo.resolve(t.isEqual(r&&r.key))},bl.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&Wr(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),zo.resolve()},bl.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return Wr(0<=n&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},bl.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},bl.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return Wr(n.batchId===e,"If found batch must match"),n},bl);function bl(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=Gr(),this.batchesByDocumentKey=new Co(pl.compareByKey)}var wl,Tl=(El.prototype.addEntry=function(e,t,n){Wr(!n.isEqual(po.MIN),"Cannot add a document with a read time of zero");var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.sizer(t);return this.docs=this.docs.insert(r,{maybeDocument:t,size:a,readTime:n}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())},El.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},El.prototype.getEntry=function(e,t){var n=this.docs.get(t);return zo.resolve(n?n.maybeDocument:null)},El.prototype.getEntries=function(e,t){var n=this,r=Ao();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)})),zo.resolve(r)},El.prototype.getDocumentsMatchingQuery=function(e,t,n){Wr(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=Po(),i=new Hi(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.maybeDocument,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||c instanceof qs&&t.matches(c)&&(r=r.insert(c.key,c))}return zo.resolve(r)},El.prototype.forEachDocumentKey=function(e,t){return zo.forEach(this.docs,(function(e){return t(e)}))},El.prototype.getNewDocumentChanges=function(e,t){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},El.prototype.newChangeBuffer=function(e){return new El.RemoteDocumentChangeBuffer(this)},El.prototype.getSize=function(e){return zo.resolve(this.size)},El.RemoteDocumentChangeBuffer=(i(Sl,wl=Js),Sl.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i?n.push(t.documentCache.addEntry(e,i,t.readTime)):t.documentCache.removeEntry(r)})),zo.waitFor(n)},Sl.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},Sl.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},Sl),El);function El(e,t){this.indexManager=e,this.sizer=t,this.docs=new yo(Hi.comparator),this.size=0}function Sl(e){var t=wl.call(this)||this;return t.documentCache=e,t}var Cl=(Il.prototype.forEachTarget=function(e,t){return this.targets.forEach((function(e,n){return t(n)})),zo.resolve()},Il.prototype.getLastRemoteSnapshotVersion=function(e){return zo.resolve(this.lastRemoteSnapshotVersion)},Il.prototype.getHighestSequenceNumber=function(e){return zo.resolve(this.highestSequenceNumber)},Il.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,zo.resolve(t)},Il.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),zo.resolve()},Il.prototype.saveTargetData=function(e){this.targets.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},Il.prototype.addTargetData=function(e,t){return Wr(!this.targets.has(t.target),"Adding a target that already exists"),this.saveTargetData(t),this.targetCount+=1,zo.resolve()},Il.prototype.updateTargetData=function(e,t){return Wr(this.targets.has(t.target),"Updating a non-existent target"),this.saveTargetData(t),zo.resolve()},Il.prototype.removeTargetData=function(e,t){return Wr(0<this.targetCount,"Removing a target from an empty cache"),Wr(this.targets.has(t.target),"Removing a non-existent target from the cache"),this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,zo.resolve()},Il.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.targets.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.targets.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),zo.waitFor(o).next((function(){return i}))},Il.prototype.getTargetCount=function(e){return zo.resolve(this.targetCount)},Il.prototype.getTargetData=function(e,t){var n=this.targets.get(t)||null;return zo.resolve(n)},Il.prototype.getTargetDataForTarget=function(e,t){return zr("Not yet implemented.")},Il.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.addReference(e,t))})),zo.waitFor(i)},Il.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.removeReference(e,t))})),zo.waitFor(i)},Il.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),zo.resolve()},Il.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return zo.resolve(n)},Il.prototype.containsKey=function(e,t){return zo.resolve(this.references.containsKey(t))},Il);function Il(e){this.persistence=e,this.targets=new Ys((function(e){return e.canonicalId()})),this.lastRemoteSnapshotVersion=po.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new fl,this.targetCount=0,this.targetIdGenerator=da.forTargetCache()}var kl=(Dl.createLruPersistence=function(e,t,n){return new Dl(e,(function(e){return new Ol(e,new Hu(t),n)}))},Dl.createEagerPersistence=function(e){return new Dl(e,(function(e){return new xl(e)}))},Dl.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(Dl.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),Dl.prototype.getActiveClients=function(){return u(this,void 0,void 0,(function(){return c(this,(function(e){return[2,[this.clientId]]}))}))},Dl.prototype.setPrimaryStateListener=function(e){return e(!0)},Dl.prototype.setDatabaseDeletedListener=function(){},Dl.prototype.setNetworkEnabled=function(e){},Dl.prototype.getIndexManager=function(){return this.indexManager},Dl.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new vl(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},Dl.prototype.getTargetCache=function(){return this.targetCache},Dl.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},Dl.prototype.runTransaction=function(e,t,n){var r=this;Br("MemoryPersistence","Starting transaction:",e);var i=new _l(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next((function(e){return r.referenceDelegate.onTransactionCommitted(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},Dl.prototype.mutationQueuesContainKey=function(e,t){return zo.or(function(e){var t=[];return ni(e,(function(e,n){return t.push(n)})),t}(this.mutationQueues).map((function(n){return function(){return n.containsKey(e,t)}})))},Dl);function Dl(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new Li(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.targetCache=new Cl(this),this.indexManager=new su,this.remoteDocumentCache=new Tl(this.indexManager,(function(e){return n.referenceDelegate.documentSize(e)}))}var Nl,_l=(i(Al,Nl=ac),Al);function Al(e){var t=Nl.call(this)||this;return t.currentSequenceNumber=e,t}var xl=(Object.defineProperty(Pl.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw zr("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),Pl.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},Pl.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),zo.resolve()},Pl.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),zo.resolve()},Pl.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),zo.resolve()},Pl.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.orphanedDocuments.add(e)}))})).next((function(){return r.removeTargetData(e,t)}))},Pl.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},Pl.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return zo.forEach(this.orphanedDocuments,(function(r){return t.isReferenced(e,r).next((function(e){e||n.removeEntry(r)}))})).next((function(){return t._orphanedDocuments=null,n.apply(e)}))},Pl.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next((function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)}))},Pl.prototype.documentSize=function(e){return 0},Pl.prototype.isReferenced=function(e,t){var n=this;return zo.or([function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return zo.resolve(n.inMemoryPins.containsKey(t))}])},Pl);function Pl(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}var Ol=(Rl.prototype.onTransactionStarted=function(){},Rl.prototype.onTransactionCommitted=function(e){return zo.resolve()},Rl.prototype.forEachTarget=function(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)},Rl.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},Rl.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},Rl.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return zo.forEach(this.orphanedSequenceNumbers,(function(r,i){return n.isPinned(e,r,i).next((function(e){return e?zo.resolve():t(i)}))}))},Rl.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},Rl.prototype.removeTargets=function(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)},Rl.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(e,(function(i){return n.isPinned(e,i,t).next((function(e){e||(r++,o.removeEntry(i))}))})).next((function(){return o.apply(e)})).next((function(){return r}))},Rl.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),zo.resolve()},Rl.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)},Rl.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),zo.resolve()},Rl.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),zo.resolve()},Rl.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),zo.resolve()},Rl.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e,e.version);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw zr("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},Rl.prototype.isPinned=function(e,t,n){var r=this;return zo.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return zo.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getTargetCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return zo.resolve(void 0!==e&&n<e)}])},Rl.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},Rl);function Rl(e,t,n){this.persistence=e,this.serializer=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new Ys((function(e){return so(e.path)})),this.garbageCollector=new ic(this,n)}var Ml=(Ll.prototype.reset=function(){this.currentBaseMs=0},Ll.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},Ll.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);0<this.currentBaseMs&&Br("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,(function(){return t.lastAttemptTime=Date.now(),e()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},Ll.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},Ll.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},Ll);function Ll(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}var Fl,Vl,Ul="PersistentStream";(Vl=Fl=Fl||{})[Vl.Initial=0]="Initial",Vl[Vl.Starting=1]="Starting",Vl[Vl.Open=2]="Open",Vl[Vl.Error=3]="Error",Vl[Vl.Backoff=4]="Backoff";var Bl=(ql.prototype.isStarted=function(){return this.state===Fl.Starting||this.state===Fl.Open||this.state===Fl.Backoff},ql.prototype.isOpen=function(){return this.state===Fl.Open},ql.prototype.start=function(){this.state!==Fl.Error?(Wr(this.state===Fl.Initial,"Already started"),this.auth()):this.performBackoff()},ql.prototype.stop=function(){return u(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(Fl.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},ql.prototype.inhibitBackoff=function(){Wr(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Fl.Initial,this.backoff.reset()},ql.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return e.handleIdleCloseTimer()})))},ql.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},ql.prototype.handleIdleCloseTimer=function(){return u(this,void 0,void 0,(function(){return c(this,(function(e){return this.isOpen()?[2,this.close(Fl.Initial)]:[2]}))}))},ql.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},ql.prototype.close=function(e,t){return u(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return Wr(this.isStarted(),"Only started streams should be closed."),Wr(e===Fl.Error||kc(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==Fl.Error?this.backoff.reset():t&&t.code===Yr.RESOURCE_EXHAUSTED?(qr(t.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===Yr.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}}))}))},ql.prototype.tearDown=function(){},ql.prototype.auth=function(){var e=this;Wr(this.state===Fl.Initial,"Must be in initial state to auth"),this.state=Fl.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(t){e.closeCount===n&&e.startStream(t)}),(function(n){t((function(){var t=new Xr(Yr.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)}))}))},ql.prototype.startStream=function(e){var t=this;Wr(this.state===Fl.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen((function(){n((function(){return Wr(t.state===Fl.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=Fl.Open,t.listener.onOpen()}))})),this.stream.onClose((function(e){n((function(){return t.handleStreamClose(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},ql.prototype.performBackoff=function(){var e=this;Wr(this.state===Fl.Error,"Should only perform backoff when in Error state"),this.state=Fl.Backoff,this.backoff.backoffAndRun((function(){return u(e,void 0,void 0,(function(){return c(this,(function(e){return Wr(this.state===Fl.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Fl.Initial,this.start(),Wr(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},ql.prototype.handleStreamClose=function(e){return Wr(this.isStarted(),"Can't handle server close on non-started stream"),Br(Ul,"close with error: "+e),this.stream=null,this.close(Fl.Error,e)},ql.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget((function(){return t.closeCount===e?n():(Br(Ul,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},ql);function ql(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=Fl.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new Ml(e,t)}var jl,zl=(i(Wl,jl=Bl),Wl.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},Wl.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},Wl.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},Wl.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},Wl);function Wl(e,t,n,r,i){var o=jl.call(this,e,Xi.ListenStreamConnectionBackoff,Xi.ListenStreamIdle,t,n,i)||this;return o.serializer=r,o}var Kl,Ql=(i(Gl,Kl=Bl),Object.defineProperty(Gl.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),Gl.prototype.start=function(){this.handshakeComplete_=!1,Kl.prototype.start.call(this)},Gl.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},Gl.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},Gl.prototype.onMessage=function(e){if(Wr(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return Wr(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},Gl.prototype.writeHandshake=function(){Wr(this.isOpen(),"Writing handshake requires an opened stream"),Wr(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},Gl.prototype.writeMutations=function(e){var t=this;Wr(this.isOpen(),"Writing mutations requires an opened stream"),Wr(this.handshakeComplete_,"Handshake must be complete before writing mutations"),Wr(0<this.lastStreamToken.length,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map((function(e){return t.serializer.toMutation(e)}))};this.sendRequest(n)},Gl);function Gl(e,t,n,r,i){var o=Kl.call(this,e,Xi.WriteStreamConnectionBackoff,Xi.WriteStreamIdle,t,n,i)||this;return o.serializer=r,o.handshakeComplete_=!1,o.lastStreamToken=Gr(),o}var Hl=(Yl.prototype.newPersistentWriteStream=function(e){return new Ql(this.queue,this.connection,this.credentials,this.serializer,e)},Yl.prototype.newPersistentWatchStream=function(e){return new zl(this.queue,this.connection,this.credentials,this.serializer,e)},Yl.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map((function(e){return t.serializer.toMutation(e)}))};return this.invokeRPC("Commit",n).then((function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)}))},Yl.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map((function(e){return t.serializer.toName(e)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=_o();n.forEach((function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)}));var i=[];return e.forEach((function(e){var t=r.get(e);Wr(!!t,"Missing entity in write response for "+e),i.push(t)})),i}))},Yl.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(e,t,r)})).catch((function(e){throw e.code===Yr.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},Yl.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(e,t,r)})).catch((function(e){throw e.code===Yr.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},Yl);function Yl(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}var Xl,Jl,$l,Zl,eh=(th.prototype.lookup=function(e){return u(this,void 0,void 0,(function(){var t,n=this;return c(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new Xr(Yr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach((function(e){e instanceof Ws||e instanceof qs?n.recordVersion(e):zr("Document in a transaction was a "+e.constructor.name)})),[2,t]}}))}))},th.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},th.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e)},th.prototype.delete=function(e){this.write([new Qa(e,this.precondition(e))]),this.writtenDocs.add(e)},th.prototype.commit=function(){return u(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach((function(t){e=e.remove(t.key)})),!e.isEmpty())throw new Xr(Yr.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}}))}))},th.prototype.recordVersion=function(e){var t;if(e instanceof qs)t=e.version;else{if(!(e instanceof Ws))throw zr("Document in a transaction was a "+e.constructor.name);t=po.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new Xr(Yr.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},th.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?Na.updateTime(t):Na.NONE},th.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(this.writtenDocs.has(e)||!t)return Na.exists(!0);if(t.isEqual(po.forDeletedDoc()))throw new Xr(Yr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Na.updateTime(t)},th.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},th.prototype.ensureCommitNotCalled=function(){Wr(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},th);function th(e){this.datastore=e,this.readVersions=Ro(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}(Jl=Xl=Xl||{})[Jl.Unknown=0]="Unknown",Jl[Jl.Online=1]="Online",Jl[Jl.Offline=2]="Offline",(Zl=$l=$l||{})[Zl.RemoteStore=0]="RemoteStore",Zl[Zl.SharedClientState=1]="SharedClientState";var nh,rh,ih=(oh.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Xl.Unknown),Wr(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Xi.OnlineStateTimeout,1e4,(function(){return e.onlineStateTimer=null,Wr(e.state===Xl.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(Xl.Offline),Promise.resolve()})))},oh.prototype.handleWatchStreamFailure=function(e){this.state===Xl.Online?(this.setAndBroadcast(Xl.Unknown),Wr(0===this.watchStreamFailures,"watchStreamFailures must be 0"),Wr(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,1<=this.watchStreamFailures&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(Xl.Offline)))},oh.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===Xl.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},oh.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},oh.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(qr(t),this.shouldWarnClientIsOffline=!1):Br("OnlineStateTracker",t)},oh.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},oh);function oh(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=Xl.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}function ah(e){switch(e){case Yr.OK:return zr("Treated status OK as error");case Yr.CANCELLED:case Yr.UNKNOWN:case Yr.DEADLINE_EXCEEDED:case Yr.RESOURCE_EXHAUSTED:case Yr.INTERNAL:case Yr.UNAVAILABLE:case Yr.UNAUTHENTICATED:return!1;case Yr.INVALID_ARGUMENT:case Yr.NOT_FOUND:case Yr.ALREADY_EXISTS:case Yr.PERMISSION_DENIED:case Yr.FAILED_PRECONDITION:case Yr.ABORTED:case Yr.OUT_OF_RANGE:case Yr.UNIMPLEMENTED:case Yr.DATA_LOSS:return!0;default:return zr("Unknown status code: "+e)}}function sh(e){if(void 0===e)return qr("GRPC error has no .code"),Yr.UNKNOWN;switch(e){case nh.OK:return Yr.OK;case nh.CANCELLED:return Yr.CANCELLED;case nh.UNKNOWN:return Yr.UNKNOWN;case nh.DEADLINE_EXCEEDED:return Yr.DEADLINE_EXCEEDED;case nh.RESOURCE_EXHAUSTED:return Yr.RESOURCE_EXHAUSTED;case nh.INTERNAL:return Yr.INTERNAL;case nh.UNAVAILABLE:return Yr.UNAVAILABLE;case nh.UNAUTHENTICATED:return Yr.UNAUTHENTICATED;case nh.INVALID_ARGUMENT:return Yr.INVALID_ARGUMENT;case nh.NOT_FOUND:return Yr.NOT_FOUND;case nh.ALREADY_EXISTS:return Yr.ALREADY_EXISTS;case nh.PERMISSION_DENIED:return Yr.PERMISSION_DENIED;case nh.FAILED_PRECONDITION:return Yr.FAILED_PRECONDITION;case nh.ABORTED:return Yr.ABORTED;case nh.OUT_OF_RANGE:return Yr.OUT_OF_RANGE;case nh.UNIMPLEMENTED:return Yr.UNIMPLEMENTED;case nh.DATA_LOSS:return Yr.DATA_LOSS;default:return zr("Unknown status code: "+e)}}(rh=nh=nh||{})[rh.OK=0]="OK",rh[rh.CANCELLED=1]="CANCELLED",rh[rh.UNKNOWN=2]="UNKNOWN",rh[rh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rh[rh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rh[rh.NOT_FOUND=5]="NOT_FOUND",rh[rh.ALREADY_EXISTS=6]="ALREADY_EXISTS",rh[rh.PERMISSION_DENIED=7]="PERMISSION_DENIED",rh[rh.UNAUTHENTICATED=16]="UNAUTHENTICATED",rh[rh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rh[rh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rh[rh.ABORTED=10]="ABORTED",rh[rh.OUT_OF_RANGE=11]="OUT_OF_RANGE",rh[rh.UNIMPLEMENTED=12]="UNIMPLEMENTED",rh[rh.INTERNAL=13]="INTERNAL",rh[rh.UNAVAILABLE=14]="UNAVAILABLE",rh[rh.DATA_LOSS=15]="DATA_LOSS";var uh,ch,lh,hh,fh=(dh.emptySet=function(e){return new dh(e.comparator)},dh.prototype.has=function(e){return null!=this.keyedMap.get(e)},dh.prototype.get=function(e){return this.keyedMap.get(e)},dh.prototype.first=function(){return this.sortedSet.minKey()},dh.prototype.last=function(){return this.sortedSet.maxKey()},dh.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},dh.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(dh.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),dh.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},dh.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},dh.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},dh.prototype.isEqual=function(e){if(!(e instanceof dh))return!1;if(this.size!==e.size)return!1;for(var t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},dh.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},dh.prototype.copy=function(e,t){var n=new dh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n},dh);function dh(e){this.comparator=e?function(t,n){return e(t,n)||Hi.comparator(t.key,n.key)}:function(e,t){return Hi.comparator(e.key,t.key)},this.keyedMap=Po(),this.sortedSet=new yo(this.comparator)}(ch=uh=uh||{})[ch.Added=0]="Added",ch[ch.Removed=1]="Removed",ch[ch.Modified=2]="Modified",ch[ch.Metadata=3]="Metadata",(hh=lh=lh||{})[hh.Local=0]="Local",hh[hh.Synced=1]="Synced";var ph=(mh.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==uh.Added&&n.type===uh.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===uh.Metadata&&n.type!==uh.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===uh.Modified&&n.type===uh.Modified?this.changeMap=this.changeMap.insert(t,{type:uh.Modified,doc:e.doc}):e.type===uh.Modified&&n.type===uh.Added?this.changeMap=this.changeMap.insert(t,{type:uh.Added,doc:e.doc}):e.type===uh.Removed&&n.type===uh.Added?this.changeMap=this.changeMap.remove(t):e.type===uh.Removed&&n.type===uh.Modified?this.changeMap=this.changeMap.insert(t,{type:uh.Removed,doc:n.doc}):e.type===uh.Added&&n.type===uh.Removed?this.changeMap=this.changeMap.insert(t,{type:uh.Modified,doc:e.doc}):zr("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},mh.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal((function(t,n){e.push(n)})),e},mh);function mh(){this.changeMap=new yo(Hi.comparator)}var yh=(gh.fromInitialDocuments=function(e,t,n,r){var i=[];return t.forEach((function(e){i.push({type:uh.Added,doc:e})})),new gh(e,t,fh.emptySet(t),i,n,r,!0,!1)},Object.defineProperty(gh.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),gh.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},gh);function gh(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}var vh=(bh.createSynthesizedRemoteEventForCurrentChange=function(e,t){var n,r=((n={})[e]=wh.createSynthesizedTargetChangeForCurrentChange(e,t),n);return new bh(po.MIN,r,Vo(),_o(),Lo())},bh);function bh(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}var wh=(Th.createSynthesizedTargetChangeForCurrentChange=function(e,t){return new Th(Gr(),t,Lo(),Lo(),Lo())},Th);function Th(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}var Eh,Sh,Ch=function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r},Ih=function(e,t){this.targetId=e,this.existenceFilter=t};(Sh=Eh=Eh||{})[Sh.NoChange=0]="NoChange",Sh[Sh.Added=1]="Added",Sh[Sh.Removed=2]="Removed",Sh[Sh.Current=3]="Current",Sh[Sh.Reset=4]="Reset";var kh=function(e,t,n,r){void 0===n&&(n=Gr()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},Dh=(Object.defineProperty(Nh.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(Nh.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(Nh.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(Nh.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),Nh.prototype.updateResumeToken=function(e){0<e.length&&(this._hasPendingChanges=!0,this._resumeToken=e)},Nh.prototype.toTargetChange=function(){var e=Lo(),t=Lo(),n=Lo();return this.documentChanges.forEach((function(r,i){switch(i){case uh.Added:e=e.add(r);break;case uh.Modified:t=t.add(r);break;case uh.Removed:n=n.add(r);break;default:zr("Encountered invalid change type: "+i)}})),new wh(this._resumeToken,this._current,e,t,n)},Nh.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=Ph()},Nh.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},Nh.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},Nh.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},Nh.prototype.recordTargetResponse=function(){this.pendingResponses-=1},Nh.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},Nh);function Nh(){this.pendingResponses=0,this.documentChanges=Ph(),this._resumeToken=Gr(),this._current=!1,this._hasPendingChanges=!0}var _h=(Ah.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof qs?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof Ws&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.removeDocumentFromTarget(r,e.key,e.newDoc)},Ah.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ensureTargetState(n);switch(e.state){case Eh.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case Eh.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case Eh.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),Wr(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case Eh.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case Eh.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:zr("Unknown target watch change state: "+e.state)}}))},Ah.prototype.forEachTarget=function(e,t){0<e.targetIds.length?e.targetIds.forEach(t):ti(this.targetStates,t)},Ah.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.targetDataForActiveTarget(t);if(r){var i=r.target;if(i.isDocumentQuery())if(0===n){var o=new Hi(i.path);this.removeDocumentFromTarget(t,o,new Ws(o,po.forDeletedDoc()))}else Wr(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},Ah.prototype.createRemoteEvent=function(e){var t=this,n={};ti(this.targetStates,(function(r,i){var o=t.targetDataForActiveTarget(r);if(o){if(i.current&&o.target.isDocumentQuery()){var a=new Hi(o.target.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new Ws(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}}));var r=Lo();this.pendingDocumentTargetMapping.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.targetDataForActiveTarget(e);return!n||n.purpose===Bu.LimboResolution||(i=!1)})),i&&(r=r.add(e))}));var i=new vh(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=_o(),this.pendingDocumentTargetMapping=xh(),this.pendingTargetResets=new Co(Ci),i},Ah.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?uh.Modified:uh.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},Ah.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,uh.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},Ah.prototype.removeTarget=function(e){delete this.targetStates[e]},Ah.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},Ah.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},Ah.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new Dh),this.targetStates[e]},Ah.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new Co(Ci),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},Ah.prototype.isActiveTarget=function(e){var t=null!==this.targetDataForActiveTarget(e);return t||Br("WatchChangeAggregator","Detected inactive target",e),t},Ah.prototype.targetDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)},Ah.prototype.resetTarget=function(e){var t=this;Wr(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new Dh,this.metadataProvider.getRemoteKeysForTarget(e).forEach((function(n){t.removeDocumentFromTarget(e,n,null)}))},Ah.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},Ah);function Ah(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=_o(),this.pendingDocumentTargetMapping=xh(),this.pendingTargetResets=new Co(Ci)}function xh(){return new yo(Hi.comparator)}function Ph(){return new yo(Hi.comparator)}var Oh="RemoteStore",Rh=(Mh.prototype.start=function(){return this.enableNetwork()},Mh.prototype.enableNetwork=function(){return u(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Xl.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},Mh.prototype.disableNetwork=function(){return u(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Xl.Offline),[2]}}))}))},Mh.prototype.disableNetworkInternal=function(){return u(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),0<this.writePipeline.length&&(Br(Oh,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},Mh.prototype.shutdown=function(){return u(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return Br(Oh,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(Xl.Unknown),[2]}}))}))},Mh.prototype.listen=function(e){Zr(this.listenTargets,e.targetId)||(this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e))},Mh.prototype.unlisten=function(e){Wr(Zr(this.listenTargets,e),"unlisten called on target no currently watched: "+e),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),ri(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Xl.Unknown))},Mh.prototype.getTargetDataForTarget=function(e){return this.listenTargets[e]||null},Mh.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},Mh.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},Mh.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},Mh.prototype.startWatchStream=function(){Wr(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new _h(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},Mh.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!ri(this.listenTargets)},Mh.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},Mh.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},Mh.prototype.onWatchStreamOpen=function(){return u(this,void 0,void 0,(function(){var e=this;return c(this,(function(t){return ti(this.listenTargets,(function(t,n){e.sendWatchRequest(n)})),[2]}))}))},Mh.prototype.onWatchStreamClose=function(e){return u(this,void 0,void 0,(function(){return c(this,(function(t){return void 0===e&&Wr(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(Xl.Unknown),[2]}))}))},Mh.prototype.onWatchStreamChange=function(e,t){return u(this,void 0,void 0,(function(){var n;return c(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(Xl.Online),e instanceof kh&&e.state===Eh.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof Ch?this.watchChangeAggregator.handleDocumentChange(e):e instanceof Ih?this.watchChangeAggregator.handleExistenceFilter(e):(Wr(e instanceof kh,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(po.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),0<=t.compareTo(n)?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},Mh.prototype.raiseWatchSnapshot=function(e){var t=this;Wr(!e.isEqual(po.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return ti(n.targetChanges,(function(n,r){if(0<r.resumeToken.length){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.withResumeToken(r.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.withResumeToken(Gr(),n.snapshotVersion),t.sendUnwatchRequest(e);var r=new Qu(n.target,e,Bu.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},Mh.prototype.handleTargetError=function(e){var t=this;Wr(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach((function(e){r=r.then((function(){return u(t,void 0,void 0,(function(){return c(this,(function(t){return Zr(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]}))}))}))})),r},Mh.prototype.fillWritePipeline=function(){return u(this,void 0,void 0,(function(){var e,t;return c(this,(function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=0<this.writePipeline.length?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},Mh.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},Mh.prototype.outstandingWrites=function(){return this.writePipeline.length},Mh.prototype.addToWritePipeline=function(e){Wr(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},Mh.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&0<this.writePipeline.length},Mh.prototype.startWriteStream=function(){Wr(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},Mh.prototype.onWriteStreamOpen=function(){return u(this,void 0,void 0,(function(){return c(this,(function(e){return this.writeStream.writeHandshake(),[2]}))}))},Mh.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}})).catch(yc)},Mh.prototype.onMutationResult=function(e,t){var n=this;Wr(0<this.writePipeline.length,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=qo.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then((function(){return n.fillWritePipeline()}))},Mh.prototype.onWriteStreamClose=function(e){return u(this,void 0,void 0,(function(){var t=this;return c(this,(function(n){return void 0===e&&Wr(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&0<this.writePipeline.length?[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then((function(){t.shouldStartWriteStream()&&t.startWriteStream()}))]:[2]}))}))},Mh.prototype.handleHandshakeError=function(e){return u(this,void 0,void 0,(function(){return c(this,(function(t){return ah(e.code)?(Br(Oh,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=Gr(),[2,this.localStore.setLastStreamToken(Gr()).catch(yc)]):[2]}))}))},Mh.prototype.handleWriteError=function(e){return u(this,void 0,void 0,(function(){var t,n=this;return c(this,(function(r){return function(e){return ah(e)&&e!==Yr.ABORTED}(e.code)?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then((function(){return n.fillWritePipeline()}))]):[2]}))}))},Mh.prototype.createTransaction=function(){return new eh(this.datastore)},Mh.prototype.restartNetwork=function(){return u(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Xl.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}}))}))},Mh.prototype.handleCredentialChange=function(){return u(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(Br(Oh,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},Mh.prototype.applyPrimaryState=function(e){return u(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return(this.isPrimary=e)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(Xl.Unknown),t.label=4;case 4:return[2]}}))}))},Mh);function Mh(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback((function(e){n.enqueueAndForget((function(){return u(o,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(Br(Oh,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new ih(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}var Lh=(Object.defineProperty(Fh.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(Fh.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),Fh.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},Fh.prototype._compareTo=function(e){return Ci(this._lat,e._lat)||Ci(this._long,e._long)},Fh);function Fh(e,t){if(oi("GeoPoint",arguments,2),ui("GeoPoint","number",1,e),ui("GeoPoint","number",2,t),!isFinite(e)||e<-90||90<e)throw new Xr(Yr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||180<t)throw new Xr(Yr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}var Vh=(Uh.prototype.applyToLocalView=function(e,t){return new Ts(t,e)},Uh.prototype.applyToRemoteDocument=function(e,t){return t},Uh.prototype.computeBaseValue=function(e){return null},Uh.prototype.isEqual=function(e){return e instanceof Uh},Uh.instance=new Uh,Uh);function Uh(){}var Bh=(qh.prototype.applyToLocalView=function(e,t){return this.apply(e)},qh.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},qh.prototype.apply=function(e){for(var t=Qh(e),n=function(e){t.find((function(t){return t.isEqual(e)}))||t.push(e)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Ls(t)},qh.prototype.computeBaseValue=function(e){return null},qh.prototype.isEqual=function(e){return e instanceof qh&&Ii(e.elements,this.elements)},qh);function qh(e){this.elements=e}var jh=(zh.prototype.applyToLocalView=function(e,t){return this.apply(e)},zh.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},zh.prototype.apply=function(e){for(var t=Qh(e),n=function(e){t=t.filter((function(t){return!t.isEqual(e)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Ls(t)},zh.prototype.computeBaseValue=function(e){return null},zh.prototype.isEqual=function(e){return e instanceof zh&&Ii(e.elements,this.elements)},zh);function zh(e){this.elements=e}var Wh=(Kh.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof cs&&this.operand instanceof cs){var r=n.internalValue+this.operand.internalValue;return new cs(r)}return r=n.internalValue+this.operand.internalValue,new fs(r)},Kh.prototype.applyToRemoteDocument=function(e,t){return Wr(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},Kh.prototype.computeBaseValue=function(e){return e instanceof os?e:new cs(0)},Kh.prototype.isEqual=function(e){return e instanceof Kh&&this.operand.isEqual(e.operand)},Kh);function Kh(e){this.operand=e}function Qh(e){return e instanceof Ls?e.internalValue.slice():[]}var Gh=(Hh.prototype.isEqual=function(e){return e&&e.count===this.count},Hh);function Hh(e){this.count=e}var Yh,Xh,Jh=((Yh={})[el.ASCENDING.name]="ASCENDING",Yh[el.DESCENDING.name]="DESCENDING",Yh),$h=((Xh={})[Rc.LESS_THAN.name]="LESS_THAN",Xh[Rc.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",Xh[Rc.GREATER_THAN.name]="GREATER_THAN",Xh[Rc.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",Xh[Rc.EQUAL.name]="EQUAL",Xh[Rc.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",Xh[Rc.IN.name]="IN",Xh[Rc.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",Xh),Zh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ef(e,t){Wr(!kc(e),t+" is missing")}function tf(e){return"number"==typeof e?e:"string"==typeof e?Number(e):zr("can't parse "+e)}var nf=(rf.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},rf.prototype.unsafeCastProtoByteString=function(e){return e},rf.prototype.fromRpcStatus=function(e){var t=void 0===e.code?Yr.UNKNOWN:sh(e.code);return new Xr(t,e.message||"")},rf.prototype.toInt32Value=function(e){return this.options.useProto3Json||kc(e)?e:{value:e}},rf.prototype.fromInt32Value=function(e){var t;return kc(t="object"==typeof e?e.value:e)?null:t},rf.prototype.toTimestamp=function(e){return this.options.useProto3Json?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}},rf.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);Wr(!!e,"Cannot deserialize null or undefined timestamp.");var t=tf(e.seconds||"0"),n=e.nanos||0;return new ho(t,n)},rf.prototype.fromIso8601String=function(e){var t=0,n=Zh.exec(e);if(Wr(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new ho(o,t)},rf.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},rf.prototype.fromBlob=function(e){return"string"==typeof e?(Wr(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),_i.fromBase64String(e)):(Wr(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),_i.fromUint8Array(e))},rf.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},rf.prototype.fromVersion=function(e){return Wr(!!e,"Trying to deserialize version that isn't set"),po.fromTimestamp(this.fromTimestamp(e))},rf.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},rf.prototype.fromResourceName=function(e){var t=ji.fromString(e);return Wr(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},rf.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},rf.prototype.fromName=function(e){var t=this.fromResourceName(e);return Wr(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),Wr(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new Hi(this.extractLocalPathFromResourceName(t))},rf.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},rf.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?ji.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(rf.prototype,"encodedDatabaseId",{get:function(){return new ji(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),rf.prototype.fullyQualifiedPrefixPath=function(e){return new ji(["projects",e.projectId,"databases",e.database])},rf.prototype.extractLocalPathFromResourceName=function(e){return Wr(4<e.length&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},rf.prototype.isValidResourceName=function(e){return 4<=e.length&&"projects"===e.get(0)&&"databases"===e.get(2)},rf.prototype.toValue=function(e){if(e instanceof Za)return{nullValue:"NULL_VALUE"};if(e instanceof ns)return{booleanValue:e.value()};if(e instanceof cs)return{integerValue:""+e.value()};if(e instanceof fs){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof ms?{stringValue:e.value()}:e instanceof Os?{mapValue:this.toMapValue(e)}:e instanceof Ls?{arrayValue:this.toArrayValue(e)}:e instanceof vs?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof As?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Cs?{bytesValue:this.toBytes(e.value())}:e instanceof Ds?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:zr("Unknown FieldValue "+JSON.stringify(e))},rf.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return Za.INSTANCE;if("booleanValue"in e)return ns.of(e.booleanValue);if("integerValue"in e)return new cs(tf(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return fs.NAN;if("Infinity"===e.doubleValue)return fs.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return fs.NEGATIVE_INFINITY}return new fs(e.doubleValue)}if("stringValue"in e)return new ms(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){ef(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new Ls(n.map((function(e){return t.fromValue(e)})))}if("timestampValue"in e)return ef(e.timestampValue,"timestampValue"),new vs(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){ef(e.geoPointValue,"geoPointValue");var r=e.geoPointValue.latitude||0,i=e.geoPointValue.longitude||0;return new As(new Lh(r,i))}if("bytesValue"in e){ef(e.bytesValue,"bytesValue");var o=this.fromBlob(e.bytesValue);return new Cs(o)}if("referenceValue"in e){ef(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),s=new Ri(a.get(1),a.get(3)),u=new Hi(this.extractLocalPathFromResourceName(a));return new Ds(s,u)}return zr("Unknown Value proto "+JSON.stringify(e))},rf.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},rf.prototype.toDocument=function(e){return Wr(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},rf.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),i=this.fromVersion(e.updateTime);return new qs(r,i,{hasCommittedMutations:!!t},void 0,e,(function(e){return n.fromValue(e)}))},rf.prototype.toFields=function(e){var t=this,n={};return e.forEach((function(e,r){n[e]=t.toValue(r)})),n},rf.prototype.fromFields=function(e){var t=this,n=e,r=Os.EMPTY;return ni(n,(function(e,n){r=r.set(new Qi([e]),t.fromValue(n))})),r},rf.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},rf.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach((function(e){n.push(t.toValue(e))})),{values:n}},rf.prototype.fromFound=function(e){var t=this;Wr(!!e.found,"Tried to deserialize a found document from a missing document."),ef(e.found.name,"doc.found.name"),ef(e.found.updateTime,"doc.found.updateTime");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new qs(n,r,{},void 0,e.found,(function(e){return t.fromValue(e)}))},rf.prototype.fromMissing=function(e){Wr(!!e.missing,"Tried to deserialize a missing document from a found document."),Wr(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new Ws(t,n)},rf.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):zr("invalid batch get response: "+JSON.stringify(e))},rf.prototype.toWatchTargetChangeState=function(e){switch(e){case Eh.Added:return"ADD";case Eh.Current:return"CURRENT";case Eh.NoChange:return"NO_CHANGE";case Eh.Removed:return"REMOVE";case Eh.Reset:return"RESET";default:return zr("Unknown WatchTargetChangeState: "+e)}},rf.prototype.toTestWatchChange=function(e){if(e instanceof Ih)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof Ch){if(e.newDoc instanceof qs){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof Ws)return t=e.newDoc,{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}};if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof kh){var n=void 0;return e.cause&&(n={code:function(e){if(void 0===e)return nh.OK;switch(e){case Yr.OK:return nh.OK;case Yr.CANCELLED:return nh.CANCELLED;case Yr.UNKNOWN:return nh.UNKNOWN;case Yr.DEADLINE_EXCEEDED:return nh.DEADLINE_EXCEEDED;case Yr.RESOURCE_EXHAUSTED:return nh.RESOURCE_EXHAUSTED;case Yr.INTERNAL:return nh.INTERNAL;case Yr.UNAVAILABLE:return nh.UNAVAILABLE;case Yr.UNAUTHENTICATED:return nh.UNAUTHENTICATED;case Yr.INVALID_ARGUMENT:return nh.INVALID_ARGUMENT;case Yr.NOT_FOUND:return nh.NOT_FOUND;case Yr.ALREADY_EXISTS:return nh.ALREADY_EXISTS;case Yr.PERMISSION_DENIED:return nh.PERMISSION_DENIED;case Yr.FAILED_PRECONDITION:return nh.FAILED_PRECONDITION;case Yr.ABORTED:return nh.ABORTED;case Yr.OUT_OF_RANGE:return nh.OUT_OF_RANGE;case Yr.UNIMPLEMENTED:return nh.UNIMPLEMENTED;case Yr.DATA_LOSS:return nh.DATA_LOSS;default:return zr("Unknown status code: "+e)}}(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return zr("Unrecognized watch change: "+JSON.stringify(e))},rf.prototype.fromWatchChange=function(e){var t,n=this;if("targetChange"in e){ef(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),a=e.targetChange.cause,s=a&&this.fromRpcStatus(a);t=new kh(r,i,o,s||null)}else if("documentChange"in e){ef(e.documentChange,"documentChange");var u=e.documentChange;ef(u.document,"documentChange.name"),ef(u.document.name,"documentChange.document.name"),ef(u.document.updateTime,"documentChange.document.updateTime");var c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=new qs(c,l,{},void 0,u.document,(function(e){return n.fromValue(e)})),f=u.targetIds||[],d=u.removedTargetIds||[];t=new Ch(f,d,h.key,h)}else if("documentDelete"in e){ef(e.documentDelete,"documentDelete");var p=e.documentDelete;ef(p.document,"documentDelete.document"),c=this.fromName(p.document),l=p.readTime?this.fromVersion(p.readTime):po.forDeletedDoc(),h=new Ws(c,l),d=p.removedTargetIds||[],t=new Ch([],d,h.key,h)}else if("documentRemove"in e){ef(e.documentRemove,"documentRemove");var m=e.documentRemove;ef(m.document,"documentRemove"),c=this.fromName(m.document),d=m.removedTargetIds||[],t=new Ch([],d,c,null)}else{if(!("filter"in e))return zr("Unknown change type "+JSON.stringify(e));ef(e.filter,"filter");var y=e.filter;ef(y.targetId,"filter.targetId");var g=y.count||0,v=new Gh(g),b=y.targetId;t=new Ih(b,v)}return t},rf.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?Eh.NoChange:"ADD"===e?Eh.Added:"REMOVE"===e?Eh.Removed:"CURRENT"===e?Eh.Current:"RESET"===e?Eh.Reset:zr("Got unexpected TargetChange.state: "+e)},rf.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return po.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?po.MIN:t.readTime?this.fromVersion(t.readTime):po.MIN},rf.prototype.toMutation=function(e){var t,n=this;if(e instanceof Oa)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof Qa)t={delete:this.toName(e.key)};else if(e instanceof La)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof Ua))return zr("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map((function(e){return n.toFieldTransform(e)}))}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},rf.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):Na.NONE;if(e.update){ef(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new La(r,i,o,n)}return new Oa(r,i,n)}if(e.delete)return r=this.fromName(e.delete),new Qa(r,n);if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map((function(e){return t.fromFieldTransform(e)}));return Wr(!0===n.exists,'Transforms only support precondition "exists == true"'),new Ua(r,a)}return zr("unknown mutation proto: "+JSON.stringify(e))},rf.prototype.toPrecondition=function(e){return Wr(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:zr("Unknown precondition")},rf.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?Na.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?Na.exists(e.exists):Na.NONE},rf.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t);r.isEqual(po.MIN)&&(r=this.fromVersion(t));var i=null;return e.transformResults&&0<e.transformResults.length&&(i=e.transformResults.map((function(e){return n.fromValue(e)}))),new Da(r,i)},rf.prototype.fromWriteResults=function(e,t){var n=this;return e&&0<e.length?(Wr(void 0!==t,"Received a write result without a commit time"),e.map((function(e){return n.fromWriteResult(e,t)}))):[]},rf.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof Vh)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Bh)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof jh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof Wh)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw zr("Unknown transform: "+e.transform)},rf.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)Wr("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=Vh.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Bh(r.map((function(e){return t.fromValue(e)})))}else if("removeAllFromArray"in e)r=e.removeAllFromArray.values||[],n=new jh(r.map((function(e){return t.fromValue(e)})));else if("increment"in e){var i=this.fromValue(e.increment);Wr(i instanceof os,"NUMERIC_ADD transform requires a NumberValue"),n=new Wh(i)}else zr("Unknown transform proto: "+JSON.stringify(e));var o=Qi.fromServerFormat(e.fieldPath);return new Sa(o,n)},rf.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},rf.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;Wr(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return Pc.atPath(this.fromQueryPath(n)).toTarget()},rf.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(Wr(n.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(Wr(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},rf.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(0<r){Wr(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new Pc(t,i,s,a,u,Nc.First,c,l).toTarget()},rf.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},rf.prototype.toLabel=function(e){switch(e){case Bu.Listen:return null;case Bu.ExistenceFilterMismatch:return"existence-filter-mismatch";case Bu.LimboResolution:return"limbo-document";default:return zr("Unrecognized query purpose: "+e)}},rf.prototype.toTarget=function(e){var t,n=e.target;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,0<e.resumeToken.length&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},rf.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map((function(e){return e instanceof Fc?t.toUnaryOrFieldFilter(e):zr("Unrecognized filter: "+JSON.stringify(e))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},rf.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t.fromFilter(e)})).reduce((function(e,t){return e.concat(t)})):zr("Unknown filter: "+JSON.stringify(e)):[]},rf.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map((function(e){return t.toPropertyOrder(e)}))},rf.prototype.fromOrder=function(e){var t=this;return e.map((function(e){return t.fromPropertyOrder(e)}))},rf.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map((function(e){return t.toValue(e)}))}},rf.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map((function(e){return t.fromValue(e)}));return new nl(r,n)},rf.prototype.toDirection=function(e){return Jh[e.name]},rf.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return el.ASCENDING;case"DESCENDING":return el.DESCENDING;default:return}},rf.prototype.toOperatorName=function(e){return $h[e.name]},rf.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return Rc.EQUAL;case"GREATER_THAN":return Rc.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Rc.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Rc.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Rc.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Rc.ARRAY_CONTAINS;case"IN":return Rc.IN;case"ARRAY_CONTAINS_ANY":return Rc.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return zr("Unspecified operator");default:return zr("Unknown operator")}},rf.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},rf.prototype.fromFieldPathReference=function(e){return Qi.fromServerFormat(e.fieldPath)},rf.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},rf.prototype.fromPropertyOrder=function(e){return new il(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},rf.prototype.fromFieldFilter=function(e){return Fc.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},rf.prototype.toUnaryOrFieldFilter=function(e){if(e.op===Rc.EQUAL){if(e.value.isEqual(fs.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(Za.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},rf.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return Fc.create(t,Rc.EQUAL,fs.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return Fc.create(n,Rc.EQUAL,Za.INSTANCE);case"OPERATOR_UNSPECIFIED":return zr("Unspecified filter");default:return zr("Unknown filter")}},rf.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}},rf.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map((function(e){return Qi.fromServerFormat(e)}));return Ta.fromArray(t)},rf);function rf(e,t){this.databaseId=e,this.options=t}var of=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},af=(sf.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new of,this.queries.set(t,r)),r.listeners.push(e),Wr(!e.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),!r.viewSnap||e.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent(),n?this.syncEngine.listen(t).then((function(e){return r.targetId=e})):Promise.resolve(r.targetId)},sf.prototype.unlisten=function(e){return u(this,void 0,void 0,(function(){var t,n,r,i;return c(this,(function(o){return t=e.query,n=!1,(r=this.queries.get(t))&&0<=(i=r.listeners.indexOf(e))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]}))}))},sf.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n],o=i.query,a=this.queries.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++)u[s].onViewSnapshot(i)&&(t=!0);a.viewSnap=i}}t&&this.raiseSnapshotsInSyncEvent()},sf.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(t);this.queries.delete(e)},sf.prototype.onOnlineStateChange=function(e){this.onlineState=e;var t=!1;this.queries.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].applyOnlineStateChange(e)&&(t=!0)})),t&&this.raiseSnapshotsInSyncEvent()},sf.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},sf.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},sf.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(e){e.next()}))},sf);function sf(e){this.syncEngine=e,this.queries=new Ys((function(e){return e.canonicalId()})),this.onlineState=Xl.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}var uf=(cf.prototype.onViewSnapshot=function(e){if(Wr(0<e.docChanges.length||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==uh.Metadata&&t.push(i)}e=new yh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),o=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),o=!0),this.snap=e,o},cf.prototype.onError=function(e){this.queryObserver.error(e)},cf.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},cf.prototype.shouldRaiseInitialEvent=function(e,t){if(Wr(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==Xl.Offline;return this.options.waitForSyncWhenOnline&&n?(Wr(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===Xl.Offline},cf.prototype.shouldRaiseEvent=function(e){if(0<e.docChanges.length)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},cf.prototype.raiseInitialEvent=function(e){Wr(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=yh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},cf);function cf(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=Xl.Unknown,this.options=n||{}}var lf=(hf.fromSnapshot=function(e,t){for(var n=Lo(),r=Lo(),i=0,o=t.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case uh.Added:n=n.add(a.doc.key);break;case uh.Removed:r=r.add(a.doc.key)}}return new hf(e,t.fromCache,n,r)},hf);function hf(e,t,n,r){this.targetId=e,this.fromCache=t,this.addedKeys=n,this.removedKeys=r}var ff=function(e){this.key=e},df=function(e){this.key=e},pf=(Object.defineProperty(mf.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),mf.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new ph,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimitToFirst()&&i.size===this.query.limit?i.last():null,c=this.query.hasLimitToLast()&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=t instanceof qs?t:null;h&&(Wr(e.isEqual(h.key),"Mismatching keys found in document changes: "+e+" != "+h.key),h=n.query.matches(h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:uh.Metadata,doc:h}),p=!0):n.shouldWaitForSyncedDocument(l,h)||(r.track({type:uh.Modified,doc:h}),p=!0,(u&&0<n.query.docComparator(h,u)||c&&n.query.docComparator(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:uh.Added,doc:h}),p=!0):l&&!h&&(r.track({type:uh.Removed,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(o=h?(a=a.add(h),d?o.add(e):o.delete(e)):(a=a.delete(e),o.delete(e)))})),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;a.size>this.query.limit;){var l=this.query.hasLimitToFirst()?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:uh.Removed,doc:l})}return Wr(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},mf.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},mf.prototype.applyChanges=function(e,t,n){var r=this;Wr(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort((function(e,t){return function(e,t){function n(e){switch(e){case uh.Added:return 1;case uh.Modified:case uh.Metadata:return 2;case uh.Removed:return 0;default:return zr("Unknown ChangeType: "+e)}}return n(e)-n(t)}(e.type,t.type)||r.query.docComparator(e.doc,t.doc)})),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?lh.Synced:lh.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new yh(this.query,e.documentSet,i,o,e.mutatedKeys,s===lh.Local,u,!1),limboChanges:a}:{limboChanges:a}},mf.prototype.applyOnlineStateChange=function(e){return this.current&&e===Xl.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new ph,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},mf.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations},mf.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.add(e)})),e.modifiedDocuments.forEach((function(e){return Wr(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")})),e.removedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)})),this.current=e.current)},mf.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=Lo(),this.documentSet.forEach((function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))}));var n=[];return t.forEach((function(t){e.limboDocuments.has(t)||n.push(new df(t))})),this.limboDocuments.forEach((function(e){t.has(e)||n.push(new ff(e))})),n},mf.prototype.synchronizeWithPersistedState=function(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=Lo();var t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)},mf.prototype.computeInitialSnapshot=function(){return yh.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===lh.Local)},mf);function mf(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=Lo(),this.mutatedKeys=Lo(),this.documentSet=new fh(e.docComparator.bind(e))}var yf=(gf.prototype.run=function(){this.runWithBackOff()},gf.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun((function(){return u(e,void 0,void 0,(function(){var e,t,n=this;return c(this,(function(r){return e=this.remoteStore.createTransaction(),(t=this.tryRunUpdateFunction(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.handleTransactionError(e)}))}))})).catch((function(e){n.handleTransactionError(e)})),[2]}))}))}))},gf.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!kc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},gf.prototype.handleTransactionError=function(e){var t=this;0<this.retries&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget((function(){return t.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(e)},gf.prototype.isRetryableTransactionError=function(e){if("FirebaseError"!==e.name)return!1;var t=e.code;return"aborted"===t||"failed-precondition"===t||!ah(t)},gf);function gf(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=5,this.backoff=new Ml(this.asyncQueue,Xi.RetryTransaction)}var vf="SyncEngine",bf=function(e,t,n){this.query=e,this.targetId=t,this.view=n},wf=function(e){this.key=e,this.receivedDocument=!1},Tf=(Object.defineProperty(Ef.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),Ef.prototype.subscribe=function(e){Wr(null!==e,"SyncEngine listener cannot be null"),Wr(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},Ef.prototype.listen=function(e){return u(this,void 0,void 0,(function(){var t,n,r,i,o;return c(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(e.toTarget())];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(e,t,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}}))}))},Ef.prototype.initializeViewAndComputeSnapshot=function(e,t,n){return u(this,void 0,void 0,(function(){var r,i,o,a,s,u;return c(this,(function(c){switch(c.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return r=c.sent(),i=new pf(e,r.remoteKeys),o=i.computeDocChanges(r.documents),a=wh.createSynthesizedTargetChangeForCurrentChange(t,n&&this.onlineState!==Xl.Offline),Wr(0===(s=i.applyChanges(o,!0===this.isPrimary,a)).limboChanges.length,"View returned limbo docs before target ack from the server."),Wr(!!s.snapshot,"applyChanges for new view should always return a snapshot"),u=new bf(e,t,i),this.queryViewsByQuery.set(e,u),this.queriesByTarget[t]||(this.queriesByTarget[t]=[]),this.queriesByTarget[t].push(e),[2,s.snapshot]}}))}))},Ef.prototype.synchronizeViewAndComputeSnapshot=function(e){return u(this,void 0,void 0,(function(){var t,n;return c(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(e.query,!0)];case 1:return t=r.sent(),n=e.view.synchronizeWithPersistedState(t),this.isPrimary&&this.updateTrackedLimbos(e.targetId,n.limboChanges),[2,n]}}))}))},Ef.prototype.unlisten=function(e){return u(this,void 0,void 0,(function(){var t,n,r=this;return c(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),Wr(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),1<(n=this.queriesByTarget[t.targetId]).length?(this.queriesByTarget[t.targetId]=n.filter((function(t){return!t.isEqual(e)})),this.queryViewsByQuery.delete(e),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseTarget(t.targetId,!1).then((function(){r.sharedClientState.clearQueryState(t.targetId),r.remoteStore.unlisten(t.targetId),r.removeAndCleanupTarget(t.targetId)})).catch(yc)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(t.targetId),[4,this.localStore.releaseTarget(t.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},Ef.prototype.write=function(e,t){return u(this,void 0,void 0,(function(){var n;return c(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},Ef.prototype.runTransaction=function(e,t,n){new yf(e,this.remoteStore,t,n).run()},Ef.prototype.applyRemoteEvent=function(e){return u(this,void 0,void 0,(function(){var t,n=this;return c(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),ni(e.targetChanges,(function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(Wr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),0<t.addedDocuments.size?r.receivedDocument=!0:0<t.modifiedDocuments.size?Wr(r.receivedDocument,"Received change for limbo target document without add."):0<t.removedDocuments.size&&(Wr(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,yc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},Ef.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===$l.RemoteStore||!this.isPrimary&&t===$l.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach((function(t,r){var i=r.view.applyOnlineStateChange(e);Wr(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},Ef.prototype.rejectListen=function(e,t){return u(this,void 0,void 0,(function(){var n,r,i,o,a,s=this;return c(this,(function(u){switch(u.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new yo(Hi.comparator)).insert(r,new Ws(r,po.forDeletedDoc())),o=Lo().add(r),a=new vh(po.MIN,{},new Co(Ci),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return[4,this.localStore.releaseTarget(e,!1).then((function(){return s.removeAndCleanupTarget(e,t)})).catch(yc)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))},Ef.prototype.applyBatchState=function(e,t,n){return u(this,void 0,void 0,(function(){var r;return c(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(Br(vf,"Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):zr("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}}))}))},Ef.prototype.applySuccessfulWrite=function(e){return u(this,void 0,void 0,(function(){var t,n;return c(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),t=e.batch.batchId,this.processUserCallback(t,null),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,yc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},Ef.prototype.rejectFailedWrite=function(e,t){return u(this,void 0,void 0,(function(){var n;return c(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,yc(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},Ef.prototype.registerPendingWritesCallback=function(e){return u(this,void 0,void 0,(function(){var t,n;return c(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||Br(vf,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=r.sent())?e.resolve():((n=this.pendingWritesCallbacks.get(t)||[]).push(e),this.pendingWritesCallbacks.set(t,n)),[2]}}))}))},Ef.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach((function(e){e.resolve()})),this.pendingWritesCallbacks.delete(e)},Ef.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach((function(t){t.forEach((function(t){t.reject(new Xr(Yr.CANCELLED,e))}))})),this.pendingWritesCallbacks.clear()},Ef.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n=(n=n||new yo(Ci)).insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},Ef.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(Wr(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},Ef.prototype.removeAndCleanupTarget=function(e,t){var n=this;void 0===t&&(t=null),this.sharedClientState.removeLocalQueryTarget(e),Wr(this.queriesByTarget[e]&&0!==this.queriesByTarget[e].length,"There are no queries mapped to target id "+e);for(var r=0,i=this.queriesByTarget[e];r<i.length;r++){var o=i[r];this.queryViewsByQuery.delete(o),t&&this.syncEngineListener.onWatchError(o,t)}if(delete this.queriesByTarget[e],this.isPrimary){var a=this.limboDocumentRefs.referencesForId(e);this.limboDocumentRefs.removeReferencesForId(e),a.forEach((function(e){n.limboDocumentRefs.containsKey(e)||n.removeLimboTarget(e)}))}},Ef.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},Ef.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];i instanceof ff?(this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i)):i instanceof df?(Br(vf,"Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):zr("Unknown limbo change: "+JSON.stringify(i))}},Ef.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){Br(vf,"New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=Pc.atPath(t.path);this.limboResolutionsByTarget[n]=new wf(t),this.remoteStore.listen(new Qu(r.toTarget(),n,Bu.LimboResolution,Li.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},Ef.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},Ef.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return u(this,void 0,void 0,(function(){var n,r,i,o=this;return c(this,(function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach((function(a,s){i.push(Promise.resolve().then((function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query,!1).then((function(e){var n=e.documents;return s.view.computeDocChanges(n,t)})):t})).then((function(e){var i=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=lf.fromSnapshot(s.targetId,a.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}}))}))},Ef.prototype.assertSubscribed=function(e){Wr(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},Ef.prototype.handleCredentialChange=function(e){return u(this,void 0,void 0,(function(){var t,n;return c(this,(function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},Ef.prototype.applyPrimaryState=function(e){return u(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u=this;return c(this,(function(c){switch(c.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return c.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=c.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],s=Promise.resolve(),ti(this.queriesByTarget,(function(e,t){u.sharedClientState.isLocalQueryTarget(e)?a.push(e):s=s.then((function(){return u.removeAndCleanupTarget(e),u.localStore.releaseTarget(e,!0)})),u.remoteStore.unlisten(e)})),[4,s]);case 4:return c.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return c.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))},Ef.prototype.resetLimboDocuments=function(){var e=this;ti(this.limboResolutionsByTarget,(function(t){e.remoteStore.unlisten(t)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new yo(Hi.comparator)},Ef.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return u(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,l,h,f,d,p;return c(this,(function(c){switch(c.label){case 0:t=[],n=[],r=0,i=e,c.label=1;case 1:return r<i.length?(o=i[r],a=void 0,(s=this.queriesByTarget[o])&&0!==s.length?[4,this.localStore.releaseTarget(o,!0)]:[3,8]):[3,14];case 2:return c.sent(),[4,this.localStore.allocateTarget(s[0].toTarget())];case 3:a=c.sent(),u=0,l=s,c.label=4;case 4:return u<l.length?(h=l[u],Wr(!!(f=this.queryViewsByQuery.get(h)),"No query view found for "+h),[4,this.synchronizeViewAndComputeSnapshot(f)]):[3,7];case 5:(d=c.sent()).snapshot&&n.push(d.snapshot),c.label=6;case 6:return u++,[3,4];case 7:return[3,12];case 8:return Wr(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(o)];case 9:return Wr(!!(p=c.sent()),"Target for id "+o+" not found"),[4,this.localStore.allocateTarget(p)];case 10:return a=c.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(p),o,!1)];case 11:c.sent(),c.label=12;case 12:t.push(a),c.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,t]}}))}))},Ef.prototype.synthesizeTargetToQuery=function(e){return new Pc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,Nc.First,e.startAt,e.endAt)},Ef.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},Ef.prototype.applyTargetState=function(e,t,n){return u(this,void 0,void 0,(function(){var r,i;return c(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return Br(vf,"Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[e])return[3,7];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=o.sent(),i=vh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(e,!0)];case 5:return o.sent(),this.removeAndCleanupTarget(e,n),[3,7];case 6:zr("Unexpected target state: "+t),o.label=7;case 7:return[2]}}))}))},Ef.prototype.applyActiveTargetsChange=function(e,t){return u(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,l,h,f=this;return c(this,(function(d){switch(d.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,d.label=1;case 1:return n<r.length?(h=r[n],Wr(!this.queriesByTarget[h],"Trying to add an already active target"),[4,this.localStore.getTarget(h)]):[3,6];case 2:return Wr(!!(i=d.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateTarget(i)];case 3:return o=d.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(i),o.targetId,!1)];case 4:d.sent(),this.remoteStore.listen(o),d.label=5;case 5:return n++,[3,1];case 6:a=function(e){return c(this,(function(t){switch(t.label){case 0:return s.queriesByTarget[e]?[4,s.localStore.releaseTarget(e,!1).then((function(){f.remoteStore.unlisten(e),f.removeAndCleanupTarget(e)})).catch(yc)]:[2,"continue"];case 1:return t.sent(),[2]}}))},s=this,u=0,l=t,d.label=7;case 7:return u<l.length?(h=l[u],[5,a(h)]):[3,10];case 8:d.sent(),d.label=9;case 9:return u++,[3,7];case 10:return[2]}}))}))},Ef.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},Ef.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},Ef.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];if(t&&t.receivedDocument)return Lo().add(t.key);var n=Lo(),r=this.queriesByTarget[e];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.queryViewsByQuery.get(a);Wr(!!s,"No query view found for "+a),n=n.unionWith(s.view.syncedDocuments)}return n},Ef);function Ef(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Ys((function(e){return e.canonicalId()})),this.queriesByTarget={},this.limboTargetsByKey=new yo(Hi.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new fl,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=da.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Xl.Unknown}var Sf=(Cf.prototype.isAuthenticated=function(){return null!=this.uid},Cf.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},Cf.prototype.isEqual=function(e){return e.uid===this.uid},Cf.UNAUTHENTICATED=new Cf(null),Cf.GOOGLE_CREDENTIALS=new Cf("google-credentials-uid"),Cf.FIRST_PARTY=new Cf("first-party-uid"),Cf);function Cf(e){this.uid=e}var If="firestore_clients";function kf(e,t){return Wr(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),If+"_"+e+"_"+t}var Df="firestore_mutations";function Nf(e,t,n){var r=Df+"_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}var _f="firestore_targets";function Af(e,t){return _f+"_"+e+"_"+t}var xf="firestore_online_state",Pf="firestore_sequence_number",Of="SharedClientState",Rf=(Mf.fromWebStorageEntry=function(e,t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Xr(r.error.code,r.error.message)),i?new Mf(e,t,r.state,o):(qr(Of,"Failed to parse mutation state for ID '"+t+"': "+n),null)},Mf.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},Mf);function Mf(e,t,n,r){this.user=e,this.batchId=t,this.state=n,Wr(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}var Lf=(Ff.fromWebStorageEntry=function(e,t){var n=JSON.parse(t),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new Xr(n.error.code,n.error.message)),r?new Ff(e,n.state,i):(qr(Of,"Failed to parse target state for ID '"+e+"': "+t),null)},Ff.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},Ff);function Ff(e,t,n){this.targetId=e,this.state=t,Wr(void 0!==(this.error=n)==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}var Vf=(Uf.fromWebStorageEntry=function(e,t){for(var n=JSON.parse(t),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Vo(),o=0;r&&o<n.activeTargetIds.length;++o)r=Dc(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new Uf(e,i):(qr(Of,"Failed to parse client data for instance '"+e+"': "+t),null)},Uf);function Uf(e,t){this.clientId=e,this.activeTargetIds=t}var Bf=(qf.fromWebStorageEntry=function(e){var t=JSON.parse(e);return"object"==typeof t&&t.onlineState in Xl&&"string"==typeof t.clientId?new qf(t.clientId,Xl[t.onlineState]):(qr(Of,"Failed to parse online state: "+e),null)},qf);function qf(e,t){this.clientId=e,this.onlineState=t}var jf=(zf.prototype.addQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},zf.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},zf.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},zf);function zf(){this.activeTargetIds=Vo()}var Wf=(Kf.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},Kf.prototype.start=function(){return u(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,u,l,h,f=this;return c(this,(function(c){switch(c.label){case 0:return Wr(!this.started,"WebStorageSharedClientState already started"),Wr(null!==this.syncEngine,"syncEngine property must be set before calling start()"),Wr(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=c.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(kf(this.persistenceKey,r)))&&(o=Vf.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(s=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(s),u=0,l=this.earlyEvents;u<l.length;u++)h=l[u],this.handleWebStorageEvent(h);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},Kf.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},Kf.prototype.getAllActiveQueryTargets=function(){var e=Vo();return ni(this.activeClients,(function(t,n){e=e.unionWith(n.activeTargetIds)})),e},Kf.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},Kf.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},Kf.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},Kf.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Af(this.persistenceKey,e));if(n){var r=Lf.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},Kf.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},Kf.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},Kf.prototype.clearQueryState=function(e){this.removeItem(Af(this.persistenceKey,e))},Kf.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},Kf.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.removeMutationState(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},Kf.prototype.setOnlineState=function(e){this.persistOnlineState(e)},Kf.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},Kf.prototype.getItem=function(e){var t=this.storage.getItem(e);return Br(Of,"READ",e,t),t},Kf.prototype.setItem=function(e,t){Br(Of,"SET",e,t),this.storage.setItem(e,t)},Kf.prototype.removeItem=function(e){Br(Of,"REMOVE",e),this.storage.removeItem(e)},Kf.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(Br(Of,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void qr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return u(t,void 0,void 0,(function(){var t,n,r,i,o,a;return c(this,(function(s){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(Wr(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(e){var t=Li.INVALID;if(null!=e)try{var n=JSON.parse(e);Wr("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(e){qr(Of,"Failed to read sequence number from WebStorage",e)}return t}(e.newValue))!==Li.INVALID&&this.sequenceNumberHandler(a));return[2]}))}))}))}},Object.defineProperty(Kf.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),Kf.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},Kf.prototype.persistMutationState=function(e,t,n){var r=new Rf(this.currentUser,e,t,n),i=Nf(this.persistenceKey,this.currentUser,e);this.setItem(i,r.toWebStorageJSON())},Kf.prototype.removeMutationState=function(e){var t=Nf(this.persistenceKey,this.currentUser,e);this.removeItem(t)},Kf.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:Xl[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},Kf.prototype.persistQueryTargetState=function(e,t,n){var r=Af(this.persistenceKey,e),i=new Lf(e,t,n);this.setItem(r,i.toWebStorageJSON())},Kf.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},Kf.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return Wr(null!==n,"Cannot parse client state key '"+e+"'"),Vf.fromWebStorageEntry(n,t)},Kf.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);Wr(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Rf.fromWebStorageEntry(new Sf(i),r,t)},Kf.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);Wr(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return Lf.fromWebStorageEntry(r,t)},Kf.prototype.fromWebStorageOnlineState=function(e){return Bf.fromWebStorageEntry(e)},Kf.prototype.handleMutationBatchEvent=function(e){return u(this,void 0,void 0,(function(){return c(this,(function(t){return e.user.uid!==this.currentUser.uid?(Br(Of,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]}))}))},Kf.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},Kf.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach((function(e){return u(n,void 0,void 0,(function(){return c(this,(function(t){return r.has(e)||o.push(e),[2]}))}))})),r.forEach((function(e){return u(n,void 0,void 0,(function(){return c(this,(function(t){return i.has(e)||a.push(e),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(o,a)},Kf.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},Kf);function Kf(e,t,n,r,i){if(this.queue=e,this.platform=t,this.persistenceKey=n,this.localClientId=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!Kf.isAvailable(this.platform))throw new Xr(Yr.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.localClientStorageKey=kf(this.persistenceKey,this.localClientId),this.sequenceNumberKey=function(e){return Pf+"_"+e}(this.persistenceKey),this.activeClients[this.localClientId]=new jf,this.clientStateKeyRe=new RegExp("^"+If+"_"+o+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Df+"_"+o+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+_f+"_"+o+"_(\\d+)$"),this.onlineStateKey=function(e){return xf+"_"+e}(this.persistenceKey),this.platform.window.addEventListener("storage",this.storageListener)}var Qf=(Gf.prototype.addPendingMutation=function(e){},Gf.prototype.updateMutationState=function(e,t,n){},Gf.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},Gf.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},Gf.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},Gf.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},Gf.prototype.clearQueryState=function(e){delete this.queryState[e]},Gf.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},Gf.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},Gf.prototype.start=function(){return this.localState=new jf,Promise.resolve()},Gf.prototype.handleUserChange=function(e,t,n){},Gf.prototype.setOnlineState=function(e){},Gf.prototype.shutdown=function(){},Gf.prototype.writeSequenceNumber=function(e){},Gf);function Gf(){this.localState=new jf,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}var Hf="FirestoreClient",Yf=(Xf.prototype.lruParams=function(){return ec.withCacheSize(this.cacheSizeBytes)},Xf);function Xf(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}var Jf=function(){},$f=(Zf.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new $i,r=new $i,i=!1;return this.credentials.setChangeListener((function(o){i?t.asyncQueue.enqueueAndForget((function(){return t.handleCredentialChange(o)})):(i=!0,t.initializePersistence(e,r,o).then((function(e){return t.initializeRest(o,e)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},Zf.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.enableNetwork()}))},Zf.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof Yf?this.startIndexedDbPersistence(n,e).then((function(e){return t.resolve(),e})).catch((function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()})):(t.resolve(),this.startMemoryPersistence())},Zf.prototype.canFallback=function(e){return e instanceof Xr?e.code===Yr.FAILED_PRECONDITION||e.code===Yr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code},Zf.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Xr(Yr.FAILED_PRECONDITION,"The client has already been terminated.")},Zf.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=pc.buildStoragePrefix(this.databaseInfo),i=new nf(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return u(n,void 0,void 0,(function(){var n,o;return c(this,(function(a){switch(a.label){case 0:if(t.synchronizeTabs&&!Wf.isAvailable(this.platform))throw new Xr(Yr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=t.lruParams(),this.sharedClientState=t.synchronizeTabs?new Wf(this.asyncQueue,this.platform,r,this.clientId,e):new Qf,[4,pc.createIndexedDbPersistence({allowTabSynchronization:t.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return o=a.sent(),[2,(this.persistence=o).referenceDelegate.garbageCollector]}}))}))}))},Zf.prototype.startMemoryPersistence=function(){return this.persistence=kl.createEagerPersistence(this.clientId),this.sharedClientState=new Qf,Promise.resolve(null)},Zf.prototype.initializeRest=function(e,t){var n=this;return Br(Hf,"Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return u(n,void 0,void 0,(function(){var n,i,o,a,s,l,h=this;return c(this,(function(f){switch(f.label){case 0:return n=new ul,this.localStore=new yl(this.persistence,n,e),[4,this.localStore.start()];case 1:return f.sent(),t&&(this.lruScheduler=new nc(t,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),o=this.platform.newSerializer(this.databaseInfo.databaseId),a=new Hl(this.asyncQueue,r,this.credentials,o),s=function(e){return h.syncEngine.applyOnlineStateChange(e,$l.RemoteStore)},l=function(e){return h.syncEngine.applyOnlineStateChange(e,$l.SharedClientState)},this.remoteStore=new Rh(this.localStore,a,this.asyncQueue,s,i),this.syncEngine=new Tf(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=l,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new af(this.syncEngine),[4,this.sharedClientState.start()];case 2:return f.sent(),[4,this.remoteStore.start()];case 3:return f.sent(),[4,this.persistence.setPrimaryStateListener((function(e){return u(h,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return f.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return u(h,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}}))}))}))];case 5:return f.sent(),[2]}}))}))}))},Zf.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),Br(Hf,"Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},Zf.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.disableNetwork()}))},Zf.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return u(e,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},Zf.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new $i;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.registerPendingWritesCallback(t)})),t.promise},Zf.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new uf(e,t,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(i)})),i},Zf.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.unlisten(e)}))},Zf.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.localStore.readDocument(e)})).then((function(e){if(e instanceof qs)return e;if(e instanceof Ws)return null;throw new Xr(Yr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},Zf.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return u(t,void 0,void 0,(function(){var t,n,r;return c(this,(function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return t=i.sent(),n=new pf(e,t.remoteKeys),r=n.computeDocChanges(t.documents),[2,n.applyChanges(r,!1).snapshot]}}))}))}))},Zf.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new $i;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.write(e,n)})),n.promise},Zf.prototype.databaseId=function(){return this.databaseInfo.databaseId},Zf.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()}))},Zf.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(Zf.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),Zf.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new $i;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()})),n.promise},Zf);function Zf(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=Ei.newId()}var ed=(td.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},td.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},td.prototype.mute=function(){this.muted=!0},td.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},td);function td(e){this.observer=e,this.muted=!1}var nd=(rd.documentId=function(){return rd._DOCUMENT_ID},rd.prototype.isEqual=function(e){if(!(e instanceof rd))throw vi("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},rd._DOCUMENT_ID=new rd(Qi.keyField().canonicalString()),rd);function rd(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e,t,n,r){if(!(t instanceof Array)||t.length<1)throw new Xr(Yr.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+Ti(1,"element")+".")}(0,e);for(var n=0;n<e.length;++n)if(ui("FieldPath","string",n,e[n]),0===e[n].length)throw new Xr(Yr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qi(e)}var id=new RegExp("[~\\*/\\[\\]]"),od=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},ad=(sd.prototype.getToken=function(){return Promise.resolve(null)},sd.prototype.invalidateToken=function(){},sd.prototype.setChangeListener=function(e){Wr(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=e)(Sf.UNAUTHENTICATED)},sd.prototype.removeChangeListener=function(){Wr(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},sd);function sd(){this.changeListener=null}var ud=(cd.prototype.getToken=function(){var e=this;Wr(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(e.tokenCounter!==t)throw new Xr(Yr.ABORTED,"getToken aborted due to token change.");return n?(Wr("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new od(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},cd.prototype.invalidateToken=function(){this.forceRefresh=!0},cd.prototype.setChangeListener=function(e){Wr(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.receivedInitialUser&&e(this.currentUser)},cd.prototype.removeChangeListener=function(){Wr(null!=this.tokenListener,"removeChangeListener() called twice"),Wr(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},cd.prototype.getUser=function(){var e=this.auth&&this.auth.getUid();return Wr(null===e||"string"==typeof e,"Received invalid UID: "+e),new Sf(e)},cd);function cd(e){var t=this;this.tokenListener=null,this.currentUser=Sf.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.receivedInitialUser=!0,t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),e.get().then((function(e){t.auth=e,t.tokenListener&&t.auth.addAuthTokenListener(t.tokenListener)}),(function(){})))}var ld=(Object.defineProperty(hd.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),hd);function hd(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=Sf.FIRST_PARTY}var fd=(dd.prototype.getToken=function(){return Promise.resolve(new ld(this.gapi,this.sessionIndex))},dd.prototype.setChangeListener=function(e){e(Sf.FIRST_PARTY)},dd.prototype.removeChangeListener=function(){},dd.prototype.invalidateToken=function(){},dd);function dd(e,t){this.gapi=e,this.sessionIndex=t}function pd(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var md=(yd.delete=function(){return ii("FieldValue.delete",arguments),vd.instance},yd.serverTimestamp=function(){return ii("FieldValue.serverTimestamp",arguments),Td.instance},yd.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ai("FieldValue.arrayUnion",arguments,1),new Cd(e)},yd.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ai("FieldValue.arrayRemove",arguments,1),new Dd(e)},yd.increment=function(e){return ui("FieldValue.increment","number",1,e),oi("FieldValue.increment",arguments,1),new Ad(e)},yd.prototype.isEqual=function(e){return this===e},yd);function yd(e){this._methodName=e}var gd,vd=(i(bd,gd=md),bd.instance=new bd,bd);function bd(){return gd.call(this,"FieldValue.delete")||this}var wd,Td=(i(Ed,wd=md),Ed.instance=new Ed,Ed);function Ed(){return wd.call(this,"FieldValue.serverTimestamp")||this}var Sd,Cd=(i(Id,Sd=md),Id);function Id(e){var t=Sd.call(this,"FieldValue.arrayUnion")||this;return t._elements=e,t}var kd,Dd=(i(Nd,kd=md),Nd);function Nd(e){var t=kd.call(this,"FieldValue.arrayRemove")||this;return t._elements=e,t}var _d,Ad=(i(xd,_d=md),xd);function xd(e){var t=_d.call(this,"FieldValue.increment")||this;return t._operand=e,t}var Pd=$r(md,"Use FieldValue.<field>() instead."),Od=/^__.*__$/,Rd=(Md.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new La(e,this.data,this.fieldMask,t)):n.push(new Oa(e,this.data,t)),0<this.fieldTransforms.length&&n.push(new Ua(e,this.fieldTransforms)),n},Md);function Md(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}var Ld,Fd,Vd=(Ud.prototype.toMutations=function(e,t){var n=[new La(e,this.data,this.fieldMask,t)];return 0<this.fieldTransforms.length&&n.push(new Ua(e,this.fieldTransforms)),n},Ud);function Ud(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}function Bd(e){switch(e){case Ld.Set:case Ld.MergeSet:case Ld.Update:return!0;case Ld.Argument:case Ld.ArrayArgument:return!1;default:throw zr("Unexpected case for UserDataSource: "+e)}}(Fd=Ld=Ld||{})[Fd.Set=0]="Set",Fd[Fd.Update=1]="Update",Fd[Fd.MergeSet=2]="MergeSet",Fd[Fd.Argument=3]="Argument",Fd[Fd.ArrayArgument=4]="ArrayArgument";var qd=(jd.prototype.childContextForField=function(e){var t=null==this.path?null:this.path.child(e),n=new jd(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return n.validatePathSegment(e),n},jd.prototype.childContextForFieldPath=function(e){var t=null==this.path?null:this.path.child(e),n=new jd(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return n.validatePath(),n},jd.prototype.childContextForArray=function(e){return new jd(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},jd.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new Xr(Yr.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},jd.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},jd.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},jd.prototype.validatePathSegment=function(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(Bd(this.dataSource)&&Od.test(e))throw this.createError('Document fields cannot begin and end with "__"')},jd);function jd(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}var zd=function(e,t){this.databaseId=e,this.key=t},Wd=(Kd.prototype.parseSetData=function(e,t){var n=new qd(Ld.Set,e,Qi.EMPTY_PATH);Gd("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new Rd(r,null,n.fieldTransforms)},Kd.prototype.parseMergeData=function(e,t,n){var r=new qd(Ld.MergeSet,e,Qi.EMPTY_PATH);Gd("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new Co(Qi.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof nd)h=l._internalPath;else{if("string"!=typeof l)throw zr("Expected stringOrFieldPath to be a string or a FieldPath");h=Yd(e,l)}if(!r.contains(h))throw new Xr(Yr.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=Ta.fromSet(s),o=r.fieldTransforms.filter((function(e){return i.covers(e.field)}))}else i=Ta.fromArray(r.fieldMask),o=r.fieldTransforms;return new Rd(a,i,o)},Kd.prototype.parseUpdateData=function(e,t){var n=this,r=new qd(Ld.Update,e,Qi.EMPTY_PATH);Gd("Data must be an object, but it was:",r,t);var i=new Co(Qi.comparator),o=Os.EMPTY;ni(t,(function(t,a){var s=Yd(e,t),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof vd)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}}));var a=Ta.fromSet(i);return new Vd(o,a,r.fieldTransforms)},Kd.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new qd(Ld.Update,e,Qi.EMPTY_PATH),o=[Hd(e,t)],a=[n];if(r.length%2!=0)throw new Xr(Yr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(Hd(e,r[s])),a.push(r[s+1]);var u=new Co(Qi.comparator),c=Os.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof vd)u=u.add(l);else{var d=this.parseData(f,h);null!=d&&(u=u.add(l),c=c.set(l,d))}}var p=Ta.fromSet(u);return new Vd(c,p,i.fieldTransforms)},Kd.prototype.parseQueryValue=function(e,t,n){void 0===n&&(n=!1);var r=new qd(n?Ld.ArrayArgument:Ld.Argument,e,Qi.EMPTY_PATH),i=this.parseData(t,r);return Wr(null!=i,"Parsed data should not be null."),Wr(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},Kd.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=Xd(e);throw t.createError(n)}},Kd.prototype.parseData=function(e,t){if(Qd(e=this.runPreConverter(e,t)))return Gd("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof md)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement&&t.dataSource!==Ld.ArrayArgument)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},Kd.prototype.parseObject=function(e,t){var n=this,r=new yo(Ci);return ri(e)?t.path&&0<t.path.length&&t.fieldMask.push(t.path):ni(e,(function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))})),new Os(r)},Kd.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=Za.INSTANCE),n.push(s),r++}return new Ls(n)},Kd.prototype.parseSentinelFieldValue=function(e,t){if(!Bd(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof vd){if(t.dataSource!==Ld.MergeSet)throw t.dataSource===Ld.Update?(Wr(0<t.path.length,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof Td)t.fieldTransforms.push(new Sa(t.path,Vh.instance));else if(e instanceof Cd){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new Bh(n);t.fieldTransforms.push(new Sa(t.path,r))}else if(e instanceof Dd){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new jh(n);t.fieldTransforms.push(new Sa(t.path,i))}else if(e instanceof Ad){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new Wh(o);t.fieldTransforms.push(new Sa(t.path,a))}else zr("Unknown FieldValue type: "+e)},Kd.prototype.parseScalarValue=function(e,t){if(null===e)return Za.INSTANCE;if("number"==typeof e)return Dc(e)?new cs(e):new fs(e);if("boolean"==typeof e)return ns.of(e);if("string"==typeof e)return new ms(e);if(e instanceof Date)return new vs(ho.fromDate(e));if(e instanceof ho)return new vs(new ho(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof Lh)return new As(e);if(e instanceof _i)return new Cs(e);if(e instanceof zd)return new Ds(e.databaseId,e.key);throw t.createError("Unsupported field value: "+mi(e))},Kd.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map((function(t,r){var i=new qd(Ld.Argument,e,Qi.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))}))},Kd);function Kd(e){this.preConverter=e}function Qd(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ho||e instanceof Lh||e instanceof _i||e instanceof zd||e instanceof md)}function Gd(e,t,n){if(!Qd(n)||!pi(n)){var r=mi(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function Hd(e,t){if(t instanceof nd)return t._internalPath;if("string"==typeof t)return Yd(e,t);throw new Xr(Yr.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Yd(e,t){try{return function(e){if(0<=e.search(id))throw new Xr(Yr.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(nd.bind.apply(nd,l([void 0],e.split("."))))}catch(t){throw new Xr(Yr.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(t){var n=Xd(t);throw new Xr(Yr.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function Xd(e){return e instanceof Error?e.message:e.toString()}var Jd=ec.COLLECTION_DISABLED,$d=(Zd.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},Zd);function Zd(e){if(void 0===e.host){if(void 0!==e.ssl)throw new Xr(Yr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else li("settings","non-empty string","host",e.host),this.host=e.host,hi("settings","boolean","ssl",e.ssl),this.ssl=ei(e.ssl,!0);if(gi("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),hi("settings","object","credentials",e.credentials),this.credentials=e.credentials,hi("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?qr("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&qr("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=ei(e.timestampsInSnapshots,!0),hi("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=ec.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==Jd&&e.cacheSizeBytes<ec.MINIMUM_CACHE_SIZE_BYTES)throw new Xr(Yr.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+ec.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}hi("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0!==e.experimentalForceLongPolling&&e.experimentalForceLongPolling}var ep=(tp.prototype.settings=function(e){if(oi("Firestore.settings",arguments,1),ui("Firestore.settings","object",1,e),Zr(e,"persistence"))throw new Xr(Yr.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new $d(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new Xr(Yr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this._settings=t).credentials&&(this._credentials=function(e){if(!e)return new ad;switch(e.type){case"gapi":var t=e.client;return Wr(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new fd(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new Xr(Yr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},tp.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},tp.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},tp.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new Xr(Yr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&qr("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=ei(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new Yf(this._settings.cacheSizeBytes,t))},tp.prototype.clearPersistence=function(){var e=this,t=pc.buildStoragePrefix(this.makeDatabaseInfo()),n=new $i;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return u(e,void 0,void 0,(function(){var e;return c(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new Xr(Yr.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,pc.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise},tp.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(tp.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),tp.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},tp.prototype.onSnapshotsInSync=function(e){if(this.ensureClientConfigured(),pd(e))return this.onSnapshotsInSyncInternal(e);ui("Firestore.onSnapshotsInSync","function",1,e);var t={next:e};return this.onSnapshotsInSyncInternal(t)},tp.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=new ed({next:function(){e.next&&e.next()},error:function(e){throw zr("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),t._firestoreClient.removeSnapshotsInSyncListener(n)}},tp.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Jf),this._firestoreClient},tp.prototype.makeDatabaseInfo=function(){return new Pi(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},tp.prototype.configureClient=function(e){Wr(!!this._settings.host,"FirestoreSettings.host is not set"),Wr(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new $f(Kr.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},tp.prototype.createDataConverter=function(e){return new Wd((function(t){if(t instanceof ap){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new Xr(Yr.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new zd(e,t._key)}return t}))},tp.databaseIdFromApp=function(e){var t=e.options;if(!Zr(t,"projectId"))throw new Xr(Yr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new Xr(Yr.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Ri(n)},Object.defineProperty(tp.prototype,"app",{get:function(){if(!this._firebaseApp)throw new Xr(Yr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),tp.prototype.collection=function(e){return oi("Firestore.collection",arguments,1),ui("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new wp(ji.fromString(e),this)},tp.prototype.doc=function(e){return oi("Firestore.doc",arguments,1),ui("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),ap.forPath(ji.fromString(e),this)},tp.prototype.collectionGroup=function(e){if(oi("Firestore.collectionGroup",arguments,1),ui("Firestore.collectionGroup","non-empty string",1,e),0<=e.indexOf("/"))throw new Xr(Yr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new mp(new Pc(ji.EMPTY_PATH,e),this)},tp.prototype.runTransaction=function(e){var t=this;return oi("Firestore.runTransaction",arguments,1),ui("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction((function(n){return e(new np(t,n))}))},tp.prototype.batch=function(){return this.ensureClientConfigured(),new ip(this)},Object.defineProperty(tp,"logLevel",{get:function(){switch(Vr()){case Nr.DEBUG:return"debug";case Nr.ERROR:return"error";case Nr.SILENT:return"silent";default:return zr("Unknown log level: "+Vr())}},enumerable:!0,configurable:!0}),tp.setLogLevel=function(e){switch(oi("Firestore.setLogLevel",arguments,1),ui("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":Ur(Nr.DEBUG);break;case"error":Ur(Nr.ERROR);break;case"silent":Ur(Nr.SILENT);break;default:throw new Xr(Yr.INVALID_ARGUMENT,"Invalid log level: "+e)}},tp.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},tp);function tp(e,t){var n=this;if(this._firebaseApp=null,this._queue=new to,this.INTERNAL={delete:function(){return u(n,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}}))}))}},"object"==typeof e.options){var r=e;this._firebaseApp=r,this._databaseId=tp.databaseIdFromApp(r),this._persistenceKey=r.name,this._credentials=new ud(t)}else{var i=e;if(!i.projectId)throw new Xr(Yr.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new Ri(i.projectId,i.database),this._persistenceKey="[DEFAULT]",this._credentials=new ad}this._settings=new $d({}),this._dataConverter=this.createDataConverter(this._databaseId)}var np=(rp.prototype.get=function(e){var t=this;oi("Transaction.get",arguments,1);var n=Ip("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return zr("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof Ws)return new lp(t._firestore,n._key,null,!1,!1,n._converter);if(r instanceof qs)return new lp(t._firestore,n._key,r,!1,!1,n._converter);throw zr("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},rp.prototype.set=function(e,t,n){si("Transaction.set",arguments,2,3);var r=Ip("Transaction.set",e,this._firestore);n=Ep("Transaction.set",n);var i=kp(r._converter,t,"Transaction.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._transaction.set(r._key,s),this},rp.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return i="string"==typeof t||t instanceof nd?(ai("Transaction.update",arguments,3),r=Ip("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(oi("Transaction.update",arguments,2),r=Ip("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},rp.prototype.delete=function(e){oi("Transaction.delete",arguments,1);var t=Ip("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},rp);function rp(e,t){this._firestore=e,this._transaction=t}var ip=(op.prototype.set=function(e,t,n){si("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Ip("WriteBatch.set",e,this._firestore);n=Ep("WriteBatch.set",n);var i=kp(r._converter,t,"WriteBatch.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._mutations=this._mutations.concat(s.toMutations(r._key,Na.NONE)),this},op.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),i="string"==typeof t||t instanceof nd?(ai("WriteBatch.update",arguments,3),r=Ip("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(oi("WriteBatch.update",arguments,2),r=Ip("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,Na.exists(!0))),this},op.prototype.delete=function(e){oi("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=Ip("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new Qa(t._key,Na.NONE)),this},op.prototype.commit=function(){return u(this,void 0,void 0,(function(){return c(this,(function(e){return this.verifyNotCommitted(),this._committed=!0,0<this._mutations.length?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},op.prototype.verifyNotCommitted=function(){if(this._committed)throw new Xr(Yr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},op);function op(e){this._firestore=e,this._mutations=[],this._committed=!1}var ap=(sp.forPath=function(e,t,n){if(e.length%2!=0)throw new Xr(Yr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new sp(new Hi(e),t,n)},Object.defineProperty(sp.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(sp.prototype,"parent",{get:function(){return new wp(this._key.path.popLast(),this.firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(sp.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),sp.prototype.collection=function(e){if(oi("DocumentReference.collection",arguments,1),ui("DocumentReference.collection","non-empty string",1,e),!e)throw new Xr(Yr.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=ji.fromString(e);return new wp(this._key.path.child(t),this.firestore)},sp.prototype.isEqual=function(e){if(!(e instanceof sp))throw vi("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)&&this._converter===e._converter},sp.prototype.set=function(e,t){si("DocumentReference.set",arguments,1,2),t=Ep("DocumentReference.set",t);var n=kp(this._converter,e,"DocumentReference.set"),r=n[0],i=n[1],o=t.merge||t.mergeFields?this.firestore._dataConverter.parseMergeData(i,r,t.mergeFields):this.firestore._dataConverter.parseSetData(i,r);return this._firestoreClient.write(o.toMutations(this._key,Na.NONE))},sp.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof e||e instanceof nd?(ai("DocumentReference.update",arguments,2),this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(oi("DocumentReference.update",arguments,1),this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,Na.exists(!0)))},sp.prototype.delete=function(){return oi("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Qa(this._key,Na.NONE)])},sp.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];si("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||pd(e[i])||(gi("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),hi("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=pd(e[i])?e[i]:(ui("DocumentReference.onSnapshot","function",i,e[i]),ci("DocumentReference.onSnapshot","function",i+1,e[i+1]),ci("DocumentReference.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},sp.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new ed({next:function(e){if(t.next){Wr(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new lp(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites,n._converter))}},error:r}),o=this._firestoreClient.listen(Pc.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},sp.prototype.get=function(e){var t=this;return si("DocumentReference.get",arguments,0,1),Cp("DocumentReference.get",e),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then((function(e){n(new lp(t.firestore,t._key,e,!0,e instanceof qs&&e.hasLocalMutations,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},sp.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new Xr(Yr.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new Xr(Yr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},sp.prototype.withConverter=function(e){return new sp(this._key,this.firestore,e)},sp);function sp(e,t,n){this._key=e,this.firestore=t,this._converter=n,this._firestoreClient=this.firestore.ensureClientConfigured()}var up=(cp.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},cp);function cp(e,t){this.hasPendingWrites=e,this.fromCache=t}var lp=(hp.prototype.data=function(e){if(si("DocumentSnapshot.data",arguments,0,1),e=Sp("DocumentSnapshot.data",e),this._document){if(this._converter){var t=new dp(this._firestore,this._key,this._document,this._fromCache,this._hasPendingWrites);return this._converter.fromFirestore(t,e)}return this.toJSObject(this._document.data(),Ha.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},hp.prototype.get=function(e,t){if(si("DocumentSnapshot.get",arguments,1,2),t=Sp("DocumentSnapshot.get",t),this._document){var n=this._document.data().field(Hd("DocumentSnapshot.get",e));if(null!==n)return this.toJSValue(n,Ha.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(hp.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(hp.prototype,"ref",{get:function(){return new ap(this._key,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(hp.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(hp.prototype,"metadata",{get:function(){return new up(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),hp.prototype.isEqual=function(e){if(!(e instanceof hp))throw vi("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))&&this._converter===e._converter},hp.prototype.toJSObject=function(e,t){var n=this,r={};return e.forEach((function(e,i){r[e]=n.toJSValue(i,t)})),r},hp.prototype.toJSValue=function(e,t){if(e instanceof Os)return this.toJSObject(e,t);if(e instanceof Ls)return this.toJSArray(e,t);if(e instanceof Ds){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||qr("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new ap(n,this._firestore,this._converter)}return e.value(t)},hp.prototype.toJSArray=function(e,t){var n=this;return e.internalValue.map((function(e){return n.toJSValue(e,t)}))},hp);function hp(e,t,n,r,i,o){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i,this._converter=o}var fp,dp=(i(pp,fp=lp),pp.prototype.data=function(e){var t=fp.prototype.data.call(this,e);return Wr(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t},pp);function pp(){return null!==fp&&fp.apply(this,arguments)||this}var mp=(yp.prototype.where=function(e,t,n){var r;oi("Query.where",arguments,3),yi("Query.where",3,n),function(e,t,n,r){if(!t.some((function(e){return e===r})))throw new Xr(Yr.INVALID_ARGUMENT,"Invalid value "+mi(r)+" provided to function Query.where() for its "+wi(2)+" argument. Acceptable values: "+t.join(", "))}(0,["<","<=","==",">=",">","array-contains","in","array-contains-any"],0,t);var i=Hd("Query.where",e),o=Rc.fromString(t);if(i.isKeyField()){if(o===Rc.ARRAY_CONTAINS||o===Rc.ARRAY_CONTAINS_ANY)throw new Xr(Yr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o.toString()+"' queries on FieldPath.documentId().");if(o===Rc.IN){this.validateDisjunctiveFilterElements(n,o);for(var a=[],s=0,u=n;s<u.length;s++){var c=u[s];a.push(this.parseDocumentIdValue(c))}r=new Ls(a)}else r=this.parseDocumentIdValue(n)}else o!==Rc.IN&&o!==Rc.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(n,o),r=this.firestore._dataConverter.parseQueryValue("Query.where",n,o===Rc.IN);var l=Fc.create(i,o,r);return this.validateNewFilter(l),new yp(this._query.addFilter(l),this.firestore,this._converter)},yp.prototype.orderBy=function(e,t){var n;if(si("Query.orderBy",arguments,1,2),ci("Query.orderBy","non-empty string",2,t),void 0===t||"asc"===t)n=el.ASCENDING;else{if("desc"!==t)throw new Xr(Yr.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+t+"', expected 'asc' or 'desc'.");n=el.DESCENDING}if(null!==this._query.startAt)throw new Xr(Yr.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new Xr(Yr.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=Hd("Query.orderBy",e),i=new il(r,n);return this.validateNewOrderBy(i),new yp(this._query.addOrderBy(i),this.firestore,this._converter)},yp.prototype.limit=function(e){return oi("Query.limit",arguments,1),ui("Query.limit","number",1,e),bi("Query.limit",1,e),new yp(this._query.withLimitToFirst(e),this.firestore,this._converter)},yp.prototype.limitToLast=function(e){return oi("Query.limitToLast",arguments,1),ui("Query.limitToLast","number",1,e),bi("Query.limitToLast",1,e),new yp(this._query.withLimitToLast(e),this.firestore,this._converter)},yp.prototype.startAt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];ai("Query.startAt",arguments,1);var r=this.boundFromDocOrFields("Query.startAt",e,t,!0);return new yp(this._query.withStartAt(r),this.firestore,this._converter)},yp.prototype.startAfter=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];ai("Query.startAfter",arguments,1);var r=this.boundFromDocOrFields("Query.startAfter",e,t,!1);return new yp(this._query.withStartAt(r),this.firestore,this._converter)},yp.prototype.endBefore=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];ai("Query.endBefore",arguments,1);var r=this.boundFromDocOrFields("Query.endBefore",e,t,!0);return new yp(this._query.withEndAt(r),this.firestore,this._converter)},yp.prototype.endAt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];ai("Query.endAt",arguments,1);var r=this.boundFromDocOrFields("Query.endAt",e,t,!1);return new yp(this._query.withEndAt(r),this.firestore,this._converter)},yp.prototype.isEqual=function(e){if(!(e instanceof yp))throw vi("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},yp.prototype.withConverter=function(e){return new yp(this._query,this.firestore,e)},yp.prototype.boundFromDocOrFields=function(e,t,n,r){if(yi(e,1,t),t instanceof lp){if(0<n.length)throw new Xr(Yr.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new Xr(Yr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},yp.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Ds(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof Ts)throw new Xr(Yr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new Xr(Yr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new nl(r,n)},yp.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new Xr(Yr.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new Xr(Yr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new Xr(Yr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(ji.fromString(a));if(!Hi.isDocumentKey(s))throw new Xr(Yr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new Hi(s);i.push(new Ds(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(e,a);i.push(c)}}return new nl(i,n)},yp.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];si("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||pd(e[i])||(gi("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),hi("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=pd(e[i])?e[i]:(ui("Query.onSnapshot","function",i,e[i]),ci("Query.onSnapshot","function",i+1,e[i+1]),ci("Query.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},yp.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new ed({next:function(e){t.next&&t.next(new gp(n.firestore,n._query,e,n._converter))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},yp.prototype.validateHasExplicitOrderByForLimitToLast=function(e){if(e.hasLimitToLast()&&0===e.explicitOrderBy.length)throw new Xr(Yr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},yp.prototype.get=function(e){var t=this;return si("Query.get",arguments,0,1),Cp("Query.get",e),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then((function(e){n(new gp(t.firestore,t._query,e,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},yp.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new Xr(Yr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},yp.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new Xr(Yr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new Xr(Yr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(ji.fromString(e));if(!Hi.isDocumentKey(t))throw new Xr(Yr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new Ds(this.firestore._databaseId,new Hi(t))}if(e instanceof ap){var n=e;return new Ds(this.firestore._databaseId,n._key)}throw new Xr(Yr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+mi(e)+".")},yp.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new Xr(Yr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(10<e.length)throw new Xr(Yr.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=e.indexOf(null))throw new Xr(Yr.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(0<e.filter((function(e){return Number.isNaN(e)})).length)throw new Xr(Yr.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},yp.prototype.validateNewFilter=function(e){if(e instanceof Fc){var t=[Rc.ARRAY_CONTAINS,Rc.ARRAY_CONTAINS_ANY],n=[Rc.IN,Rc.ARRAY_CONTAINS_ANY],r=0<=t.indexOf(e.op),i=0<=n.indexOf(e.op);if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new Xr(Yr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(t)),null!=s)throw s===e.op?new Xr(Yr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Xr(Yr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},yp.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},yp.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new Xr(Yr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},yp);function yp(e,t,n){this._query=e,this.firestore=t,this._converter=n}var gp=(Object.defineProperty(vp.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!0,configurable:!0}),Object.defineProperty(vp.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(vp.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),vp.prototype.forEach=function(e,t){var n=this;si("QuerySnapshot.forEach",arguments,1,2),ui("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach((function(r){e.call(t,n.convertToDocumentImpl(r))}))},Object.defineProperty(vp.prototype,"query",{get:function(){return new mp(this._originalQuery,this._firestore,this._converter)},enumerable:!0,configurable:!0}),vp.prototype.docChanges=function(e){e&&(gi("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),hi("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new Xr(Yr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n,r){if(n.oldDocs.isEmpty()){var i,o=0;return n.docChanges.map((function(t){var a=new dp(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r);return Wr(t.type===uh.Added,"Invalid event type for first snapshot"),Wr(!i||n.query.docComparator(i,t.doc)<0,"Got added events in wrong order"),i=t.doc,{type:"added",doc:a,oldIndex:-1,newIndex:o++}}))}var a=n.oldDocs;return n.docChanges.filter((function(e){return t||e.type!==uh.Metadata})).map((function(t){var i=new dp(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r),o=-1,s=-1;return t.type!==uh.Added&&(Wr(0<=(o=a.indexOf(t.doc.key)),"Index for document not found"),a=a.delete(t.doc.key)),t.type!==uh.Removed&&(s=(a=a.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case uh.Added:return"added";case uh.Modified:case uh.Metadata:return"modified";case uh.Removed:return"removed";default:return zr("Unknown change type: "+e)}}(t.type),doc:i,oldIndex:o,newIndex:s}}))}(this._firestore,t,this._snapshot,this._converter),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},vp.prototype.isEqual=function(e){if(!(e instanceof vp))throw vi("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)&&this._converter===e._converter},vp.prototype.convertToDocumentImpl=function(e){return new dp(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key),this._converter)},vp);function vp(e,t,n,r){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._converter=r,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new up(n.hasPendingWrites,n.fromCache)}l(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(e){try{Object.defineProperty(gp.prototype.docChanges,e,{get:function(){return function(){throw new Xr(Yr.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}}));var bp,wp=(i(Tp,bp=mp),Object.defineProperty(Tp.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(Tp.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new ap(new Hi(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(Tp.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),Tp.prototype.doc=function(e){if(si("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=Ei.newId()),ui("CollectionReference.doc","non-empty string",1,e),""===e)throw new Xr(Yr.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=ji.fromString(e);return ap.forPath(this._query.path.child(t),this.firestore,this._converter)},Tp.prototype.add=function(e){oi("CollectionReference.add",arguments,1),ui("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then((function(){return t}))},Tp.prototype.withConverter=function(e){return new Tp(this._path,this.firestore,e)},Tp);function Tp(e,t,n){var r=bp.call(this,Pc.atPath(e),t,n)||this;if((r._path=e).length%2!=1)throw new Xr(Yr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return r}function Ep(e,t){if(void 0===t)return{merge:!1};if(gi(e,t,["merge","mergeFields"]),hi(e,"boolean","merge",t.merge),function(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){if(!(r instanceof Array))throw new Xr(Yr.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+mi(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new Xr(Yr.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+o+" was: "+mi(r[o]))}(e,t,n,r,i)}(e,"mergeFields","a string or a FieldPath",t.mergeFields,(function(e){return"string"==typeof e||e instanceof nd})),void 0!==t.mergeFields&&void 0!==t.merge)throw new Xr(Yr.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function Sp(e,t){return void 0===t?{}:(gi(e,t,["serverTimestamps"]),fi(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function Cp(e,t){ci(e,"object",1,t),t&&(gi(e,t,["source"]),fi(e,0,"source",t.source,["default","server","cache"]))}function Ip(e,t,n){if(t instanceof ap){if(t.firestore!==n)throw new Xr(Yr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw vi(e,"DocumentReference",1,t)}function kp(e,t,n){var r;return e?(r=e.toFirestore(t),n="toFirestore() in "+n):r=t,[r,n]}var Dp=$r(ep,"Use firebase.firestore() instead."),Np=$r(np,"Use firebase.firestore().runTransaction() instead."),_p=$r(ip,"Use firebase.firestore().batch() instead."),Ap=$r(ap,"Use firebase.firestore().doc() instead."),xp=$r(lp),Pp=$r(dp),Op=$r(mp),Rp=$r(gp),Mp=$r(wp,"Use firebase.firestore().collection() instead."),Lp={Firestore:Dp,GeoPoint:Lh,Timestamp:ho,Blob:xi,Transaction:Np,WriteBatch:_p,DocumentReference:Ap,DocumentSnapshot:xp,Query:Op,QueryDocumentSnapshot:Pp,QuerySnapshot:Rp,CollectionReference:Mp,FieldPath:nd,FieldValue:Pd,setLogLevel:ep.setLogLevel,CACHE_SIZE_UNLIMITED:Jd},Fp=(Vp.prototype.addCallback=function(e){},Vp.prototype.shutdown=function(){},Vp);function Vp(){}var Up="ConnectivityMonitor",Bp=(qp.prototype.addCallback=function(e){this.callbacks.push(e)},qp.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},qp.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},qp.prototype.onNetworkAvailable=function(){Br(Up,"Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(0)},qp.prototype.onNetworkUnavailable=function(){Br(Up,"Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(1)},qp.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},qp);function qp(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}var jp=(zp.prototype.onOpen=function(e){Wr(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},zp.prototype.onClose=function(e){Wr(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},zp.prototype.onMessage=function(e){Wr(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},zp.prototype.close=function(){this.closeFn()},zp.prototype.send=function(e){this.sendFn(e)},zp.prototype.callOnOpen=function(){Wr(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},zp.prototype.callOnClose=function(e){Wr(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},zp.prototype.callOnMessage=function(e){Wr(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},zp);function zp(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}var Wp="Connection",Kp={BatchGetDocuments:"batchGet",Commit:"commit"},Qp="gl-js/ fire/"+Lr,Gp=(Hp.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=Qp},Hp.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise((function(o,a){var u=new Mr;u.listenOnce(Or.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Pr.NO_ERROR:var t=u.getResponseJson();Br(Wp,"XHR received:",JSON.stringify(t)),o(t);break;case Pr.TIMEOUT:Br(Wp,'RPC "'+e+'" timed out'),a(new Xr(Yr.DEADLINE_EXCEEDED,"Request time out"));break;case Pr.HTTP_ERROR:var n=u.getStatus();if(Br(Wp,'RPC "'+e+'" failed with status:',n,"response text:",u.getResponseText()),0<n){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var i=function(e){var t=e.toLowerCase().replace("_","-");return 0<=Object.values(Yr).indexOf(t)?t:Yr.UNKNOWN}(r.status);a(new Xr(i,r.message))}else a(new Xr(Yr.UNKNOWN,"Server responded with status "+u.getStatus()))}else Br(Wp,'RPC "'+e+'" failed'),a(new Xr(Yr.UNAVAILABLE,"Connection failed."));break;default:zr('RPC "'+e+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{Br(Wp,'RPC "'+e+'" completed.')}}));var c=s({},t);delete c.database;var l=JSON.stringify(c);Br(Wp,"XHR sending: ",i+" "+l);var h={"Content-Type":"text/plain"};r.modifyHeadersForRequest(h,n),u.send(i,"POST",l,h,15)}))},Hp.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},Hp.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=xr(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),"object"==typeof navigator&&"ReactNative"===navigator.product||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");function a(e,t){s.listen(e,(function(e){try{t(e)}catch(e){setTimeout((function(){throw e}),0)}}))}Br(Wp,"Creating WebChannel: "+o+" "+i);var s=r.createWebChannel(o,i),u=!1,c=!1,l=new jp({sendFn:function(e){c?Br(Wp,"Not sending because WebChannel is closed:",e):(u||(Br(Wp,"Opening WebChannel transport."),s.open(),u=!0),Br(Wp,"WebChannel sending:",e),s.send(e))},closeFn:function(){return s.close()}});return a(Rr.EventType.OPEN,(function(){c||Br(Wp,"WebChannel transport opened.")})),a(Rr.EventType.CLOSE,(function(){c||(c=!0,Br(Wp,"WebChannel transport closed"),l.callOnClose())})),a(Rr.EventType.ERROR,(function(e){c||(c=!0,Br(Wp,"WebChannel transport errored:",e),l.callOnClose(new Xr(Yr.UNAVAILABLE,"The operation could not be completed")))})),a(Rr.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];Wr(!!n,"Got a webchannel message without data.");var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Br(Wp,"WebChannel received error:",i);var o=i.status,a=function(e){var t=nh[e];if(void 0!==t)return sh(t)}(o),u=i.message;void 0===a&&(a=Yr.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,l.callOnClose(new Xr(a,u)),s.close()}else Br(Wp,"WebChannel received:",n),l.callOnMessage(n)}})),setTimeout((function(){l.callOnOpen()}),0),l},Hp.prototype.makeUrl=function(e){var t=Kp[e];return Wr(void 0!==t,"Unknown REST mapping for: "+e),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+t},Hp);function Hp(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}var Yp,Xp=(Object.defineProperty(Jp.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jp.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),Jp.prototype.loadConnection=function(e){return Promise.resolve(new Gp(e))},Jp.prototype.newConnectivityMonitor=function(){return Bp.isAvailable()?new Bp:new Fp},Jp.prototype.newSerializer=function(e){return new nf(e,{useProto3Json:!0})},Jp.prototype.formatJSON=function(e){return JSON.stringify(e)},Jp.prototype.atob=function(e){return atob(e)},Jp.prototype.btoa=function(e){return btoa(e)},Jp);function Jp(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}Kr.setPlatform(new Xp),function(e){e.INTERNAL.registerComponent(new S("firestore",(function(e){var t=e.getProvider("app").getImmediate();return new ep(t,e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(function(e){Wr(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(Lp)))}(Yp=n),Yp.registerVersion("@firebase/firestore","1.9.1")}).apply(this,arguments)}catch(r){throw console.error(r),new Error("Cannot instantiate firebase-firestore - be sure to load firebase-app.js first.")}}(n(12))}).call(this,n(14),n(32))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&d())}function d(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}}]]);
//# sourceMappingURL=2.ec143a4c.chunk.js.map